2025-07-28T13:39:03.520072773Z [1] "Record input arguments"
2025-07-28T13:39:03.522151684Z                   argument
2025-07-28T13:39:03.522168475Z 1                 df_input
2025-07-28T13:39:03.522169951Z 2                      ipw
2025-07-28T13:39:03.522170989Z 3           sample_exposed
2025-07-28T13:39:03.522171956Z 4                 exposure
2025-07-28T13:39:03.522172985Z 5                  outcome
2025-07-28T13:39:03.522174062Z 6                   strata
2025-07-28T13:39:03.522175499Z 7            covariate_sex
2025-07-28T13:39:03.522176500Z 8            covariate_age
2025-07-28T13:39:03.522177523Z 9          covariate_other
2025-07-28T13:39:03.522178517Z 10               cox_start
2025-07-28T13:39:03.522179475Z 11                cox_stop
2025-07-28T13:39:03.522180439Z 12             study_start
2025-07-28T13:39:03.522181409Z 13              study_stop
2025-07-28T13:39:03.522182402Z 14              cut_points
2025-07-28T13:39:03.522183349Z 15       controls_per_case
2025-07-28T13:39:03.522184275Z 16   total_event_threshold
2025-07-28T13:39:03.522185224Z 17 episode_event_threshold
2025-07-28T13:39:03.522186183Z 18     covariate_threshold
2025-07-28T13:39:03.522187199Z 19              age_spline
2025-07-28T13:39:03.522188143Z 20               df_output
2025-07-28T13:39:03.522189112Z 21                    seed
2025-07-28T13:39:03.522190086Z 22     save_analysis_ready
2025-07-28T13:39:03.522191032Z 23            run_analysis
2025-07-28T13:39:03.522191994Z 24                  config
2025-07-28T13:39:03.522192939Z 25                    help
2025-07-28T13:39:03.522194162Z                                                                                                                                                                                                                                                                                                                                                                                                                                      value
2025-07-28T13:39:03.522196354Z 1                                                                                                                                                                                                                                                                                                                                                                                             model/model_input-cohort_prevax-main-ami.rds
2025-07-28T13:39:03.522197883Z 2                                                                                                                                                                                                                                                                                                                                                                                                                                     TRUE
2025-07-28T13:39:03.522208242Z 3                                                                                                                                                                                                                                                                                                                                                                                                                                    FALSE
2025-07-28T13:39:03.522209873Z 4                                                                                                                                                                                                                                                                                                                                                                                                                                 exp_date
2025-07-28T13:39:03.522211387Z 5                                                                                                                                                                                                                                                                                                                                                                                                                                 out_date
2025-07-28T13:39:03.522212895Z 6                                                                                                                                                                                                                                                                                                                                                                                                                         strat_cat_region
2025-07-28T13:39:03.522214561Z 7                                                                                                                                                                                                                                                                                                                                                                                                                              cov_cat_sex
2025-07-28T13:39:03.522216084Z 8                                                                                                                                                                                                                                                                                                                                                                                                                              cov_num_age
2025-07-28T13:39:03.522217592Z 9  cov_cat_ethnicity;cov_cat_imd;cov_num_consrate2019;cov_bin_hcworker;cov_cat_smoking;cov_bin_carehome;cov_bin_obesity;cov_bin_ami;cov_bin_dementia;cov_bin_liver_disease;cov_bin_ckd;cov_bin_cancer;cov_bin_hypertension;cov_bin_diabetes;cov_bin_depression;cov_bin_copd;cov_bin_stroke_all;cov_bin_other_ae;cov_bin_vte;cov_bin_hf;cov_bin_angina;cov_bin_lipidmed;cov_bin_antiplatelet;cov_bin_anticoagulant;cov_bin_cocp;cov_bin_hrt
2025-07-28T13:39:03.522219092Z 10                                                                                                                                                                                                                                                                                                                                                                                                                              index_date
2025-07-28T13:39:03.522220636Z 11                                                                                                                                                                                                                                                                                                                                                                                                                        end_date_outcome
2025-07-28T13:39:03.522224100Z 12                                                                                                                                                                                                                                                                                                                                                                                                                              2020-01-01
2025-07-28T13:39:03.522225715Z 13                                                                                                                                                                                                                                                                                                                                                                                                                              2024-04-30
2025-07-28T13:39:03.522227260Z 14                                                                                                                                                                                                                                                                                                                                                                                                   1;7;14;28;56;84;183;365;730;1065;1582
2025-07-28T13:39:03.522228808Z 15                                                                                                                                                                                                                                                                                                                                                                                                                                      20
2025-07-28T13:39:03.522230360Z 16                                                                                                                                                                                                                                                                                                                                                                                                                                      50
2025-07-28T13:39:03.522231985Z 17                                                                                                                                                                                                                                                                                                                                                                                                                                       5
2025-07-28T13:39:03.522233537Z 18                                                                                                                                                                                                                                                                                                                                                                                                                                       5
2025-07-28T13:39:03.522235080Z 19                                                                                                                                                                                                                                                                                                                                                                                                                                    TRUE
2025-07-28T13:39:03.522237963Z 20                                                                                                                                                                                                                                                                                                                                                                                           model/model_output-cohort_prevax-main-ami.csv
2025-07-28T13:39:03.522239502Z 21                                                                                                                                                                                                                                                                                                                                                                                                                                     137
2025-07-28T13:39:03.522241155Z 22                                                                                                                                                                                                                                                                                                                                                                                                                                   FALSE
2025-07-28T13:39:03.522242681Z 23                                                                                                                                                                                                                                                                                                                                                                                                                                    TRUE
2025-07-28T13:39:03.522244191Z 24                                                                                                                                                                                                                                                                                                                                                                                                                                        
2025-07-28T13:39:03.522245711Z 25                                                                                                                                                                                                                                                                                                                                                                                                                                   FALSE
2025-07-28T13:39:03.522944002Z [1] "Import libraries"
2025-07-28T13:39:04.008276624Z [1] "Import functions"
2025-07-28T13:39:04.010084661Z [[1]]
2025-07-28T13:39:04.010115362Z [[1]]$value
2025-07-28T13:39:04.010553656Z function (df, covariate_threshold, strata) 
2025-07-28T13:39:04.010565108Z {
2025-07-28T13:39:04.010567833Z     library(magrittr)
2025-07-28T13:39:04.010569638Z     print("Identify non-numeric covariates to remove")
2025-07-28T13:39:04.010571371Z     covariate_removed <- NULL
2025-07-28T13:39:04.010581242Z     for (i in unique(c(colnames(df)[grepl("cov_", colnames(df))], 
2025-07-28T13:39:04.010583871Z         strata))) {
2025-07-28T13:39:04.010585469Z         if (grepl("cov_bin_", i) || grepl("cov_cat_", i)) {
2025-07-28T13:39:04.010587165Z             print(paste0("Covariate: ", i))
2025-07-28T13:39:04.010588767Z             print("Calculate frequency for each level")
2025-07-28T13:39:04.010590391Z             tmp <- unique(df[df$exposure_status == 1 & df$outcome_status == 
2025-07-28T13:39:04.010592056Z                 1, c("patient_id", i)])
2025-07-28T13:39:04.010593601Z             freq <- data.frame(table(tmp[, i]))
2025-07-28T13:39:04.010595182Z             print(freq)
2025-07-28T13:39:04.010596668Z             if (nrow(freq[freq$Freq <= covariate_threshold & 
2025-07-28T13:39:04.010598307Z                 freq$Var1 != "Missing", ]) > 0) {
2025-07-28T13:39:04.010599922Z                 print("Add covariate to removal list")
2025-07-28T13:39:04.010601444Z                 covariate_removed <- c(covariate_removed, i)
2025-07-28T13:39:04.010603004Z             }
2025-07-28T13:39:04.010604503Z             if (nrow(freq) == 1) {
2025-07-28T13:39:04.010606026Z                 print("Add covariate to removal list")
2025-07-28T13:39:04.010607619Z                 covariate_removed <- c(covariate_removed, i)
2025-07-28T13:39:04.010609199Z             }
2025-07-28T13:39:04.010610639Z         }
2025-07-28T13:39:04.010612123Z     }
2025-07-28T13:39:04.010613598Z     covariate_collapsed <- NULL
2025-07-28T13:39:04.010615096Z     if ("cov_cat_region" %in% covariate_removed) {
2025-07-28T13:39:04.010616662Z         print("Collapsing region as special case")
2025-07-28T13:39:04.010618241Z         df <- df %>% dplyr::mutate(cov_cat_region = dplyr::case_when(cov_cat_region == 
2025-07-28T13:39:04.010619854Z             "North East" ~ "Northern England", cov_cat_region == 
2025-07-28T13:39:04.010621481Z             "North West" ~ "Northern England", cov_cat_region == 
2025-07-28T13:39:04.010623063Z             "Yorkshire and The Humber" ~ "Northern England", 
2025-07-28T13:39:04.010624676Z             cov_cat_region == "London" ~ "Southern England", 
2025-07-28T13:39:04.010626318Z             cov_cat_region == "South East" ~ "Southern England", 
2025-07-28T13:39:04.010627940Z             cov_cat_region == "East Midlands" ~ "Midlands", cov_cat_region == 
2025-07-28T13:39:04.010629637Z                 "West Midlands" ~ "Midlands", cov_cat_region == 
2025-07-28T13:39:04.010631245Z                 "South West" ~ "Southern England", cov_cat_region == 
2025-07-28T13:39:04.010635306Z                 "East" ~ "Southern England"))
2025-07-28T13:39:04.010639647Z         df$cov_cat_region <- factor(df$cov_cat_region)
2025-07-28T13:39:04.010641782Z         df$cov_cat_region <- relevel(df$cov_cat_region, ref = "Southern England")
2025-07-28T13:39:04.010643530Z         covariate_removed <- setdiff(covariate_removed, "cov_cat_region")
2025-07-28T13:39:04.010645935Z         covariate_collapsed <- c(covariate_collapsed, "cov_cat_region")
2025-07-28T13:39:04.010647725Z     }
2025-07-28T13:39:04.010649143Z     if ("cov_cat_deprivation" %in% covariate_removed) {
2025-07-28T13:39:04.010650701Z         print("Collapsing deprivation as special case")
2025-07-28T13:39:04.010652310Z         df <- df %>% dplyr::mutate(cov_cat_deprivation = dplyr::case_when(cov_cat_deprivation == 
2025-07-28T13:39:04.010653943Z             "1-2 (most deprived)" ~ "1-4", cov_cat_deprivation == 
2025-07-28T13:39:04.010655528Z             "3-4" ~ "1-4", cov_cat_deprivation == "5-6" ~ "5-6", 
2025-07-28T13:39:04.010657191Z             cov_cat_deprivation == "7-8" ~ "7-10", cov_cat_deprivation == 
2025-07-28T13:39:04.010658819Z                 "9-10 (least deprived)" ~ "7-10"))
2025-07-28T13:39:04.010660407Z         df$cov_cat_deprivation <- ordered(df$cov_cat_deprivation, 
2025-07-28T13:39:04.010661948Z             levels = c("1-4", "5-6", "7-10"))
2025-07-28T13:39:04.010663582Z         covariate_removed <- setdiff(covariate_removed, "cov_cat_deprivation")
2025-07-28T13:39:04.010665192Z         covariate_collapsed <- c(covariate_collapsed, "cov_cat_deprivation")
2025-07-28T13:39:04.010666803Z     }
2025-07-28T13:39:04.010668203Z     if ("cov_cat_smoking_status" %in% covariate_removed) {
2025-07-28T13:39:04.010669710Z         print("Collapsing smoking status as special case")
2025-07-28T13:39:04.010671305Z         df <- df %>% dplyr::mutate(cov_cat_smoking_status = dplyr::case_when(cov_cat_smoking_status == 
2025-07-28T13:39:04.010672982Z             "Never smoker" ~ "Never smoker", cov_cat_smoking_status == 
2025-07-28T13:39:04.010674596Z             "Ever smoker" ~ "Ever smoker", cov_cat_smoking_status == 
2025-07-28T13:39:04.010676161Z             "Current smoker" ~ "Ever smoker", cov_cat_smoking_status == 
2025-07-28T13:39:04.010677763Z             "Missing" ~ "Missing"))
2025-07-28T13:39:04.010679282Z         df$cov_cat_smoking_status <- ordered(df$cov_cat_smoking_status, 
2025-07-28T13:39:04.010680857Z             levels = c("Never smoker", "Ever smoker", "Missing"))
2025-07-28T13:39:04.010682514Z         covariate_removed <- setdiff(covariate_removed, "cov_cat_smoking_status")
2025-07-28T13:39:04.010684119Z     }
2025-07-28T13:39:04.010685503Z     for (i in c("cov_cat_deprivation", "cov_cat_smoking_status", 
2025-07-28T13:39:04.010687088Z         "cov_cat_region")) {
2025-07-28T13:39:04.010688560Z         if (i %in% colnames(df)) {
2025-07-28T13:39:04.010691995Z             print(paste0("Rechecking covariate: ", i))
2025-07-28T13:39:04.010694036Z             print("Calculate frequency for each level among exposed with outcome")
2025-07-28T13:39:04.010695641Z             tmp <- unique(df[df$exposure_status == 1 & df$outcome_status == 
2025-07-28T13:39:04.010697264Z                 1, c("patient_id", i)])
2025-07-28T13:39:04.010698787Z             freq <- data.frame(table(tmp[, i]))
2025-07-28T13:39:04.010700295Z             print(freq)
2025-07-28T13:39:04.010701703Z             if (nrow(freq[freq$Freq <= covariate_threshold & 
2025-07-28T13:39:04.010703584Z                 freq$Var1 != "Missing", ]) > 0) {
2025-07-28T13:39:04.010705300Z                 print("Add covariate to removal list")
2025-07-28T13:39:04.010706869Z                 covariate_removed <- c(covariate_removed, i)
2025-07-28T13:39:04.010708414Z                 covariate_collapsed <- setdiff(covariate_collapsed, 
2025-07-28T13:39:04.010709967Z                   i)
2025-07-28T13:39:04.010711405Z             }
2025-07-28T13:39:04.010712780Z             if (nrow(freq) == 1) {
2025-07-28T13:39:04.010714237Z                 print("Add covariate to removal list")
2025-07-28T13:39:04.010715762Z                 covariate_removed <- c(covariate_removed, i)
2025-07-28T13:39:04.010717306Z                 covariate_collapsed <- setdiff(covariate_collapsed, 
2025-07-28T13:39:04.010718838Z                   i)
2025-07-28T13:39:04.010720267Z             }
2025-07-28T13:39:04.010721691Z         }
2025-07-28T13:39:04.010723177Z     }
2025-07-28T13:39:04.010724561Z     print("Check strata variables meet covariate threshold")
2025-07-28T13:39:04.010726116Z     strata_warning <- ""
2025-07-28T13:39:04.010727653Z     if (length(intersect(covariate_removed, strata)) > 0) {
2025-07-28T13:39:04.010729163Z         strata_warning <- paste0(intersect(covariate_removed, 
2025-07-28T13:39:04.010730637Z             strata), collapse = ";")
2025-07-28T13:39:04.010732117Z         for (i in intersect(covariate_removed, strata)) {
2025-07-28T13:39:04.010733621Z             tmp <- unique(df[df$exposure_status == 1 & df$outcome_status == 
2025-07-28T13:39:04.010735297Z                 1, c("patient_id", i)])
2025-07-28T13:39:04.010736838Z             freq <- data.frame(table(tmp[, i]))
2025-07-28T13:39:04.010738334Z             print(paste0("Warning: strata variable '", i, "' does not meet covariate threshold"))
2025-07-28T13:39:04.010739996Z             print(freq)
2025-07-28T13:39:04.010741416Z         }
2025-07-28T13:39:04.010742813Z     }
2025-07-28T13:39:04.010744189Z     print("Remove covariates")
2025-07-28T13:39:04.010747600Z     df <- df[, !(colnames(df) %in% setdiff(covariate_removed, 
2025-07-28T13:39:04.010749638Z         strata))]
2025-07-28T13:39:04.010751140Z     output <- list(df = df, covariate_removed = setdiff(covariate_removed, 
2025-07-28T13:39:04.010752710Z         strata), covariate_collapsed = covariate_collapsed, strata_warning = strata_warning)
2025-07-28T13:39:04.010754237Z     return(output)
2025-07-28T13:39:04.010755571Z }
2025-07-28T13:39:04.010756895Z 
2025-07-28T13:39:04.010758249Z [[1]]$visible
2025-07-28T13:39:04.010759604Z [1] FALSE
2025-07-28T13:39:04.010760959Z 
2025-07-28T13:39:04.010762342Z 
2025-07-28T13:39:04.010763697Z [[2]]
2025-07-28T13:39:04.010765100Z [[2]]$value
2025-07-28T13:39:04.010769167Z function (df, time_periods, covariates, strata, age_spline, covariate_removed, 
2025-07-28T13:39:04.010770921Z     covariate_collapsed, ipw) 
2025-07-28T13:39:04.010772350Z {
2025-07-28T13:39:04.010773701Z     print("Define model formula")
2025-07-28T13:39:04.010775225Z     surv_formula <- paste0("Surv(tstart, tstop, outcome_status) ~ ", 
2025-07-28T13:39:04.010776778Z         paste(time_periods, collapse = " + "), ifelse("cov_cat_sex" %in% 
2025-07-28T13:39:04.010778350Z             colnames(df), " + cov_cat_sex", ""), ifelse(is.null(strata), 
2025-07-28T13:39:04.010779883Z             "", paste(" +", paste0("rms::strat(", strata, ")"), 
2025-07-28T13:39:04.010781534Z                 collapse = " + ")), ifelse(isTRUE(ipw), " + cluster(patient_id)", 
2025-07-28T13:39:04.010783128Z             ""))
2025-07-28T13:39:04.010784554Z     if ("cov_num_age" %in% colnames(df)) {
2025-07-28T13:39:04.010785994Z         print("Add age covariate")
2025-07-28T13:39:04.010787463Z         if (age_spline == TRUE) {
2025-07-28T13:39:04.010788891Z             print("Specify knot placement for age spline")
2025-07-28T13:39:04.010790373Z             knot_placement <- as.numeric(quantile(df$cov_num_age, 
2025-07-28T13:39:04.010791888Z                 probs = c(0.1, 0.5, 0.9)))
2025-07-28T13:39:04.010793326Z             print(paste0("Knots will be placed at: ", paste0(knot_placement, 
2025-07-28T13:39:04.010794850Z                 collapse = ", ")))
2025-07-28T13:39:04.010796360Z             surv_formula <- paste0(surv_formula, " + rms::rcs(cov_num_age, parms=knot_placement)")
2025-07-28T13:39:04.010797999Z         }
2025-07-28T13:39:04.010799388Z         else {
2025-07-28T13:39:04.010800744Z             surv_formula <- paste0(surv_formula, " + cov_num_age + cov_num_age_sq")
2025-07-28T13:39:04.010802258Z         }
2025-07-28T13:39:04.010805800Z     }
2025-07-28T13:39:04.010807604Z     print(surv_formula)
2025-07-28T13:39:04.010809087Z     print("Fit Cox model")
2025-07-28T13:39:04.010810559Z     dd <<- rms::datadist(df)
2025-07-28T13:39:04.010812040Z     withr::local_options(list(datadist = "dd", contrasts = c("contr.treatment", 
2025-07-28T13:39:04.010813637Z         "contr.treatment")))
2025-07-28T13:39:04.010815080Z     if (ipw == TRUE) {
2025-07-28T13:39:04.010816455Z         N_obs_in <- nrow(df)
2025-07-28T13:39:04.010817885Z         fit_cox_model <- rms::cph(formula = as.formula(surv_formula), 
2025-07-28T13:39:04.010827024Z             data = df, weight = df$cox_weight, method = "breslow", 
2025-07-28T13:39:04.010830115Z             surv = TRUE, x = TRUE, y = TRUE)
2025-07-28T13:39:04.010831637Z         N_obs_out <- sum(fit_cox_model$n)
2025-07-28T13:39:04.010833107Z     }
2025-07-28T13:39:04.010834448Z     else {
2025-07-28T13:39:04.010835814Z         N_obs_in <- nrow(df)
2025-07-28T13:39:04.010837260Z         fit_cox_model <- rms::cph(formula = as.formula(surv_formula), 
2025-07-28T13:39:04.010838909Z             data = df, method = "breslow", surv = TRUE, x = TRUE, 
2025-07-28T13:39:04.010840499Z             y = TRUE)
2025-07-28T13:39:04.010841971Z         N_obs_out <- sum(fit_cox_model$n)
2025-07-28T13:39:04.010843460Z     }
2025-07-28T13:39:04.010844845Z     print(fit_cox_model)
2025-07-28T13:39:04.010846297Z     print("Format results")
2025-07-28T13:39:04.010847756Z     results <- data.frame(term = names(fit_cox_model$coefficients), 
2025-07-28T13:39:04.010850205Z         lnhr = fit_cox_model$coefficients, se_lnhr = sqrt(diag(vcov(fit_cox_model))), 
2025-07-28T13:39:04.010851938Z         model = "mdl_age_sex", surv_formula = surv_formula, covariate_removed = "", 
2025-07-28T13:39:04.010853593Z         covariate_collapsed = "", obs_warning = ifelse(N_obs_in == 
2025-07-28T13:39:04.010855116Z             N_obs_out, "", paste0(N_obs_in, " observations provided. ", 
2025-07-28T13:39:04.010856719Z             N_obs_out, " observations used.")), stringsAsFactors = FALSE)
2025-07-28T13:39:04.010858281Z     row.names(results) <- NULL
2025-07-28T13:39:04.010859780Z     covariates <- setdiff(covariates, covariate_removed)
2025-07-28T13:39:04.010861336Z     if (!is.null(covariates) && length(covariates) > 0) {
2025-07-28T13:39:04.010863017Z         print("Add covariates to model formula")
2025-07-28T13:39:04.010864566Z         surv_formula_adj <- paste0(surv_formula, " + ", paste(covariates, 
2025-07-28T13:39:04.010866198Z             collapse = " + "))
2025-07-28T13:39:04.010867697Z         print(surv_formula_adj)
2025-07-28T13:39:04.010872581Z         print("Fit Cox model with covariates")
2025-07-28T13:39:04.010874588Z         dd_adj <<- rms::datadist(df)
2025-07-28T13:39:04.010876168Z         withr::local_options(list(datadist = "dd_adj", contrasts = c("contr.treatment", 
2025-07-28T13:39:04.010877837Z             "contr.treatment")))
2025-07-28T13:39:04.010879331Z         if (ipw == TRUE) {
2025-07-28T13:39:04.010880775Z             N_obs_in <- nrow(df)
2025-07-28T13:39:04.010882225Z             fit_cox_model_adj <- rms::cph(formula = as.formula(surv_formula_adj), 
2025-07-28T13:39:04.010883753Z                 data = df, weight = df$cox_weight, method = "breslow", 
2025-07-28T13:39:04.010885309Z                 surv = TRUE, x = TRUE, y = TRUE)
2025-07-28T13:39:04.010886776Z             N_obs_out <- sum(fit_cox_model$n)
2025-07-28T13:39:04.010888318Z         }
2025-07-28T13:39:04.010889725Z         else {
2025-07-28T13:39:04.010891157Z             N_obs_in <- nrow(df)
2025-07-28T13:39:04.010892617Z             fit_cox_model_adj <- rms::cph(formula = as.formula(surv_formula_adj), 
2025-07-28T13:39:04.010894152Z                 data = df, method = "breslow", surv = TRUE, x = TRUE, 
2025-07-28T13:39:04.010895707Z                 y = TRUE)
2025-07-28T13:39:04.010897125Z             N_obs_out <- sum(fit_cox_model$n)
2025-07-28T13:39:04.010898590Z         }
2025-07-28T13:39:04.010900028Z         print(fit_cox_model_adj)
2025-07-28T13:39:04.010901489Z         print("Format results")
2025-07-28T13:39:04.010902981Z         results_adj <- data.frame(term = names(fit_cox_model_adj$coefficients), 
2025-07-28T13:39:04.010904558Z             lnhr = fit_cox_model_adj$coefficients, se_lnhr = sqrt(diag(vcov(fit_cox_model_adj))), 
2025-07-28T13:39:04.010906101Z             model = "mdl_max_adj", surv_formula = surv_formula_adj, 
2025-07-28T13:39:04.010907626Z             covariate_removed = paste0(covariate_removed, collapse = ";"), 
2025-07-28T13:39:04.010909191Z             covariate_collapsed = paste0(covariate_collapsed, 
2025-07-28T13:39:04.010910649Z                 collapse = ";"), obs_warning = ifelse(N_obs_in == 
2025-07-28T13:39:04.010912454Z                 N_obs_out, "", paste0(N_obs_in, " observations provided. ", 
2025-07-28T13:39:04.010914213Z                 N_obs_out, " observations used.")), stringsAsFactors = FALSE)
2025-07-28T13:39:04.010915759Z         row.names(results_adj) <- NULL
2025-07-28T13:39:04.010917242Z         print("Bind to other results")
2025-07-28T13:39:04.010918751Z         results <- rbind(results, results_adj)
2025-07-28T13:39:04.010920295Z     }
2025-07-28T13:39:04.010921691Z     print("Return results")
2025-07-28T13:39:04.010925076Z     return(results)
2025-07-28T13:39:04.010927016Z     print(summary(results))
2025-07-28T13:39:04.010928519Z }
2025-07-28T13:39:04.010929875Z 
2025-07-28T13:39:04.010931256Z [[2]]$visible
2025-07-28T13:39:04.010932646Z [1] FALSE
2025-07-28T13:39:04.010934028Z 
2025-07-28T13:39:04.010935416Z 
2025-07-28T13:39:04.010936799Z [[3]]
2025-07-28T13:39:04.010938153Z [[3]]$value
2025-07-28T13:39:04.010939586Z function (df, cut_points, episode_labels, ipw) 
2025-07-28T13:39:04.010941080Z {
2025-07-28T13:39:04.010942489Z     library(magrittr)
2025-07-28T13:39:04.010943914Z     print("Calculate number of events per episode")
2025-07-28T13:39:04.010945489Z     events <- df[df$outcome_status == 1, c("patient_id", "episode")]
2025-07-28T13:39:04.010947097Z     events <- aggregate(episode ~ patient_id, data = events, 
2025-07-28T13:39:04.010948609Z         FUN = max)
2025-07-28T13:39:04.010950052Z     events <- data.frame(table(events$episode), stringsAsFactors = FALSE)
2025-07-28T13:39:04.010951612Z     events <- dplyr::rename(events, episode = "Var1", N_events = "Freq")
2025-07-28T13:39:04.010953266Z     print(events)
2025-07-28T13:39:04.010954677Z     print("Add number of events to episode info table")
2025-07-28T13:39:04.010956216Z     episode_info <- merge(episode_labels, events, by = "episode", 
2025-07-28T13:39:04.010957754Z         all.x = TRUE)
2025-07-28T13:39:04.010959104Z     episode_info$N_events <- ifelse(is.na(episode_info$N_events), 
2025-07-28T13:39:04.010960612Z         0, episode_info$N_events)
2025-07-28T13:39:04.010962035Z     print(episode_info)
2025-07-28T13:39:04.010963411Z     print("Calculate person-time in each episode")
2025-07-28T13:39:04.010964846Z     if (ipw == TRUE) {
2025-07-28T13:39:04.010966206Z         tmp <- df[, c("episode", "tstart", "tstop", "cox_weight")]
2025-07-28T13:39:04.010967892Z         tmp$person_time_total <- (tmp$tstop - tmp$tstart) * tmp$cox_weight
2025-07-28T13:39:04.010969417Z         tmp[, c("tstart", "tstop", "cox_weight")] <- NULL
2025-07-28T13:39:04.010971051Z     }
2025-07-28T13:39:04.010972391Z     if (ipw == FALSE) {
2025-07-28T13:39:04.010973746Z         tmp <- df[, c("episode", "tstart", "tstop")]
2025-07-28T13:39:04.010975331Z         tmp$person_time_total <- (tmp$tstop - tmp$tstart)
2025-07-28T13:39:04.010976817Z         tmp[, c("tstart", "tstop")] <- NULL
2025-07-28T13:39:04.010978349Z     }
2025-07-28T13:39:04.010979660Z     tmp <- aggregate(person_time_total ~ episode, data = tmp, 
2025-07-28T13:39:04.010982905Z         FUN = sum)
2025-07-28T13:39:04.010984784Z     episode_info <- merge(episode_info, tmp, by = "episode", 
2025-07-28T13:39:04.010986427Z         all.x = TRUE)
2025-07-28T13:39:04.010987882Z     print(episode_info)
2025-07-28T13:39:04.010989298Z     print("Calculate median person-time")
2025-07-28T13:39:04.010990770Z     tmp <- df[df$outcome_status == 1, c("episode", "tstart", 
2025-07-28T13:39:04.010992359Z         "tstop")]
2025-07-28T13:39:04.010993746Z     tmp$outcome_time <- tmp$tstop - tmp$tstart
2025-07-28T13:39:04.010995201Z     tmp <- tmp %>% dplyr::group_by(episode) %>% dplyr::mutate(outcome_time_median = median(outcome_time)) %>% 
2025-07-28T13:39:04.010996866Z         dplyr::ungroup(episode)
2025-07-28T13:39:04.010998959Z     tmp <- unique(tmp[, c("episode", "outcome_time_median")])
2025-07-28T13:39:04.011000802Z     episode_info <- merge(episode_info, tmp, by = "episode", 
2025-07-28T13:39:04.011002368Z         all.x = TRUE)
2025-07-28T13:39:04.011003761Z     print(episode_info)
2025-07-28T13:39:04.011005168Z     print("Add time from previous episodes to median person-time")
2025-07-28T13:39:04.011006732Z     episode_info$add <- as.numeric(gsub("days", "", gsub("_.*", 
2025-07-28T13:39:04.011008331Z         "", episode_info$time_period)))
2025-07-28T13:39:04.011009822Z     episode_info$add <- ifelse(is.na(episode_info$add), 0, episode_info$add)
2025-07-28T13:39:04.011011341Z     episode_info$outcome_time_median <- episode_info$outcome_time_median + 
2025-07-28T13:39:04.011012917Z         episode_info$add
2025-07-28T13:39:04.011014343Z     episode_info$add <- NULL
2025-07-28T13:39:04.011015778Z     print(episode_info)
2025-07-28T13:39:04.011017133Z     return(episode_info)
2025-07-28T13:39:04.011018495Z }
2025-07-28T13:39:04.011019828Z 
2025-07-28T13:39:04.011022188Z [[3]]$visible
2025-07-28T13:39:04.011023556Z [1] FALSE
2025-07-28T13:39:04.011024953Z 
2025-07-28T13:39:04.011026286Z 
2025-07-28T13:39:04.011027619Z [[4]]
2025-07-28T13:39:04.011028992Z [[4]]$value
2025-07-28T13:39:04.011166126Z function (df, controls_per_case, seed = 137, sample_exposed) 
2025-07-28T13:39:04.011176632Z {
2025-07-28T13:39:04.011179294Z     print("Set seed")
2025-07-28T13:39:04.011181161Z     set.seed(seed)
2025-07-28T13:39:04.011182733Z     print("Split cases and controls")
2025-07-28T13:39:04.011184252Z     cases <- df[df$outcome_status == TRUE, ]
2025-07-28T13:39:04.011185788Z     controls <- df[df$outcome_status == FALSE, ]
2025-07-28T13:39:04.011187324Z     print(paste0("Cases: ", nrow(cases)))
2025-07-28T13:39:04.011194676Z     print(summary(cases))
2025-07-28T13:39:04.011197099Z     print(paste0("Controls: ", nrow(controls)))
2025-07-28T13:39:04.011198844Z     print(summary(controls))
2025-07-28T13:39:04.011200358Z     if (sample_exposed == TRUE) {
2025-07-28T13:39:04.011201812Z         if (nrow(cases) * controls_per_case < nrow(controls)) {
2025-07-28T13:39:04.011203383Z             print("Sample controls, including exposed control individuals")
2025-07-28T13:39:04.011204931Z             controls <- controls[sample(seq_len(nrow(controls)), 
2025-07-28T13:39:04.011206459Z                 nrow(cases) * controls_per_case, replace = FALSE), 
2025-07-28T13:39:04.011208017Z                 ]
2025-07-28T13:39:04.011209429Z             controls$cox_weight <- (nrow(df) - nrow(cases))/nrow(controls)
2025-07-28T13:39:04.011211001Z             print(paste0(nrow(controls), " controls sampled with Cox weight of ", 
2025-07-28T13:39:04.011212674Z                 controls$cox_weight[1]))
2025-07-28T13:39:04.011214185Z         }
2025-07-28T13:39:04.011215604Z         else {
2025-07-28T13:39:04.011217036Z             print("Retain all controls")
2025-07-28T13:39:04.011218548Z             controls$cox_weight <- 1
2025-07-28T13:39:04.011220066Z         }
2025-07-28T13:39:04.011221479Z     }
2025-07-28T13:39:04.011222899Z     if (sample_exposed == FALSE) {
2025-07-28T13:39:04.011224378Z         print("Separate exposed controls so they are not sampled")
2025-07-28T13:39:04.011225962Z         controls_exposed <- controls[!is.na(controls$exposure), 
2025-07-28T13:39:04.011227485Z             ]
2025-07-28T13:39:04.011228888Z         controls_exposed$cox_weight <- 1
2025-07-28T13:39:04.011230456Z         print(paste0(nrow(controls_exposed), " exposed controls"))
2025-07-28T13:39:04.011232020Z         print("Exposed controls:")
2025-07-28T13:39:04.011233649Z         print(summary(controls_exposed))
2025-07-28T13:39:04.011235132Z         print("Sample unexposed controls")
2025-07-28T13:39:04.011236761Z         controls_unexposed <- controls[is.na(controls$exposure), 
2025-07-28T13:39:04.011238342Z             ]
2025-07-28T13:39:04.011239790Z         if (nrow(cases) * controls_per_case < nrow(controls_unexposed)) {
2025-07-28T13:39:04.011241390Z             controls_unexposed <- controls_unexposed[sample(seq_len(nrow(controls_unexposed)), 
2025-07-28T13:39:04.011243045Z                 nrow(cases) * controls_per_case, replace = FALSE), 
2025-07-28T13:39:04.011244612Z                 ]
2025-07-28T13:39:04.011246088Z             controls_unexposed$cox_weight <- (nrow(df) - nrow(cases) - 
2025-07-28T13:39:04.011249991Z                 nrow(controls_exposed))/nrow(controls_unexposed)
2025-07-28T13:39:04.011252018Z             print(paste0(nrow(controls_unexposed), " unexposed controls sampled with Cox weight of ", 
2025-07-28T13:39:04.011254133Z                 controls_unexposed$cox_weight[1]))
2025-07-28T13:39:04.011255812Z             print("Unexposed controls:")
2025-07-28T13:39:04.011257334Z             print(summary(controls_unexposed))
2025-07-28T13:39:04.011258794Z             print("Add exposed control individuals back to control dataset")
2025-07-28T13:39:04.011260346Z             controls <- NULL
2025-07-28T13:39:04.011261787Z             controls <- rbind(controls_unexposed, controls_exposed)
2025-07-28T13:39:04.011263311Z             print(paste0("Controls (N=", nrow(controls), "):"))
2025-07-28T13:39:04.011264894Z             print(summary(controls))
2025-07-28T13:39:04.011266341Z         }
2025-07-28T13:39:04.011267705Z         else {
2025-07-28T13:39:04.011269099Z             print("Insufficient controls so retain all controls")
2025-07-28T13:39:04.011270600Z             rm(controls_exposed, controls_unexposed)
2025-07-28T13:39:04.011272266Z             controls$cox_weight <- 1
2025-07-28T13:39:04.011273780Z         }
2025-07-28T13:39:04.011275202Z     }
2025-07-28T13:39:04.011276627Z     print("Specify cox weight for cases")
2025-07-28T13:39:04.011278132Z     cases$cox_weight <- 1
2025-07-28T13:39:04.011279588Z     print("Recombine cases and controls")
2025-07-28T13:39:04.011281053Z     return_df <- rbind(cases, controls)
2025-07-28T13:39:04.011282556Z     return(return_df)
2025-07-28T13:39:04.011283985Z }
2025-07-28T13:39:04.011285378Z 
2025-07-28T13:39:04.011286723Z [[4]]$visible
2025-07-28T13:39:04.011288116Z [1] FALSE
2025-07-28T13:39:04.011289499Z 
2025-07-28T13:39:04.011290886Z 
2025-07-28T13:39:04.011292256Z [[5]]
2025-07-28T13:39:04.011293660Z [[5]]$value
2025-07-28T13:39:04.011466517Z function (df, cut_points, episode_labels) 
2025-07-28T13:39:04.011484519Z {
2025-07-28T13:39:04.011486790Z     print("Calculate where follow-up occurs in study period")
2025-07-28T13:39:04.011488638Z     df$days_to_start <- as.numeric(df$fup_start - df$study_start)
2025-07-28T13:39:04.011490460Z     df$days_to_end <- as.numeric(df$fup_stop - df$study_start) + 
2025-07-28T13:39:04.011492208Z         1
2025-07-28T13:39:04.011493659Z     print("Set survival data for the exposed")
2025-07-28T13:39:04.011495149Z     print("Filter data to exposed")
2025-07-28T13:39:04.011496606Z     exposed <- df[!is.na(df$exposure), ]
2025-07-28T13:39:04.011508577Z     print("Calculate days to exposure")
2025-07-28T13:39:04.011511300Z     exposed$days_to_exp <- as.numeric(exposed$exposure - exposed$study_start)
2025-07-28T13:39:04.011513027Z     print("Put into survival format (dataset d1)")
2025-07-28T13:39:04.011514542Z     d1 <- exposed[, !(colnames(exposed) %in% c("days_to_start", 
2025-07-28T13:39:04.011516169Z         "days_to_exp", "days_to_end", "outcome_status"))]
2025-07-28T13:39:04.011517829Z     print(summary(d1))
2025-07-28T13:39:04.011519201Z     print("Put into survival format (dataset d2)")
2025-07-28T13:39:04.011520610Z     d2 <- exposed[, c("patient_id", "days_to_start", "days_to_exp", 
2025-07-28T13:39:04.011522229Z         "days_to_end", "outcome_status")]
2025-07-28T13:39:04.011523748Z     print(summary(d2))
2025-07-28T13:39:04.011525114Z     print("Put into survival format (tmerge)")
2025-07-28T13:39:04.011526548Z     exposed <- survival::tmerge(data1 = d1, data2 = d2, id = patient_id, 
2025-07-28T13:39:04.011528044Z         outcome_status = event(days_to_end, outcome_status), 
2025-07-28T13:39:04.011529541Z         tstart = days_to_start, tstop = days_to_end, exposure_status = tdc(days_to_exp))
2025-07-28T13:39:04.011531094Z     print(summary(exposed))
2025-07-28T13:39:04.011532515Z     print("Split post-exposure time for the exposed")
2025-07-28T13:39:04.011534046Z     print("Filter to post-exposure data")
2025-07-28T13:39:04.011535526Z     exposed_post <- exposed[exposed$exposure_status == 1, ]
2025-07-28T13:39:04.011537024Z     print("Format tstart and tstop")
2025-07-28T13:39:04.011538448Z     exposed_post <- dplyr::rename(exposed_post, t0 = tstart, 
2025-07-28T13:39:04.011539938Z         t = tstop)
2025-07-28T13:39:04.011541310Z     exposed_post$tstart <- 0
2025-07-28T13:39:04.011542749Z     exposed_post$tstop <- exposed_post$t - exposed_post$t0
2025-07-28T13:39:04.011544209Z     print("Implement post-exposure cut points")
2025-07-28T13:39:04.011545690Z     print(summary(exposed_post))
2025-07-28T13:39:04.011547078Z     exposed_post <- survival::survSplit(Surv(tstop, outcome_status) ~ 
2025-07-28T13:39:04.011548560Z         ., exposed_post, cut = cut_points, episode = "episode")
2025-07-28T13:39:04.011550075Z     print(summary(exposed_post))
2025-07-28T13:39:04.011551427Z     print("Account for pre-exposure time")
2025-07-28T13:39:04.011552899Z     exposed_post$tstart <- exposed_post$tstart + exposed_post$t0
2025-07-28T13:39:04.011554394Z     exposed_post$tstop <- exposed_post$tstop + exposed_post$t0
2025-07-28T13:39:04.011555920Z     exposed_post[, c("t0", "t")] <- NULL
2025-07-28T13:39:04.011557561Z     print(summary(exposed_post))
2025-07-28T13:39:04.011562302Z     print("Combine pre- and post-exposure time for the exposed")
2025-07-28T13:39:04.011564548Z     print("Filter to pre-exposure data")
2025-07-28T13:39:04.011566120Z     exposed_pre <- exposed[exposed$exposure_status == 0, ]
2025-07-28T13:39:04.011567628Z     if (nrow(exposed_pre) > 0) {
2025-07-28T13:39:04.011569115Z         print("Set pre-exposure to be episode 0")
2025-07-28T13:39:04.011570641Z         exposed_pre$episode <- 0
2025-07-28T13:39:04.011572733Z         print(summary(exposed_pre))
2025-07-28T13:39:04.011574152Z         print("Bind pre- and post-exposure time")
2025-07-28T13:39:04.011575653Z         exposed <- plyr::rbind.fill(exposed_pre, exposed_post)
2025-07-28T13:39:04.011577183Z     }
2025-07-28T13:39:04.011578582Z     else {
2025-07-28T13:39:04.011580038Z         print("No pre-exposure time so exposed = post-exposure time only")
2025-07-28T13:39:04.011581611Z         exposed <- exposed_post
2025-07-28T13:39:04.011583046Z     }
2025-07-28T13:39:04.011584399Z     print(summary(exposed))
2025-07-28T13:39:04.011585800Z     print("Set survival data for the unexposed")
2025-07-28T13:39:04.011587294Z     print("Filter data to unexposed")
2025-07-28T13:39:04.011588725Z     unexposed <- df[is.na(df$exposure), ]
2025-07-28T13:39:04.011590186Z     print("Rename variables to survival variable names")
2025-07-28T13:39:04.011591682Z     unexposed <- dplyr::rename(unexposed, tstart = "days_to_start", 
2025-07-28T13:39:04.011593218Z         tstop = "days_to_end")
2025-07-28T13:39:04.011594650Z     unexposed$exposure_status <- c(0)
2025-07-28T13:39:04.011596082Z     unexposed$episode <- c(0)
2025-07-28T13:39:04.011597499Z     unexposed$outcome_status <- as.numeric(unexposed$outcome_status)
2025-07-28T13:39:04.011599007Z     print(summary(unexposed))
2025-07-28T13:39:04.011600481Z     print("Combine exposed and unexposed individuals")
2025-07-28T13:39:04.011602006Z     exposed <- exposed[, intersect(colnames(unexposed), colnames(exposed))]
2025-07-28T13:39:04.011603528Z     unexposed <- unexposed[, intersect(colnames(unexposed), colnames(exposed))]
2025-07-28T13:39:04.011605020Z     df <- rbind(exposed, unexposed)
2025-07-28T13:39:04.011606475Z     print(summary(df))
2025-07-28T13:39:04.011607852Z     print("Add indicators for episode")
2025-07-28T13:39:04.011609245Z     for (i in 1:max(episode_labels$episode)) {
2025-07-28T13:39:04.011610644Z         preserve_cols <- colnames(df)
2025-07-28T13:39:04.011612048Z         df$tmp <- as.numeric(df$episode == i)
2025-07-28T13:39:04.011613468Z         colnames(df) <- c(preserve_cols, episode_labels[episode_labels$episode == 
2025-07-28T13:39:04.011616907Z             i, ]$time_period)
2025-07-28T13:39:04.011618765Z     }
2025-07-28T13:39:04.011620114Z     print(summary(df))
2025-07-28T13:39:04.011621494Z     return(df)
2025-07-28T13:39:04.011622858Z }
2025-07-28T13:39:04.011624213Z 
2025-07-28T13:39:04.011625614Z [[5]]$visible
2025-07-28T13:39:04.011626982Z [1] FALSE
2025-07-28T13:39:04.011628363Z 
2025-07-28T13:39:04.011629717Z 
2025-07-28T13:39:04.011631057Z [1] "Separate list arguments"
2025-07-28T13:39:04.136563631Z [1] "Make numeric arguments numeric"
2025-07-28T13:39:04.136592167Z [1] "Load data"
2025-07-28T13:39:04.212264692Z   patient_id          index_date         end_date_exposure   
2025-07-28T13:39:04.212290725Z  Length:4054        Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.212293500Z  Class :character   1st Qu.:2020-01-01   1st Qu.:2020-12-08  
2025-07-28T13:39:04.212295139Z  Mode  :character   Median :2020-01-01   Median :2021-02-15  
2025-07-28T13:39:04.212296663Z                     Mean   :2020-01-01   Mean   :2021-02-08  
2025-07-28T13:39:04.212298197Z                     3rd Qu.:2020-01-01   3rd Qu.:2021-02-15  
2025-07-28T13:39:04.212299721Z                     Max.   :2020-01-01   Max.   :2021-06-18  
2025-07-28T13:39:04.212301220Z                                                              
2025-07-28T13:39:04.212302709Z  end_date_outcome        exp_date             out_date         
2025-07-28T13:39:04.212304191Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-02  
2025-07-28T13:39:04.212305632Z  1st Qu.:2022-01-13   1st Qu.:2020-04-21   1st Qu.:2021-02-18  
2025-07-28T13:39:04.212307117Z  Median :2024-02-04   Median :2020-07-18   Median :2022-03-08  
2025-07-28T13:39:04.212308566Z  Mean   :2023-03-05   Mean   :2020-07-29   Mean   :2022-03-06  
2025-07-28T13:39:04.212310047Z  3rd Qu.:2024-04-30   3rd Qu.:2020-11-01   3rd Qu.:2023-03-27  
2025-07-28T13:39:04.212311544Z  Max.   :2024-04-30   Max.   :2021-06-18   Max.   :2024-04-28  
2025-07-28T13:39:04.212313079Z                       NA's   :3575         NA's   :2123        
2025-07-28T13:39:04.212314627Z                  strat_cat_region  cov_num_age     cov_cat_sex  
2025-07-28T13:39:04.212316198Z  Yorkshire and The Humber: 475    Min.   : 18.00   Female:2054  
2025-07-28T13:39:04.212317725Z  North East              : 460    1st Qu.: 41.00   Male  :2000  
2025-07-28T13:39:04.212319240Z  West Midlands           : 460    Median : 62.00                
2025-07-28T13:39:04.212320748Z  East Midlands           : 451    Mean   : 63.48                
2025-07-28T13:39:04.212322223Z  East                    : 444    3rd Qu.: 86.00                
2025-07-28T13:39:04.212333794Z  North West              : 443    Max.   :110.00                
2025-07-28T13:39:04.212336254Z  (Other)                 :1321                                  
2025-07-28T13:39:04.212337782Z  cov_cat_ethnicity             cov_cat_imd  cov_num_consrate2019
2025-07-28T13:39:04.212339337Z  White  : 335      1 (most deprived) :809   Min.   :0.0000      
2025-07-28T13:39:04.212340846Z  Missing:2794      2                 :830   1st Qu.:0.0000      
2025-07-28T13:39:04.212342301Z  Mixed  : 118      3                 :756   Median :0.0000      
2025-07-28T13:39:04.212343778Z  Asian  : 231      4                 :813   Mean   :0.0407      
2025-07-28T13:39:04.212345231Z  Black  : 230      5 (least deprived):846   3rd Qu.:0.0000      
2025-07-28T13:39:04.212346729Z  Other  : 346                               Max.   :2.0000      
2025-07-28T13:39:04.212348225Z                                                                 
2025-07-28T13:39:04.212350717Z  cov_bin_hcworker       cov_cat_smoking cov_bin_carehome cov_bin_obesity
2025-07-28T13:39:04.212352556Z  FALSE:1912       Never smoker  :  66   FALSE:3417       FALSE:3967     
2025-07-28T13:39:04.212354122Z  TRUE :2142       Ever smoker   : 909   TRUE : 637       TRUE :  87     
2025-07-28T13:39:04.212355603Z                   Current smoker:1312                                   
2025-07-28T13:39:04.212357453Z                   Missing       :1767                                   
2025-07-28T13:39:04.212358927Z                                                                         
2025-07-28T13:39:04.212360455Z                                                                         
2025-07-28T13:39:04.212361931Z                                                                         
2025-07-28T13:39:04.212363418Z  cov_bin_ami  cov_bin_dementia cov_bin_liver_disease cov_bin_ckd 
2025-07-28T13:39:04.212364936Z  FALSE:2948   FALSE:3567       FALSE:3206            FALSE:3029  
2025-07-28T13:39:04.212366409Z  TRUE :1106   TRUE : 487       TRUE : 848            TRUE :1025  
2025-07-28T13:39:04.212367887Z                                                                  
2025-07-28T13:39:04.212369366Z                                                                  
2025-07-28T13:39:04.212370813Z                                                                  
2025-07-28T13:39:04.212372288Z                                                                  
2025-07-28T13:39:04.212373749Z                                                                  
2025-07-28T13:39:04.212375250Z  cov_bin_cancer cov_bin_hypertension cov_bin_diabetes cov_bin_depression
2025-07-28T13:39:04.212376735Z  FALSE: 979     FALSE:1095           FALSE:1809       FALSE:3121        
2025-07-28T13:39:04.212378230Z  TRUE :3075     TRUE :2959           TRUE :2245       TRUE : 933        
2025-07-28T13:39:04.212379748Z                                                                         
2025-07-28T13:39:04.212383698Z                                                                         
2025-07-28T13:39:04.212385701Z                                                                         
2025-07-28T13:39:04.212387242Z                                                                         
2025-07-28T13:39:04.212388757Z                                                                         
2025-07-28T13:39:04.212390228Z  cov_bin_copd cov_bin_stroke_all cov_bin_other_ae cov_bin_vte  cov_bin_hf  
2025-07-28T13:39:04.212391761Z  FALSE:1741   FALSE:2601         FALSE:3667       FALSE:2752   FALSE:3601  
2025-07-28T13:39:04.212393280Z  TRUE :2313   TRUE :1453         TRUE : 387       TRUE :1302   TRUE : 453  
2025-07-28T13:39:04.212394762Z                                                                            
2025-07-28T13:39:04.212396649Z                                                                            
2025-07-28T13:39:04.212398305Z                                                                            
2025-07-28T13:39:04.212399833Z                                                                            
2025-07-28T13:39:04.212401296Z                                                                            
2025-07-28T13:39:04.212406482Z  cov_bin_angina cov_bin_lipidmed cov_bin_antiplatelet cov_bin_anticoagulant
2025-07-28T13:39:04.212408165Z  FALSE:3720     FALSE:3280       FALSE:3747           FALSE:3852           
2025-07-28T13:39:04.212409666Z  TRUE : 334     TRUE : 774       TRUE : 307           TRUE : 202           
2025-07-28T13:39:04.212411166Z                                                                            
2025-07-28T13:39:04.212412634Z                                                                            
2025-07-28T13:39:04.212414076Z                                                                            
2025-07-28T13:39:04.212415573Z                                                                            
2025-07-28T13:39:04.212417084Z                                                                            
2025-07-28T13:39:04.212418618Z  cov_bin_cocp cov_bin_hrt 
2025-07-28T13:39:04.212420093Z  FALSE:3922   FALSE:3799  
2025-07-28T13:39:04.212421507Z  TRUE : 132   TRUE : 255  
2025-07-28T13:39:04.212423003Z                           
2025-07-28T13:39:04.212424407Z                           
2025-07-28T13:39:04.212425803Z                           
2025-07-28T13:39:04.212427232Z                           
2025-07-28T13:39:04.212428657Z                           
2025-07-28T13:39:04.212430085Z [1] "Make binary variables logical"
2025-07-28T13:39:04.213402992Z [1] "Make date variables dates"
2025-07-28T13:39:04.214205908Z [1] "Make categorical variables factors"
2025-07-28T13:39:04.214446788Z [1] " Make numerical variables numerical"
2025-07-28T13:39:04.214470726Z [1] "Restrict to core variables"
2025-07-28T13:39:04.214481386Z [1] "Core variables: patient_id, exp_date, out_date, index_date, end_date_outcome"
2025-07-28T13:39:04.214485484Z [1] "Give generic names to variables"
2025-07-28T13:39:04.251205138Z   patient_id           exposure             outcome          
2025-07-28T13:39:04.251233695Z  Length:4054        Min.   :2020-01-01   Min.   :2020-01-02  
2025-07-28T13:39:04.251236852Z  Class :character   1st Qu.:2020-04-21   1st Qu.:2021-02-18  
2025-07-28T13:39:04.251238521Z  Mode  :character   Median :2020-07-18   Median :2022-03-08  
2025-07-28T13:39:04.251240137Z                     Mean   :2020-07-29   Mean   :2022-03-06  
2025-07-28T13:39:04.251241644Z                     3rd Qu.:2020-11-01   3rd Qu.:2023-03-27  
2025-07-28T13:39:04.251243068Z                     Max.   :2021-06-18   Max.   :2024-04-28  
2025-07-28T13:39:04.251244532Z                     NA's   :3575         NA's   :2123        
2025-07-28T13:39:04.251245983Z    index_date         end_date_outcome    
2025-07-28T13:39:04.251247403Z  Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.251248892Z  1st Qu.:2020-01-01   1st Qu.:2022-01-13  
2025-07-28T13:39:04.251250339Z  Median :2020-01-01   Median :2024-02-04  
2025-07-28T13:39:04.251251777Z  Mean   :2020-01-01   Mean   :2023-03-05  
2025-07-28T13:39:04.251253213Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30  
2025-07-28T13:39:04.251254634Z  Max.   :2020-01-01   Max.   :2024-04-30  
2025-07-28T13:39:04.251256149Z                                           
2025-07-28T13:39:04.251257579Z [1] "Specify study dates"
2025-07-28T13:39:04.254007173Z   patient_id           exposure             outcome          
2025-07-28T13:39:04.254021990Z  Length:4054        Min.   :2020-01-01   Min.   :2020-01-02  
2025-07-28T13:39:04.254024972Z  Class :character   1st Qu.:2020-04-21   1st Qu.:2021-02-18  
2025-07-28T13:39:04.254027342Z  Mode  :character   Median :2020-07-18   Median :2022-03-08  
2025-07-28T13:39:04.254028915Z                     Mean   :2020-07-29   Mean   :2022-03-06  
2025-07-28T13:39:04.254030433Z                     3rd Qu.:2020-11-01   3rd Qu.:2023-03-27  
2025-07-28T13:39:04.254031924Z                     Max.   :2021-06-18   Max.   :2024-04-28  
2025-07-28T13:39:04.254033378Z                     NA's   :3575         NA's   :2123        
2025-07-28T13:39:04.254034955Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:04.254036483Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.254037983Z  1st Qu.:2020-01-01   1st Qu.:2022-01-13   1st Qu.:2020-01-01  
2025-07-28T13:39:04.254039447Z  Median :2020-01-01   Median :2024-02-04   Median :2020-01-01  
2025-07-28T13:39:04.254048992Z  Mean   :2020-01-01   Mean   :2023-03-05   Mean   :2020-01-01  
2025-07-28T13:39:04.254051435Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:04.254052976Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:04.254054446Z                                                                
2025-07-28T13:39:04.254056013Z    study_stop        
2025-07-28T13:39:04.254057476Z  Min.   :2024-04-30  
2025-07-28T13:39:04.254058874Z  1st Qu.:2024-04-30  
2025-07-28T13:39:04.254060280Z  Median :2024-04-30  
2025-07-28T13:39:04.254061719Z  Mean   :2024-04-30  
2025-07-28T13:39:04.254063113Z  3rd Qu.:2024-04-30  
2025-07-28T13:39:04.254064464Z  Max.   :2024-04-30  
2025-07-28T13:39:04.254065838Z                      
2025-07-28T13:39:04.254067242Z [1] "Specify follow-up dates"
2025-07-28T13:39:04.256731517Z   patient_id           exposure             outcome          
2025-07-28T13:39:04.256755607Z  Length:4054        Min.   :2020-01-01   Min.   :2020-01-02  
2025-07-28T13:39:04.256758321Z  Class :character   1st Qu.:2020-04-21   1st Qu.:2021-02-18  
2025-07-28T13:39:04.256759964Z  Mode  :character   Median :2020-07-18   Median :2022-03-08  
2025-07-28T13:39:04.256761531Z                     Mean   :2020-07-29   Mean   :2022-03-06  
2025-07-28T13:39:04.256763082Z                     3rd Qu.:2020-11-01   3rd Qu.:2023-03-27  
2025-07-28T13:39:04.256764823Z                     Max.   :2021-06-18   Max.   :2024-04-28  
2025-07-28T13:39:04.256766358Z                     NA's   :3575         NA's   :2123        
2025-07-28T13:39:04.256767862Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:04.256773167Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.256775216Z  1st Qu.:2020-01-01   1st Qu.:2022-01-13   1st Qu.:2020-01-01  
2025-07-28T13:39:04.256776689Z  Median :2020-01-01   Median :2024-02-04   Median :2020-01-01  
2025-07-28T13:39:04.256778184Z  Mean   :2020-01-01   Mean   :2023-03-05   Mean   :2020-01-01  
2025-07-28T13:39:04.256779656Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:04.256781161Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:04.256782707Z                                                                
2025-07-28T13:39:04.256784171Z    study_stop           fup_start             fup_stop         
2025-07-28T13:39:04.256785638Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.256787126Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-01-13  
2025-07-28T13:39:04.256788608Z  Median :2024-04-30   Median :2020-01-01   Median :2024-02-04  
2025-07-28T13:39:04.256790078Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-03-05  
2025-07-28T13:39:04.256800019Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30  
2025-07-28T13:39:04.256802594Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30  
2025-07-28T13:39:04.256804185Z                                                                
2025-07-28T13:39:04.256805717Z [1] "Remove exposures and outcomes outside follow-up"
2025-07-28T13:39:04.256860157Z [1] "Exposure data range: 2020-01-01 to 2021-06-18"
2025-07-28T13:39:04.257037737Z [1] "Outcome data range: 2020-01-02 to 2024-04-28"
2025-07-28T13:39:04.261342077Z [1] "Exposure data range: 2020-01-01 to 2021-06-12"
2025-07-28T13:39:04.261366844Z [1] "Outcome data range: 2020-01-02 to 2024-04-28"
2025-07-28T13:39:04.261369640Z [1] "Make indicator variable for outcome status"
2025-07-28T13:39:04.262030680Z 
2025-07-28T13:39:04.262049001Z FALSE  TRUE 
2025-07-28T13:39:04.262051678Z  2123  1931 
2025-07-28T13:39:04.262053437Z [1] "N_total = 4054"
2025-07-28T13:39:04.262161761Z [1] "N_exposed = 448"
2025-07-28T13:39:04.262302521Z [1] "Sample control population"
2025-07-28T13:39:04.283651657Z [1] "Set seed"
2025-07-28T13:39:04.283683637Z [1] "Split cases and controls"
2025-07-28T13:39:04.283757592Z [1] "Cases: 1931"
2025-07-28T13:39:04.285449810Z   patient_id           exposure             outcome          
2025-07-28T13:39:04.285480249Z  Length:1931        Min.   :2020-01-05   Min.   :2020-01-02  
2025-07-28T13:39:04.285482961Z  Class :character   1st Qu.:2020-04-15   1st Qu.:2021-02-18  
2025-07-28T13:39:04.285484612Z  Mode  :character   Median :2020-06-22   Median :2022-03-08  
2025-07-28T13:39:04.285486137Z                     Mean   :2020-07-12   Mean   :2022-03-06  
2025-07-28T13:39:04.285487603Z                     3rd Qu.:2020-09-27   3rd Qu.:2023-03-27  
2025-07-28T13:39:04.285489128Z                     Max.   :2021-06-11   Max.   :2024-04-28  
2025-07-28T13:39:04.285490602Z                     NA's   :1742                             
2025-07-28T13:39:04.285492055Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:04.285493548Z  Min.   :2020-01-01   Min.   :2020-01-02   Min.   :2020-01-01  
2025-07-28T13:39:04.285495025Z  1st Qu.:2020-01-01   1st Qu.:2021-02-18   1st Qu.:2020-01-01  
2025-07-28T13:39:04.285500505Z  Median :2020-01-01   Median :2022-03-08   Median :2020-01-01  
2025-07-28T13:39:04.285502125Z  Mean   :2020-01-01   Mean   :2022-03-06   Mean   :2020-01-01  
2025-07-28T13:39:04.285503596Z  3rd Qu.:2020-01-01   3rd Qu.:2023-03-27   3rd Qu.:2020-01-01  
2025-07-28T13:39:04.285505116Z  Max.   :2020-01-01   Max.   :2024-04-28   Max.   :2020-01-01  
2025-07-28T13:39:04.285506781Z                                                                
2025-07-28T13:39:04.285519935Z    study_stop           fup_start             fup_stop          outcome_status
2025-07-28T13:39:04.285522642Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-02   Mode:logical  
2025-07-28T13:39:04.285524253Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2021-02-18   TRUE:1931     
2025-07-28T13:39:04.285525738Z  Median :2024-04-30   Median :2020-01-01   Median :2022-03-08                 
2025-07-28T13:39:04.285527280Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2022-03-06                 
2025-07-28T13:39:04.285528782Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2023-03-27                 
2025-07-28T13:39:04.285530364Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-28                 
2025-07-28T13:39:04.285531833Z                                                                               
2025-07-28T13:39:04.285533363Z [1] "Controls: 2123"
2025-07-28T13:39:04.287128899Z   patient_id           exposure             outcome       index_date        
2025-07-28T13:39:04.287170443Z  Length:2123        Min.   :2020-01-01   Min.   :NA     Min.   :2020-01-01  
2025-07-28T13:39:04.287171889Z  Class :character   1st Qu.:2020-04-18   1st Qu.:NA     1st Qu.:2020-01-01  
2025-07-28T13:39:04.287173258Z  Mode  :character   Median :2020-07-20   Median :NA     Median :2020-01-01  
2025-07-28T13:39:04.287174523Z                     Mean   :2020-07-27   Mean   :NaN    Mean   :2020-01-01  
2025-07-28T13:39:04.287175491Z                     3rd Qu.:2020-10-30   3rd Qu.:NA     3rd Qu.:2020-01-01  
2025-07-28T13:39:04.287176423Z                     Max.   :2021-06-12   Max.   :NA     Max.   :2020-01-01  
2025-07-28T13:39:04.287177376Z                     NA's   :1864         NA's   :2123                       
2025-07-28T13:39:04.287178354Z  end_date_outcome      study_start           study_stop        
2025-07-28T13:39:04.287179286Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2024-04-30  
2025-07-28T13:39:04.287180218Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2024-04-30  
2025-07-28T13:39:04.287181141Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30  
2025-07-28T13:39:04.287182066Z  Mean   :2024-01-30   Mean   :2020-01-01   Mean   :2024-04-30  
2025-07-28T13:39:04.287182995Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30  
2025-07-28T13:39:04.287183937Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30  
2025-07-28T13:39:04.287184849Z                                                                
2025-07-28T13:39:04.287188774Z    fup_start             fup_stop          outcome_status 
2025-07-28T13:39:04.287189795Z  Min.   :2020-01-01   Min.   :2020-01-01   Mode :logical  
2025-07-28T13:39:04.287190772Z  1st Qu.:2020-01-01   1st Qu.:2024-04-30   FALSE:2123     
2025-07-28T13:39:04.287191768Z  Median :2020-01-01   Median :2024-04-30                  
2025-07-28T13:39:04.287215066Z  Mean   :2020-01-01   Mean   :2024-01-30                  
2025-07-28T13:39:04.287216112Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30                  
2025-07-28T13:39:04.287217066Z  Max.   :2020-01-01   Max.   :2024-04-30                  
2025-07-28T13:39:04.287218043Z                                                           
2025-07-28T13:39:04.287219024Z [1] "Separate exposed controls so they are not sampled"
2025-07-28T13:39:04.287220153Z [1] "259 exposed controls"
2025-07-28T13:39:04.287221197Z [1] "Exposed controls:"
2025-07-28T13:39:04.288421225Z   patient_id           exposure             outcome      index_date        
2025-07-28T13:39:04.288434483Z  Length:259         Min.   :2020-01-01   Min.   :NA    Min.   :2020-01-01  
2025-07-28T13:39:04.288437250Z  Class :character   1st Qu.:2020-04-18   1st Qu.:NA    1st Qu.:2020-01-01  
2025-07-28T13:39:04.288439039Z  Mode  :character   Median :2020-07-20   Median :NA    Median :2020-01-01  
2025-07-28T13:39:04.288440606Z                     Mean   :2020-07-27   Mean   :NaN   Mean   :2020-01-01  
2025-07-28T13:39:04.288442126Z                     3rd Qu.:2020-10-30   3rd Qu.:NA    3rd Qu.:2020-01-01  
2025-07-28T13:39:04.288443599Z                     Max.   :2021-06-12   Max.   :NA    Max.   :2020-01-01  
2025-07-28T13:39:04.288445108Z                                          NA's   :259                       
2025-07-28T13:39:04.288446665Z  end_date_outcome      study_start           study_stop        
2025-07-28T13:39:04.288448350Z  Min.   :2020-04-08   Min.   :2020-01-01   Min.   :2024-04-30  
2025-07-28T13:39:04.288449761Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2024-04-30  
2025-07-28T13:39:04.288451564Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30  
2025-07-28T13:39:04.288453017Z  Mean   :2024-02-28   Mean   :2020-01-01   Mean   :2024-04-30  
2025-07-28T13:39:04.288454455Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30  
2025-07-28T13:39:04.288455913Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30  
2025-07-28T13:39:04.288457358Z                                                                
2025-07-28T13:39:04.288458857Z    fup_start             fup_stop          outcome_status    cox_weight
2025-07-28T13:39:04.288460406Z  Min.   :2020-01-01   Min.   :2020-04-08   Mode :logical   Min.   :1   
2025-07-28T13:39:04.288461891Z  1st Qu.:2020-01-01   1st Qu.:2024-04-30   FALSE:259       1st Qu.:1   
2025-07-28T13:39:04.288463382Z  Median :2020-01-01   Median :2024-04-30                   Median :1   
2025-07-28T13:39:04.288464896Z  Mean   :2020-01-01   Mean   :2024-02-28                   Mean   :1   
2025-07-28T13:39:04.288466345Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30                   3rd Qu.:1   
2025-07-28T13:39:04.288467823Z  Max.   :2020-01-01   Max.   :2024-04-30                   Max.   :1   
2025-07-28T13:39:04.288469285Z                                                                        
2025-07-28T13:39:04.288477475Z [1] "Sample unexposed controls"
2025-07-28T13:39:04.288485779Z [1] "Insufficient controls so retain all controls"
2025-07-28T13:39:04.288649628Z [1] "Specify cox weight for cases"
2025-07-28T13:39:04.288657365Z [1] "Recombine cases and controls"
2025-07-28T13:39:04.289748777Z [1] "After sampling, N_total = 4054"
2025-07-28T13:39:04.291987757Z   patient_id           exposure             outcome          
2025-07-28T13:39:04.291996099Z  Length:4054        Min.   :2020-01-01   Min.   :2020-01-02  
2025-07-28T13:39:04.291997286Z  Class :character   1st Qu.:2020-04-16   1st Qu.:2021-02-18  
2025-07-28T13:39:04.291998217Z  Mode  :character   Median :2020-07-10   Median :2022-03-08  
2025-07-28T13:39:04.291999121Z                     Mean   :2020-07-21   Mean   :2022-03-06  
2025-07-28T13:39:04.292000116Z                     3rd Qu.:2020-10-21   3rd Qu.:2023-03-27  
2025-07-28T13:39:04.292001076Z                     Max.   :2021-06-12   Max.   :2024-04-28  
2025-07-28T13:39:04.292002109Z                     NA's   :3606         NA's   :2123        
2025-07-28T13:39:04.292003050Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:04.292003972Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.292004904Z  1st Qu.:2020-01-01   1st Qu.:2022-01-13   1st Qu.:2020-01-01  
2025-07-28T13:39:04.292005797Z  Median :2020-01-01   Median :2024-02-04   Median :2020-01-01  
2025-07-28T13:39:04.292006681Z  Mean   :2020-01-01   Mean   :2023-03-05   Mean   :2020-01-01  
2025-07-28T13:39:04.292007587Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:04.292008467Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:04.292009724Z                                                                
2025-07-28T13:39:04.292010774Z    study_stop           fup_start             fup_stop          outcome_status 
2025-07-28T13:39:04.292011724Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-01   Mode :logical  
2025-07-28T13:39:04.292012636Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-01-13   FALSE:2123     
2025-07-28T13:39:04.292013544Z  Median :2024-04-30   Median :2020-01-01   Median :2024-02-04   TRUE :1931     
2025-07-28T13:39:04.292014494Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-03-05                  
2025-07-28T13:39:04.292015395Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30                  
2025-07-28T13:39:04.292016296Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30                  
2025-07-28T13:39:04.292017221Z                                                                                
2025-07-28T13:39:04.292018164Z    cox_weight
2025-07-28T13:39:04.292019011Z  Min.   :1   
2025-07-28T13:39:04.292030283Z  1st Qu.:1   
2025-07-28T13:39:04.292031162Z  Median :1   
2025-07-28T13:39:04.292031993Z  Mean   :1   
2025-07-28T13:39:04.292032850Z  3rd Qu.:1   
2025-07-28T13:39:04.292033686Z  Max.   :1   
2025-07-28T13:39:04.292034525Z              
2025-07-28T13:39:04.292035392Z [1] "Define episode labels"
2025-07-28T13:39:04.292728309Z    episode   time_period
2025-07-28T13:39:04.292736616Z 1        0      days_pre
2025-07-28T13:39:04.292737817Z 2        1       days0_1
2025-07-28T13:39:04.292738679Z 3        2       days1_7
2025-07-28T13:39:04.292739524Z 4        3      days7_14
2025-07-28T13:39:04.292740528Z 5        4     days14_28
2025-07-28T13:39:04.292741409Z 6        5     days28_56
2025-07-28T13:39:04.292742240Z 7        6     days56_84
2025-07-28T13:39:04.292743123Z 8        7    days84_183
2025-07-28T13:39:04.292743998Z 9        8   days183_365
2025-07-28T13:39:04.292746063Z 10       9   days365_730
2025-07-28T13:39:04.292746958Z 11      10  days730_1065
2025-07-28T13:39:04.292747823Z 12      11 days1065_1582
2025-07-28T13:39:04.292748728Z [1] "Survival data setup"
2025-07-28T13:39:04.313788141Z [1] "Calculate where follow-up occurs in study period"
2025-07-28T13:39:04.313959371Z [1] "Set survival data for the exposed"
2025-07-28T13:39:04.313965240Z [1] "Filter data to exposed"
2025-07-28T13:39:04.314097171Z [1] "Calculate days to exposure"
2025-07-28T13:39:04.314264494Z [1] "Put into survival format (dataset d1)"
2025-07-28T13:39:04.315512828Z   patient_id           exposure             outcome          
2025-07-28T13:39:04.315520427Z  Length:448         Min.   :2020-01-01   Min.   :2020-03-26  
2025-07-28T13:39:04.315521668Z  Class :character   1st Qu.:2020-04-16   1st Qu.:2021-08-03  
2025-07-28T13:39:04.315522550Z  Mode  :character   Median :2020-07-10   Median :2022-07-08  
2025-07-28T13:39:04.315523389Z                     Mean   :2020-07-21   Mean   :2022-07-07  
2025-07-28T13:39:04.315524411Z                     3rd Qu.:2020-10-21   3rd Qu.:2023-08-12  
2025-07-28T13:39:04.315525303Z                     Max.   :2021-06-12   Max.   :2024-04-28  
2025-07-28T13:39:04.315526277Z                                          NA's   :259         
2025-07-28T13:39:04.315527180Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:04.315528091Z  Min.   :2020-01-01   Min.   :2020-03-26   Min.   :2020-01-01  
2025-07-28T13:39:04.315529008Z  1st Qu.:2020-01-01   1st Qu.:2022-08-16   1st Qu.:2020-01-01  
2025-07-28T13:39:04.315529966Z  Median :2020-01-01   Median :2024-04-30   Median :2020-01-01  
2025-07-28T13:39:04.315536678Z  Mean   :2020-01-01   Mean   :2023-06-19   Mean   :2020-01-01  
2025-07-28T13:39:04.315537655Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:04.315538573Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:04.315539463Z                                                                
2025-07-28T13:39:04.315540403Z    study_stop           fup_start             fup_stop            cox_weight
2025-07-28T13:39:04.315541345Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-03-26   Min.   :1   
2025-07-28T13:39:04.315542243Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-08-16   1st Qu.:1   
2025-07-28T13:39:04.315543178Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30   Median :1   
2025-07-28T13:39:04.315544080Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-06-19   Mean   :1   
2025-07-28T13:39:04.315545044Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:1   
2025-07-28T13:39:04.315545947Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1   
2025-07-28T13:39:04.315546896Z                                                                             
2025-07-28T13:39:04.315547840Z [1] "Put into survival format (dataset d2)"
2025-07-28T13:39:04.316196657Z   patient_id        days_to_start  days_to_exp     days_to_end  
2025-07-28T13:39:04.316204619Z  Length:448         Min.   :0     Min.   :  0.0   Min.   :  86  
2025-07-28T13:39:04.316205829Z  Class :character   1st Qu.:0     1st Qu.:106.0   1st Qu.: 959  
2025-07-28T13:39:04.316206767Z  Mode  :character   Median :0     Median :191.0   Median :1582  
2025-07-28T13:39:04.316207685Z                     Mean   :0     Mean   :202.4   Mean   :1267  
2025-07-28T13:39:04.316208639Z                     3rd Qu.:0     3rd Qu.:294.2   3rd Qu.:1582  
2025-07-28T13:39:04.316209559Z                     Max.   :0     Max.   :528.0   Max.   :1582  
2025-07-28T13:39:04.316210486Z  outcome_status 
2025-07-28T13:39:04.316211369Z  Mode :logical  
2025-07-28T13:39:04.316212226Z  FALSE:259      
2025-07-28T13:39:04.316213030Z  TRUE :189      
2025-07-28T13:39:04.316213886Z                 
2025-07-28T13:39:04.316214721Z                 
2025-07-28T13:39:04.316215536Z                 
2025-07-28T13:39:04.316216403Z [1] "Put into survival format (tmerge)"
2025-07-28T13:39:04.325774587Z Call:
2025-07-28T13:39:04.325800229Z survival::tmerge(data1 = d1, data2 = d2, id = patient_id, outcome_status = event(days_to_end, 
2025-07-28T13:39:04.325801588Z     outcome_status), exposure_status = tdc(days_to_exp), tstart = days_to_start, 
2025-07-28T13:39:04.325802794Z     tstop = days_to_end)
2025-07-28T13:39:04.325803822Z 
2025-07-28T13:39:04.325810882Z                 early late gap within boundary leading trailing tied missid
2025-07-28T13:39:04.325811986Z outcome_status      0    0   0      0        0       0      448    0      0
2025-07-28T13:39:04.325812983Z exposure_status     0    0   0    445        0       3        0    0      0
2025-07-28T13:39:04.325813966Z                 early late gap within boundary leading trailing tied missid
2025-07-28T13:39:04.325814965Z outcome_status      0    0   0      0        0       0      448    0      0
2025-07-28T13:39:04.325815972Z exposure_status     0    0   0    445        0       3        0    0      0
2025-07-28T13:39:04.325822424Z [1] "Split post-exposure time for the exposed"
2025-07-28T13:39:04.325823574Z [1] "Filter to post-exposure data"
2025-07-28T13:39:04.325828328Z [1] "Format tstart and tstop"
2025-07-28T13:39:04.326993395Z [1] "Implement post-exposure cut points"
2025-07-28T13:39:04.328676679Z   patient_id           exposure             outcome          
2025-07-28T13:39:04.328697729Z  Length:448         Min.   :2020-01-01   Min.   :2020-03-26  
2025-07-28T13:39:04.328699122Z  Class :character   1st Qu.:2020-04-16   1st Qu.:2021-08-03  
2025-07-28T13:39:04.328700118Z  Mode  :character   Median :2020-07-10   Median :2022-07-08  
2025-07-28T13:39:04.328701084Z                     Mean   :2020-07-21   Mean   :2022-07-07  
2025-07-28T13:39:04.328702065Z                     3rd Qu.:2020-10-21   3rd Qu.:2023-08-12  
2025-07-28T13:39:04.328703104Z                     Max.   :2021-06-12   Max.   :2024-04-28  
2025-07-28T13:39:04.328704116Z                                          NA's   :259         
2025-07-28T13:39:04.328705090Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:04.328706136Z  Min.   :2020-01-01   Min.   :2020-03-26   Min.   :2020-01-01  
2025-07-28T13:39:04.328707146Z  1st Qu.:2020-01-01   1st Qu.:2022-08-16   1st Qu.:2020-01-01  
2025-07-28T13:39:04.328708136Z  Median :2020-01-01   Median :2024-04-30   Median :2020-01-01  
2025-07-28T13:39:04.328709120Z  Mean   :2020-01-01   Mean   :2023-06-19   Mean   :2020-01-01  
2025-07-28T13:39:04.328710154Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:04.328711116Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:04.328712298Z                                                                
2025-07-28T13:39:04.328713311Z    study_stop           fup_start             fup_stop            cox_weight
2025-07-28T13:39:04.328714364Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-03-26   Min.   :1   
2025-07-28T13:39:04.328715338Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-08-16   1st Qu.:1   
2025-07-28T13:39:04.328716313Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30   Median :1   
2025-07-28T13:39:04.328717314Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-06-19   Mean   :1   
2025-07-28T13:39:04.328723739Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:1   
2025-07-28T13:39:04.328724766Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1   
2025-07-28T13:39:04.328725762Z                                                                             
2025-07-28T13:39:04.328726734Z        t0              t        outcome_status  exposure_status     tstart 
2025-07-28T13:39:04.328727760Z  Min.   :  0.0   Min.   :  86   Mode :logical   Min.   :1       Min.   :0  
2025-07-28T13:39:04.328728776Z  1st Qu.:106.0   1st Qu.: 959   FALSE:259       1st Qu.:1       1st Qu.:0  
2025-07-28T13:39:04.328729766Z  Median :191.0   Median :1582   TRUE :189       Median :1       Median :0  
2025-07-28T13:39:04.328730742Z  Mean   :202.4   Mean   :1267                   Mean   :1       Mean   :0  
2025-07-28T13:39:04.328732130Z  3rd Qu.:294.2   3rd Qu.:1582                   3rd Qu.:1       3rd Qu.:0  
2025-07-28T13:39:04.328733177Z  Max.   :528.0   Max.   :1582                   Max.   :1       Max.   :0  
2025-07-28T13:39:04.328734193Z                                                                            
2025-07-28T13:39:04.328735199Z      tstop       
2025-07-28T13:39:04.328736196Z  Min.   :   2.0  
2025-07-28T13:39:04.328737070Z  1st Qu.: 771.5  
2025-07-28T13:39:04.328737960Z  Median :1244.0  
2025-07-28T13:39:04.328738841Z  Mean   :1064.6  
2025-07-28T13:39:04.328739740Z  3rd Qu.:1394.0  
2025-07-28T13:39:04.328740627Z  Max.   :1582.0  
2025-07-28T13:39:04.328741531Z                  
2025-07-28T13:39:04.335051455Z   patient_id           exposure             outcome          
2025-07-28T13:39:04.335073536Z  Length:4560        Min.   :2020-01-01   Min.   :2020-03-26  
2025-07-28T13:39:04.335074877Z  Class :character   1st Qu.:2020-04-16   1st Qu.:2021-10-31  
2025-07-28T13:39:04.335075921Z  Mode  :character   Median :2020-07-10   Median :2022-10-21  
2025-07-28T13:39:04.335076919Z                     Mean   :2020-07-21   Mean   :2022-09-12  
2025-07-28T13:39:04.335077912Z                     3rd Qu.:2020-10-22   3rd Qu.:2023-09-13  
2025-07-28T13:39:04.335078896Z                     Max.   :2021-06-12   Max.   :2024-04-28  
2025-07-28T13:39:04.335079868Z                                          NA's   :2811        
2025-07-28T13:39:04.335080937Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:04.335081951Z  Min.   :2020-01-01   Min.   :2020-03-26   Min.   :2020-01-01  
2025-07-28T13:39:04.335082917Z  1st Qu.:2020-01-01   1st Qu.:2023-02-03   1st Qu.:2020-01-01  
2025-07-28T13:39:04.335083898Z  Median :2020-01-01   Median :2024-04-30   Median :2020-01-01  
2025-07-28T13:39:04.335084877Z  Mean   :2020-01-01   Mean   :2023-08-15   Mean   :2020-01-01  
2025-07-28T13:39:04.335090128Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:04.335091141Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:04.335092121Z                                                                
2025-07-28T13:39:04.335093155Z    study_stop           fup_start             fup_stop            cox_weight
2025-07-28T13:39:04.335094229Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-03-26   Min.   :1   
2025-07-28T13:39:04.335095240Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2023-02-03   1st Qu.:1   
2025-07-28T13:39:04.335096255Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30   Median :1   
2025-07-28T13:39:04.335097269Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-08-15   Mean   :1   
2025-07-28T13:39:04.335098270Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:1   
2025-07-28T13:39:04.335099261Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1   
2025-07-28T13:39:04.335100251Z                                                                             
2025-07-28T13:39:04.335101284Z        t0              t        exposure_status     tstart         tstop       
2025-07-28T13:39:04.335102264Z  Min.   :  0.0   Min.   :  86   Min.   :1       Min.   :   0   Min.   :   1.0  
2025-07-28T13:39:04.335103265Z  1st Qu.:106.0   1st Qu.:1130   1st Qu.:1       1st Qu.:   7   1st Qu.:  14.0  
2025-07-28T13:39:04.335104273Z  Median :191.0   Median :1582   Median :1       Median :  56   Median :  84.0  
2025-07-28T13:39:04.335105256Z  Mean   :202.6   Mean   :1324   Mean   :1       Mean   : 190   Mean   : 294.6  
2025-07-28T13:39:04.335106755Z  3rd Qu.:295.0   3rd Qu.:1582   3rd Qu.:1       3rd Qu.: 183   3rd Qu.: 365.0  
2025-07-28T13:39:04.335107792Z  Max.   :528.0   Max.   :1582   Max.   :1       Max.   :1065   Max.   :1582.0  
2025-07-28T13:39:04.335108783Z                                                                                
2025-07-28T13:39:04.335109794Z  outcome_status       episode      
2025-07-28T13:39:04.335110747Z  Min.   :0.00000   Min.   : 1.000  
2025-07-28T13:39:04.335111717Z  1st Qu.:0.00000   1st Qu.: 3.000  
2025-07-28T13:39:04.335112768Z  Median :0.00000   Median : 6.000  
2025-07-28T13:39:04.335113759Z  Mean   :0.04145   Mean   : 5.689  
2025-07-28T13:39:04.335114661Z  3rd Qu.:0.00000   3rd Qu.: 8.000  
2025-07-28T13:39:04.335115576Z  Max.   :1.00000   Max.   :11.000  
2025-07-28T13:39:04.335116497Z                                    
2025-07-28T13:39:04.335117459Z [1] "Account for pre-exposure time"
2025-07-28T13:39:04.337989222Z   patient_id           exposure             outcome          
2025-07-28T13:39:04.337997594Z  Length:4560        Min.   :2020-01-01   Min.   :2020-03-26  
2025-07-28T13:39:04.337998861Z  Class :character   1st Qu.:2020-04-16   1st Qu.:2021-10-31  
2025-07-28T13:39:04.338003749Z  Mode  :character   Median :2020-07-10   Median :2022-10-21  
2025-07-28T13:39:04.338004732Z                     Mean   :2020-07-21   Mean   :2022-09-12  
2025-07-28T13:39:04.338005700Z                     3rd Qu.:2020-10-22   3rd Qu.:2023-09-13  
2025-07-28T13:39:04.338006763Z                     Max.   :2021-06-12   Max.   :2024-04-28  
2025-07-28T13:39:04.338007721Z                                          NA's   :2811        
2025-07-28T13:39:04.338008694Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:04.338009637Z  Min.   :2020-01-01   Min.   :2020-03-26   Min.   :2020-01-01  
2025-07-28T13:39:04.338010584Z  1st Qu.:2020-01-01   1st Qu.:2023-02-03   1st Qu.:2020-01-01  
2025-07-28T13:39:04.338011560Z  Median :2020-01-01   Median :2024-04-30   Median :2020-01-01  
2025-07-28T13:39:04.338012547Z  Mean   :2020-01-01   Mean   :2023-08-15   Mean   :2020-01-01  
2025-07-28T13:39:04.338013544Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:04.338014560Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:04.338015571Z                                                                
2025-07-28T13:39:04.338016559Z    study_stop           fup_start             fup_stop            cox_weight
2025-07-28T13:39:04.338017624Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-03-26   Min.   :1   
2025-07-28T13:39:04.338018593Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2023-02-03   1st Qu.:1   
2025-07-28T13:39:04.338019572Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30   Median :1   
2025-07-28T13:39:04.338020588Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-08-15   Mean   :1   
2025-07-28T13:39:04.338021557Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:1   
2025-07-28T13:39:04.338022602Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1   
2025-07-28T13:39:04.338023589Z                                                                             
2025-07-28T13:39:04.338024576Z  exposure_status     tstart           tstop        outcome_status   
2025-07-28T13:39:04.338025535Z  Min.   :1       Min.   :   0.0   Min.   :   1.0   Min.   :0.00000  
2025-07-28T13:39:04.338026499Z  1st Qu.:1       1st Qu.: 173.0   1st Qu.: 196.0   1st Qu.:0.00000  
2025-07-28T13:39:04.338027468Z  Median :1       Median : 296.0   Median : 343.5   Median :0.00000  
2025-07-28T13:39:04.338028429Z  Mean   :1       Mean   : 392.6   Mean   : 497.2   Mean   :0.04145  
2025-07-28T13:39:04.338029430Z  3rd Qu.:1       3rd Qu.: 476.0   3rd Qu.: 645.2   3rd Qu.:0.00000  
2025-07-28T13:39:04.338030813Z  Max.   :1       Max.   :1581.0   Max.   :1582.0   Max.   :1.00000  
2025-07-28T13:39:04.338031797Z                                                                     
2025-07-28T13:39:04.338032803Z     episode      
2025-07-28T13:39:04.338035167Z  Min.   : 1.000  
2025-07-28T13:39:04.338036114Z  1st Qu.: 3.000  
2025-07-28T13:39:04.338037052Z  Median : 6.000  
2025-07-28T13:39:04.338037995Z  Mean   : 5.689  
2025-07-28T13:39:04.338038877Z  3rd Qu.: 8.000  
2025-07-28T13:39:04.338039832Z  Max.   :11.000  
2025-07-28T13:39:04.338040714Z                  
2025-07-28T13:39:04.338041648Z [1] "Combine pre- and post-exposure time for the exposed"
2025-07-28T13:39:04.338042764Z [1] "Filter to pre-exposure data"
2025-07-28T13:39:04.338233413Z [1] "Set pre-exposure to be episode 0"
2025-07-28T13:39:04.343104593Z   patient_id           exposure             outcome          
2025-07-28T13:39:04.343116358Z  Length:445         Min.   :2020-01-04   Min.   :2020-03-26  
2025-07-28T13:39:04.343117812Z  Class :character   1st Qu.:2020-04-18   1st Qu.:2021-08-03  
2025-07-28T13:39:04.343118847Z  Mode  :character   Median :2020-07-11   Median :2022-07-08  
2025-07-28T13:39:04.343119851Z                     Mean   :2020-07-22   Mean   :2022-07-07  
2025-07-28T13:39:04.343120829Z                     3rd Qu.:2020-10-22   3rd Qu.:2023-08-12  
2025-07-28T13:39:04.343121798Z                     Max.   :2021-06-12   Max.   :2024-04-28  
2025-07-28T13:39:04.343122805Z                                          NA's   :256         
2025-07-28T13:39:04.343123800Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:04.343124811Z  Min.   :2020-01-01   Min.   :2020-03-26   Min.   :2020-01-01  
2025-07-28T13:39:04.343125838Z  1st Qu.:2020-01-01   1st Qu.:2022-08-18   1st Qu.:2020-01-01  
2025-07-28T13:39:04.343126808Z  Median :2020-01-01   Median :2024-04-30   Median :2020-01-01  
2025-07-28T13:39:04.343127793Z  Mean   :2020-01-01   Mean   :2023-06-20   Mean   :2020-01-01  
2025-07-28T13:39:04.343128781Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:04.343129757Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:04.343130895Z                                                                
2025-07-28T13:39:04.343131931Z    study_stop           fup_start             fup_stop            cox_weight
2025-07-28T13:39:04.343143141Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-03-26   Min.   :1   
2025-07-28T13:39:04.343144237Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-08-18   1st Qu.:1   
2025-07-28T13:39:04.343145253Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30   Median :1   
2025-07-28T13:39:04.343146265Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-06-20   Mean   :1   
2025-07-28T13:39:04.343147269Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:1   
2025-07-28T13:39:04.343148291Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1   
2025-07-28T13:39:04.343155452Z                                                                             
2025-07-28T13:39:04.343156496Z      tstart      tstop       outcome_status  exposure_status    episode 
2025-07-28T13:39:04.343157616Z  Min.   :0   Min.   :  3.0   Mode :logical   Min.   :0       Min.   :0  
2025-07-28T13:39:04.343158652Z  1st Qu.:0   1st Qu.:108.0   FALSE:445       1st Qu.:0       1st Qu.:0  
2025-07-28T13:39:04.343159644Z  Median :0   Median :192.0                   Median :0       Median :0  
2025-07-28T13:39:04.343160648Z  Mean   :0   Mean   :203.8                   Mean   :0       Mean   :0  
2025-07-28T13:39:04.343162234Z  3rd Qu.:0   3rd Qu.:295.0                   3rd Qu.:0       3rd Qu.:0  
2025-07-28T13:39:04.343163241Z  Max.   :0   Max.   :528.0                   Max.   :0       Max.   :0  
2025-07-28T13:39:04.343164219Z                                                                         
2025-07-28T13:39:04.343165258Z [1] "Bind pre- and post-exposure time"
2025-07-28T13:39:04.382887721Z   patient_id           exposure             outcome          
2025-07-28T13:39:04.382922380Z  Length:5005        Min.   :2020-01-01   Min.   :2020-03-26  
2025-07-28T13:39:04.382923689Z  Class :character   1st Qu.:2020-04-16   1st Qu.:2021-10-31  
2025-07-28T13:39:04.382924697Z  Mode  :character   Median :2020-07-10   Median :2022-09-21  
2025-07-28T13:39:04.382925665Z                     Mean   :2020-07-21   Mean   :2022-09-05  
2025-07-28T13:39:04.382926601Z                     3rd Qu.:2020-10-22   3rd Qu.:2023-09-13  
2025-07-28T13:39:04.382927529Z                     Max.   :2021-06-12   Max.   :2024-04-28  
2025-07-28T13:39:04.382928938Z                                          NA's   :3067        
2025-07-28T13:39:04.382929881Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:04.382930813Z  Min.   :2020-01-01   Min.   :2020-03-26   Min.   :2020-01-01  
2025-07-28T13:39:04.382931750Z  1st Qu.:2020-01-01   1st Qu.:2023-01-18   1st Qu.:2020-01-01  
2025-07-28T13:39:04.382932707Z  Median :2020-01-01   Median :2024-04-30   Median :2020-01-01  
2025-07-28T13:39:04.382933680Z  Mean   :2020-01-01   Mean   :2023-08-10   Mean   :2020-01-01  
2025-07-28T13:39:04.382934615Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:04.382935564Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:04.382936512Z                                                                
2025-07-28T13:39:04.382937547Z    study_stop           fup_start             fup_stop            cox_weight
2025-07-28T13:39:04.382938519Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-03-26   Min.   :1   
2025-07-28T13:39:04.382939493Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2023-01-18   1st Qu.:1   
2025-07-28T13:39:04.382940443Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30   Median :1   
2025-07-28T13:39:04.382949416Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-08-10   Mean   :1   
2025-07-28T13:39:04.382950504Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:1   
2025-07-28T13:39:04.382951561Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1   
2025-07-28T13:39:04.382952561Z                                                                             
2025-07-28T13:39:04.382953504Z      tstart           tstop        outcome_status    exposure_status 
2025-07-28T13:39:04.382954485Z  Min.   :   0.0   Min.   :   1.0   Min.   :0.00000   Min.   :0.0000  
2025-07-28T13:39:04.382955472Z  1st Qu.: 135.0   1st Qu.: 184.0   1st Qu.:0.00000   1st Qu.:1.0000  
2025-07-28T13:39:04.382956415Z  Median : 268.0   Median : 322.0   Median :0.00000   Median :1.0000  
2025-07-28T13:39:04.382957349Z  Mean   : 357.7   Mean   : 471.1   Mean   :0.03776   Mean   :0.9111  
2025-07-28T13:39:04.382958296Z  3rd Qu.: 449.0   3rd Qu.: 572.0   3rd Qu.:0.00000   3rd Qu.:1.0000  
2025-07-28T13:39:04.382960054Z  Max.   :1581.0   Max.   :1582.0   Max.   :1.00000   Max.   :1.0000  
2025-07-28T13:39:04.382961046Z                                                                      
2025-07-28T13:39:04.382962013Z     episode      
2025-07-28T13:39:04.382962960Z  Min.   : 0.000  
2025-07-28T13:39:04.382963832Z  1st Qu.: 2.000  
2025-07-28T13:39:04.382964688Z  Median : 5.000  
2025-07-28T13:39:04.382965540Z  Mean   : 5.184  
2025-07-28T13:39:04.382966390Z  3rd Qu.: 8.000  
2025-07-28T13:39:04.382967234Z  Max.   :11.000  
2025-07-28T13:39:04.382968147Z                  
2025-07-28T13:39:04.382973838Z [1] "Set survival data for the unexposed"
2025-07-28T13:39:04.382974987Z [1] "Filter data to unexposed"
2025-07-28T13:39:04.383153550Z [1] "Rename variables to survival variable names"
2025-07-28T13:39:04.386267669Z   patient_id           exposure       outcome             index_date        
2025-07-28T13:39:04.386275806Z  Length:3606        Min.   :NA     Min.   :2020-01-02   Min.   :2020-01-01  
2025-07-28T13:39:04.386277162Z  Class :character   1st Qu.:NA     1st Qu.:2021-01-25   1st Qu.:2020-01-01  
2025-07-28T13:39:04.386278126Z  Mode  :character   Median :NA     Median :2022-02-19   Median :2020-01-01  
2025-07-28T13:39:04.386279048Z                     Mean   :NaN    Mean   :2022-02-21   Mean   :2020-01-01  
2025-07-28T13:39:04.386279979Z                     3rd Qu.:NA     3rd Qu.:2023-03-06   3rd Qu.:2020-01-01  
2025-07-28T13:39:04.386280884Z                     Max.   :NA     Max.   :2024-04-27   Max.   :2020-01-01  
2025-07-28T13:39:04.386281815Z                     NA's   :3606   NA's   :1864                             
2025-07-28T13:39:04.386282788Z  end_date_outcome      study_start           study_stop        
2025-07-28T13:39:04.386287891Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2024-04-30  
2025-07-28T13:39:04.386288957Z  1st Qu.:2021-12-10   1st Qu.:2020-01-01   1st Qu.:2024-04-30  
2025-07-28T13:39:04.386289934Z  Median :2023-12-31   Median :2020-01-01   Median :2024-04-30  
2025-07-28T13:39:04.386290867Z  Mean   :2023-02-20   Mean   :2020-01-01   Mean   :2024-04-30  
2025-07-28T13:39:04.386291798Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30  
2025-07-28T13:39:04.386292752Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30  
2025-07-28T13:39:04.386293688Z                                                                
2025-07-28T13:39:04.386294640Z    fup_start             fup_stop          outcome_status     cox_weight
2025-07-28T13:39:04.386295648Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :0.0000   Min.   :1   
2025-07-28T13:39:04.386296673Z  1st Qu.:2020-01-01   1st Qu.:2021-12-10   1st Qu.:0.0000   1st Qu.:1   
2025-07-28T13:39:04.386297627Z  Median :2020-01-01   Median :2023-12-31   Median :0.0000   Median :1   
2025-07-28T13:39:04.386298556Z  Mean   :2020-01-01   Mean   :2023-02-20   Mean   :0.4831   Mean   :1   
2025-07-28T13:39:04.386299494Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:1.0000   3rd Qu.:1   
2025-07-28T13:39:04.386300435Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1.0000   Max.   :1   
2025-07-28T13:39:04.386301361Z                                                                         
2025-07-28T13:39:04.386302310Z      tstart      tstop        exposure_status    episode 
2025-07-28T13:39:04.386303317Z  Min.   :0   Min.   :   1.0   Min.   :0       Min.   :0  
2025-07-28T13:39:04.386304266Z  1st Qu.:0   1st Qu.: 710.2   1st Qu.:0       1st Qu.:0  
2025-07-28T13:39:04.386305234Z  Median :0   Median :1461.5   Median :0       Median :0  
2025-07-28T13:39:04.386306157Z  Mean   :0   Mean   :1147.5   Mean   :0       Mean   :0  
2025-07-28T13:39:04.386307448Z  3rd Qu.:0   3rd Qu.:1582.0   3rd Qu.:0       3rd Qu.:0  
2025-07-28T13:39:04.386308393Z  Max.   :0   Max.   :1582.0   Max.   :0       Max.   :0  
2025-07-28T13:39:04.386309330Z                                                          
2025-07-28T13:39:04.386310308Z [1] "Combine exposed and unexposed individuals"
2025-07-28T13:39:04.391195087Z   patient_id           exposure             outcome          
2025-07-28T13:39:04.391204238Z  Length:8611        Min.   :2020-01-01   Min.   :2020-01-02  
2025-07-28T13:39:04.391205476Z  Class :character   1st Qu.:2020-04-16   1st Qu.:2021-06-15  
2025-07-28T13:39:04.391206405Z  Mode  :character   Median :2020-07-10   Median :2022-06-21  
2025-07-28T13:39:04.391207338Z                     Mean   :2020-07-21   Mean   :2022-06-04  
2025-07-28T13:39:04.391208257Z                     3rd Qu.:2020-10-22   3rd Qu.:2023-07-09  
2025-07-28T13:39:04.391213394Z                     Max.   :2021-06-12   Max.   :2024-04-28  
2025-07-28T13:39:04.391214362Z                     NA's   :3606         NA's   :4931        
2025-07-28T13:39:04.391215366Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:04.391216322Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.391217313Z  1st Qu.:2020-01-01   1st Qu.:2022-07-15   1st Qu.:2020-01-01  
2025-07-28T13:39:04.391218279Z  Median :2020-01-01   Median :2024-04-30   Median :2020-01-01  
2025-07-28T13:39:04.391219238Z  Mean   :2020-01-01   Mean   :2023-05-31   Mean   :2020-01-01  
2025-07-28T13:39:04.391220185Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:04.391221149Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:04.391222161Z                                                                
2025-07-28T13:39:04.391223170Z    study_stop           fup_start             fup_stop         
2025-07-28T13:39:04.391224118Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.391225075Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-07-15  
2025-07-28T13:39:04.391225999Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30  
2025-07-28T13:39:04.391226918Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-05-31  
2025-07-28T13:39:04.391227842Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30  
2025-07-28T13:39:04.391228832Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30  
2025-07-28T13:39:04.391234870Z                                                                
2025-07-28T13:39:04.391235924Z  outcome_status     cox_weight     tstart           tstop       
2025-07-28T13:39:04.391236943Z  Min.   :0.0000   Min.   :1    Min.   :   0.0   Min.   :   1.0  
2025-07-28T13:39:04.391237892Z  1st Qu.:0.0000   1st Qu.:1    1st Qu.:   0.0   1st Qu.: 242.0  
2025-07-28T13:39:04.391238859Z  Median :0.0000   Median :1    Median :  53.0   Median : 527.0  
2025-07-28T13:39:04.391239813Z  Mean   :0.2242   Mean   :1    Mean   : 207.9   Mean   : 754.3  
2025-07-28T13:39:04.391240769Z  3rd Qu.:0.0000   3rd Qu.:1    3rd Qu.: 312.5   3rd Qu.:1431.0  
2025-07-28T13:39:04.391241727Z  Max.   :1.0000   Max.   :1    Max.   :1581.0   Max.   :1582.0  
2025-07-28T13:39:04.391242702Z                                                                 
2025-07-28T13:39:04.391244125Z  exposure_status     episode      
2025-07-28T13:39:04.391245073Z  Min.   :0.0000   Min.   : 0.000  
2025-07-28T13:39:04.391246025Z  1st Qu.:0.0000   1st Qu.: 0.000  
2025-07-28T13:39:04.391246919Z  Median :1.0000   Median : 1.000  
2025-07-28T13:39:04.391247808Z  Mean   :0.5296   Mean   : 3.013  
2025-07-28T13:39:04.391248707Z  3rd Qu.:1.0000   3rd Qu.: 6.000  
2025-07-28T13:39:04.391251116Z  Max.   :1.0000   Max.   :11.000  
2025-07-28T13:39:04.391252036Z                                   
2025-07-28T13:39:04.391252981Z [1] "Add indicators for episode"
2025-07-28T13:39:04.398923272Z   patient_id           exposure             outcome          
2025-07-28T13:39:04.398932579Z  Length:8611        Min.   :2020-01-01   Min.   :2020-01-02  
2025-07-28T13:39:04.398933781Z  Class :character   1st Qu.:2020-04-16   1st Qu.:2021-06-15  
2025-07-28T13:39:04.398934749Z  Mode  :character   Median :2020-07-10   Median :2022-06-21  
2025-07-28T13:39:04.398935692Z                     Mean   :2020-07-21   Mean   :2022-06-04  
2025-07-28T13:39:04.398936644Z                     3rd Qu.:2020-10-22   3rd Qu.:2023-07-09  
2025-07-28T13:39:04.398937683Z                     Max.   :2021-06-12   Max.   :2024-04-28  
2025-07-28T13:39:04.398938676Z                     NA's   :3606         NA's   :4931        
2025-07-28T13:39:04.398939628Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:04.398940569Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.398941549Z  1st Qu.:2020-01-01   1st Qu.:2022-07-15   1st Qu.:2020-01-01  
2025-07-28T13:39:04.398942510Z  Median :2020-01-01   Median :2024-04-30   Median :2020-01-01  
2025-07-28T13:39:04.398943489Z  Mean   :2020-01-01   Mean   :2023-05-31   Mean   :2020-01-01  
2025-07-28T13:39:04.398944593Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:04.398945563Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:04.398946512Z                                                                
2025-07-28T13:39:04.398947471Z    study_stop           fup_start             fup_stop         
2025-07-28T13:39:04.398948442Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.398949411Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-07-15  
2025-07-28T13:39:04.398950397Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30  
2025-07-28T13:39:04.398951343Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-05-31  
2025-07-28T13:39:04.398952289Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30  
2025-07-28T13:39:04.398953256Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30  
2025-07-28T13:39:04.398954197Z                                                                
2025-07-28T13:39:04.398955185Z  outcome_status     cox_weight     tstart           tstop       
2025-07-28T13:39:04.398956120Z  Min.   :0.0000   Min.   :1    Min.   :   0.0   Min.   :   1.0  
2025-07-28T13:39:04.398957078Z  1st Qu.:0.0000   1st Qu.:1    1st Qu.:   0.0   1st Qu.: 242.0  
2025-07-28T13:39:04.398958012Z  Median :0.0000   Median :1    Median :  53.0   Median : 527.0  
2025-07-28T13:39:04.398959115Z  Mean   :0.2242   Mean   :1    Mean   : 207.9   Mean   : 754.3  
2025-07-28T13:39:04.398964369Z  3rd Qu.:0.0000   3rd Qu.:1    3rd Qu.: 312.5   3rd Qu.:1431.0  
2025-07-28T13:39:04.398965390Z  Max.   :1.0000   Max.   :1    Max.   :1581.0   Max.   :1582.0  
2025-07-28T13:39:04.398966370Z                                                                 
2025-07-28T13:39:04.398967728Z  exposure_status     episode          days0_1           days1_7       
2025-07-28T13:39:04.398968794Z  Min.   :0.0000   Min.   : 0.000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:04.398969760Z  1st Qu.:0.0000   1st Qu.: 0.000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:04.398970739Z  Median :1.0000   Median : 1.000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:04.398971683Z  Mean   :0.5296   Mean   : 3.013   Mean   :0.05203   Mean   :0.05203  
2025-07-28T13:39:04.398972632Z  3rd Qu.:1.0000   3rd Qu.: 6.000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:04.398973618Z  Max.   :1.0000   Max.   :11.000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:04.398974572Z                                                                       
2025-07-28T13:39:04.398975523Z     days7_14         days14_28         days28_56         days56_84      
2025-07-28T13:39:04.398976500Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:04.398977467Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:04.398978411Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:04.398979374Z  Mean   :0.05191   Mean   :0.05191   Mean   :0.05179   Mean   :0.05087  
2025-07-28T13:39:04.398980353Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:04.398981345Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:04.398982318Z                                                                         
2025-07-28T13:39:04.398983290Z    days84_183       days183_365       days365_730       days730_1065    
2025-07-28T13:39:04.398984256Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:04.398985175Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:04.398986124Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:04.398987074Z  Mean   :0.05017   Mean   :0.04924   Mean   :0.04587   Mean   :0.03983  
2025-07-28T13:39:04.398988010Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:04.398988990Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:04.398989924Z                                                                         
2025-07-28T13:39:04.398990901Z  days1065_1582    
2025-07-28T13:39:04.398991818Z  Min.   :0.00000  
2025-07-28T13:39:04.398993951Z  1st Qu.:0.00000  
2025-07-28T13:39:04.398994855Z  Median :0.00000  
2025-07-28T13:39:04.398995745Z  Mean   :0.03391  
2025-07-28T13:39:04.398996595Z  3rd Qu.:0.00000  
2025-07-28T13:39:04.398997467Z  Max.   :1.00000  
2025-07-28T13:39:04.398998392Z                   
2025-07-28T13:39:04.405377604Z   patient_id           exposure             outcome          
2025-07-28T13:39:04.405385794Z  Length:8611        Min.   :2020-01-01   Min.   :2020-01-02  
2025-07-28T13:39:04.405386912Z  Class :character   1st Qu.:2020-04-16   1st Qu.:2021-06-15  
2025-07-28T13:39:04.405387767Z  Mode  :character   Median :2020-07-10   Median :2022-06-21  
2025-07-28T13:39:04.405388570Z                     Mean   :2020-07-21   Mean   :2022-06-04  
2025-07-28T13:39:04.405389503Z                     3rd Qu.:2020-10-22   3rd Qu.:2023-07-09  
2025-07-28T13:39:04.405390448Z                     Max.   :2021-06-12   Max.   :2024-04-28  
2025-07-28T13:39:04.405391347Z                     NA's   :3606         NA's   :4931        
2025-07-28T13:39:04.405392250Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:04.405393173Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.405394096Z  1st Qu.:2020-01-01   1st Qu.:2022-07-15   1st Qu.:2020-01-01  
2025-07-28T13:39:04.405394983Z  Median :2020-01-01   Median :2024-04-30   Median :2020-01-01  
2025-07-28T13:39:04.405395901Z  Mean   :2020-01-01   Mean   :2023-05-31   Mean   :2020-01-01  
2025-07-28T13:39:04.405396838Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:04.405397778Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:04.405398677Z                                                                
2025-07-28T13:39:04.405399571Z    study_stop           fup_start             fup_stop         
2025-07-28T13:39:04.405400487Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.405401365Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-07-15  
2025-07-28T13:39:04.405402258Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30  
2025-07-28T13:39:04.405403136Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-05-31  
2025-07-28T13:39:04.405404048Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30  
2025-07-28T13:39:04.405404931Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30  
2025-07-28T13:39:04.405405810Z                                                                
2025-07-28T13:39:04.405406722Z  outcome_status     cox_weight     tstart           tstop       
2025-07-28T13:39:04.405407632Z  Min.   :0.0000   Min.   :1    Min.   :   0.0   Min.   :   1.0  
2025-07-28T13:39:04.405408550Z  1st Qu.:0.0000   1st Qu.:1    1st Qu.:   0.0   1st Qu.: 242.0  
2025-07-28T13:39:04.405413382Z  Median :0.0000   Median :1    Median :  53.0   Median : 527.0  
2025-07-28T13:39:04.405414369Z  Mean   :0.2242   Mean   :1    Mean   : 207.9   Mean   : 754.3  
2025-07-28T13:39:04.405415338Z  3rd Qu.:0.0000   3rd Qu.:1    3rd Qu.: 312.5   3rd Qu.:1431.0  
2025-07-28T13:39:04.405416287Z  Max.   :1.0000   Max.   :1    Max.   :1581.0   Max.   :1582.0  
2025-07-28T13:39:04.405417196Z                                                                 
2025-07-28T13:39:04.405418725Z  exposure_status     episode          days0_1           days1_7       
2025-07-28T13:39:04.405419745Z  Min.   :0.0000   Min.   : 0.000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:04.405420663Z  1st Qu.:0.0000   1st Qu.: 0.000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:04.405421584Z  Median :1.0000   Median : 1.000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:04.405422495Z  Mean   :0.5296   Mean   : 3.013   Mean   :0.05203   Mean   :0.05203  
2025-07-28T13:39:04.405423445Z  3rd Qu.:1.0000   3rd Qu.: 6.000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:04.405424431Z  Max.   :1.0000   Max.   :11.000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:04.405425332Z                                                                       
2025-07-28T13:39:04.405426213Z     days7_14         days14_28         days28_56         days56_84      
2025-07-28T13:39:04.405427108Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:04.405428007Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:04.405428960Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:04.405429921Z  Mean   :0.05191   Mean   :0.05191   Mean   :0.05179   Mean   :0.05087  
2025-07-28T13:39:04.405431042Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:04.405431947Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:04.405432838Z                                                                         
2025-07-28T13:39:04.405433753Z    days84_183       days183_365       days365_730       days730_1065    
2025-07-28T13:39:04.405434677Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:04.405435578Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:04.405436476Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:04.405437370Z  Mean   :0.05017   Mean   :0.04924   Mean   :0.04587   Mean   :0.03983  
2025-07-28T13:39:04.405438310Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:04.405439215Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:04.405440165Z                                                                         
2025-07-28T13:39:04.405442338Z  days1065_1582    
2025-07-28T13:39:04.405443245Z  Min.   :0.00000  
2025-07-28T13:39:04.405444085Z  1st Qu.:0.00000  
2025-07-28T13:39:04.405444920Z  Median :0.00000  
2025-07-28T13:39:04.405445769Z  Mean   :0.03391  
2025-07-28T13:39:04.405446639Z  3rd Qu.:0.00000  
2025-07-28T13:39:04.405447466Z  Max.   :1.00000  
2025-07-28T13:39:04.405448312Z                   
2025-07-28T13:39:04.405449794Z [1] "Calculate events in each time period"
2025-07-28T13:39:04.419654815Z [1] "Calculate number of events per episode"
2025-07-28T13:39:04.430978054Z    episode N_events
2025-07-28T13:39:04.430997855Z 1        0     1742
2025-07-28T13:39:04.430999144Z 2        2        1
2025-07-28T13:39:04.431000153Z 3        4        1
2025-07-28T13:39:04.431001102Z 4        5        8
2025-07-28T13:39:04.431002044Z 5        6        4
2025-07-28T13:39:04.431005177Z 6        7        8
2025-07-28T13:39:04.431006048Z 7        8       25
2025-07-28T13:39:04.431006887Z 8        9       47
2025-07-28T13:39:04.431007790Z 9       10       45
2025-07-28T13:39:04.431008678Z 10      11       50
2025-07-28T13:39:04.431009606Z [1] "Add number of events to episode info table"
2025-07-28T13:39:04.432005294Z    episode   time_period N_events
2025-07-28T13:39:04.432013317Z 1        0      days_pre     1742
2025-07-28T13:39:04.432014519Z 2        1       days0_1        0
2025-07-28T13:39:04.432015382Z 3        2       days1_7        1
2025-07-28T13:39:04.432016355Z 4        3      days7_14        0
2025-07-28T13:39:04.432017262Z 5        4     days14_28        1
2025-07-28T13:39:04.432018167Z 6        5     days28_56        8
2025-07-28T13:39:04.432019036Z 7        6     days56_84        4
2025-07-28T13:39:04.432019947Z 8        7    days84_183        8
2025-07-28T13:39:04.432020828Z 9        8   days183_365       25
2025-07-28T13:39:04.432021672Z 10       9   days365_730       47
2025-07-28T13:39:04.432022519Z 11      10  days730_1065       45
2025-07-28T13:39:04.432023387Z 12      11 days1065_1582       50
2025-07-28T13:39:04.432024265Z [1] "Calculate person-time in each episode"
2025-07-28T13:39:04.440859370Z    episode   time_period N_events person_time_total
2025-07-28T13:39:04.440874859Z 1        0      days_pre     1742           4228447
2025-07-28T13:39:04.440876097Z 2        1       days0_1        0               448
2025-07-28T13:39:04.440876996Z 3        2       days1_7        1              2683
2025-07-28T13:39:04.440877890Z 4        3      days7_14        0              3129
2025-07-28T13:39:04.440901374Z 5        4     days14_28        1              6250
2025-07-28T13:39:04.440902375Z 6        5     days28_56        8             12369
2025-07-28T13:39:04.440903323Z 7        6     days56_84        4             12162
2025-07-28T13:39:04.440904268Z 8        7    days84_183        8             42247
2025-07-28T13:39:04.440905207Z 9        8   days183_365       25             74246
2025-07-28T13:39:04.440906136Z 10       9   days365_730       47            134724
2025-07-28T13:39:04.440907044Z 11      10  days730_1065       45            105618
2025-07-28T13:39:04.440908020Z 12      11 days1065_1582       50             83063
2025-07-28T13:39:04.440908985Z [1] "Calculate median person-time"
2025-07-28T13:39:04.448920228Z    episode   time_period N_events person_time_total outcome_time_median
2025-07-28T13:39:04.448931172Z 1        0      days_pre     1742           4228447               781.5
2025-07-28T13:39:04.448932451Z 2        1       days0_1        0               448                  NA
2025-07-28T13:39:04.448935459Z 3        2       days1_7        1              2683                 1.0
2025-07-28T13:39:04.448936433Z 4        3      days7_14        0              3129                  NA
2025-07-28T13:39:04.448937423Z 5        4     days14_28        1              6250                 6.0
2025-07-28T13:39:04.448938414Z 6        5     days28_56        8             12369                14.0
2025-07-28T13:39:04.448946295Z 7        6     days56_84        4             12162                18.5
2025-07-28T13:39:04.448947241Z 8        7    days84_183        8             42247                10.5
2025-07-28T13:39:04.448948188Z 9        8   days183_365       25             74246                72.0
2025-07-28T13:39:04.448949169Z 10       9   days365_730       47            134724               174.0
2025-07-28T13:39:04.448953801Z 11      10  days730_1065       45            105618               123.0
2025-07-28T13:39:04.448954895Z 12      11 days1065_1582       50             83063               180.5
2025-07-28T13:39:04.448955890Z [1] "Add time from previous episodes to median person-time"
2025-07-28T13:39:04.449258404Z    episode   time_period N_events person_time_total outcome_time_median
2025-07-28T13:39:04.449265939Z 1        0      days_pre     1742           4228447               781.5
2025-07-28T13:39:04.449267056Z 2        1       days0_1        0               448                  NA
2025-07-28T13:39:04.449267874Z 3        2       days1_7        1              2683                 2.0
2025-07-28T13:39:04.449268766Z 4        3      days7_14        0              3129                  NA
2025-07-28T13:39:04.449269705Z 5        4     days14_28        1              6250                20.0
2025-07-28T13:39:04.449270636Z 6        5     days28_56        8             12369                42.0
2025-07-28T13:39:04.449277911Z 7        6     days56_84        4             12162                74.5
2025-07-28T13:39:04.449278888Z 8        7    days84_183        8             42247                94.5
2025-07-28T13:39:04.449279834Z 9        8   days183_365       25             74246               255.0
2025-07-28T13:39:04.449280756Z 10       9   days365_730       47            134724               539.0
2025-07-28T13:39:04.449281689Z 11      10  days730_1065       45            105618               853.0
2025-07-28T13:39:04.449282658Z 12      11 days1065_1582       50             83063              1245.5
2025-07-28T13:39:04.449642892Z    episode   time_period N_events person_time_total outcome_time_median
2025-07-28T13:39:04.449648830Z 1        0      days_pre     1742           4228447               781.5
2025-07-28T13:39:04.449650144Z 2        1       days0_1        0               448                  NA
2025-07-28T13:39:04.449651143Z 3        2       days1_7        1              2683                 2.0
2025-07-28T13:39:04.449652064Z 4        3      days7_14        0              3129                  NA
2025-07-28T13:39:04.449653023Z 5        4     days14_28        1              6250                20.0
2025-07-28T13:39:04.449653961Z 6        5     days28_56        8             12369                42.0
2025-07-28T13:39:04.449654910Z 7        6     days56_84        4             12162                74.5
2025-07-28T13:39:04.449655838Z 8        7    days84_183        8             42247                94.5
2025-07-28T13:39:04.449656769Z 9        8   days183_365       25             74246               255.0
2025-07-28T13:39:04.449657673Z 10       9   days365_730       47            134724               539.0
2025-07-28T13:39:04.449658628Z 11      10  days730_1065       45            105618               853.0
2025-07-28T13:39:04.449659642Z 12      11 days1065_1582       50             83063              1245.5
2025-07-28T13:39:04.461713340Z [1] "Add strata information to data"
2025-07-28T13:39:04.484806440Z   patient_id           exposure             outcome          
2025-07-28T13:39:04.484835354Z  Length:8611        Min.   :2020-01-01   Min.   :2020-01-02  
2025-07-28T13:39:04.484836667Z  Class :character   1st Qu.:2020-04-16   1st Qu.:2021-06-15  
2025-07-28T13:39:04.484837661Z  Mode  :character   Median :2020-07-10   Median :2022-06-21  
2025-07-28T13:39:04.484838587Z                     Mean   :2020-07-21   Mean   :2022-06-04  
2025-07-28T13:39:04.484839479Z                     3rd Qu.:2020-10-22   3rd Qu.:2023-07-09  
2025-07-28T13:39:04.484840370Z                     Max.   :2021-06-12   Max.   :2024-04-28  
2025-07-28T13:39:04.484841306Z                     NA's   :3606         NA's   :4931        
2025-07-28T13:39:04.484842231Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:04.484843185Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.484853896Z  1st Qu.:2020-01-01   1st Qu.:2022-07-15   1st Qu.:2020-01-01  
2025-07-28T13:39:04.484854854Z  Median :2020-01-01   Median :2024-04-30   Median :2020-01-01  
2025-07-28T13:39:04.484855753Z  Mean   :2020-01-01   Mean   :2023-05-31   Mean   :2020-01-01  
2025-07-28T13:39:04.484856715Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:04.484857619Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:04.484858530Z                                                                
2025-07-28T13:39:04.484859938Z    study_stop           fup_start             fup_stop         
2025-07-28T13:39:04.484860931Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.484861895Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-07-15  
2025-07-28T13:39:04.484862790Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30  
2025-07-28T13:39:04.484863720Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-05-31  
2025-07-28T13:39:04.484864624Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30  
2025-07-28T13:39:04.484865552Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30  
2025-07-28T13:39:04.484866435Z                                                                
2025-07-28T13:39:04.484867335Z  outcome_status     cox_weight     tstart           tstop       
2025-07-28T13:39:04.484868257Z  Min.   :0.0000   Min.   :1    Min.   :   0.0   Min.   :   1.0  
2025-07-28T13:39:04.484869163Z  1st Qu.:0.0000   1st Qu.:1    1st Qu.:   0.0   1st Qu.: 242.0  
2025-07-28T13:39:04.484870056Z  Median :0.0000   Median :1    Median :  53.0   Median : 527.0  
2025-07-28T13:39:04.484870975Z  Mean   :0.2242   Mean   :1    Mean   : 207.9   Mean   : 754.3  
2025-07-28T13:39:04.484871881Z  3rd Qu.:0.0000   3rd Qu.:1    3rd Qu.: 312.5   3rd Qu.:1431.0  
2025-07-28T13:39:04.484872772Z  Max.   :1.0000   Max.   :1    Max.   :1581.0   Max.   :1582.0  
2025-07-28T13:39:04.484873706Z                                                                 
2025-07-28T13:39:04.484875435Z  exposure_status     episode          days0_1           days1_7       
2025-07-28T13:39:04.484876468Z  Min.   :0.0000   Min.   : 0.000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:04.484877377Z  1st Qu.:0.0000   1st Qu.: 0.000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:04.484878302Z  Median :1.0000   Median : 1.000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:04.484879207Z  Mean   :0.5296   Mean   : 3.013   Mean   :0.05203   Mean   :0.05203  
2025-07-28T13:39:04.484880114Z  3rd Qu.:1.0000   3rd Qu.: 6.000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:04.484881020Z  Max.   :1.0000   Max.   :11.000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:04.484881978Z                                                                       
2025-07-28T13:39:04.484884252Z     days7_14         days14_28         days28_56         days56_84      
2025-07-28T13:39:04.484885235Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:04.484886133Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:04.484887028Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:04.484887967Z  Mean   :0.05191   Mean   :0.05191   Mean   :0.05179   Mean   :0.05087  
2025-07-28T13:39:04.484888856Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:04.484889747Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:04.484890650Z                                                                         
2025-07-28T13:39:04.484891558Z    days84_183       days183_365       days365_730       days730_1065    
2025-07-28T13:39:04.484892482Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:04.484893382Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:04.484894288Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:04.484895176Z  Mean   :0.05017   Mean   :0.04924   Mean   :0.04587   Mean   :0.03983  
2025-07-28T13:39:04.484896066Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:04.484896995Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:04.484897914Z                                                                         
2025-07-28T13:39:04.484898827Z  days1065_1582                     strat_cat_region
2025-07-28T13:39:04.484899755Z  Min.   :0.00000   West Midlands           :1049   
2025-07-28T13:39:04.484900674Z  1st Qu.:0.00000   North West              :1030   
2025-07-28T13:39:04.484901576Z  Median :0.00000   North East              :1012   
2025-07-28T13:39:04.484902473Z  Mean   :0.03391   East                    : 958   
2025-07-28T13:39:04.484903358Z  3rd Qu.:0.00000   Yorkshire and The Humber: 955   
2025-07-28T13:39:04.484904389Z  Max.   :1.00000   East Midlands           : 932   
2025-07-28T13:39:04.484905310Z                    (Other)                 :2675   
2025-07-28T13:39:04.484906252Z [1] "Add age covariates"
2025-07-28T13:39:04.501571878Z   patient_id           exposure             outcome          
2025-07-28T13:39:04.501597174Z  Length:8611        Min.   :2020-01-01   Min.   :2020-01-02  
2025-07-28T13:39:04.501599900Z  Class :character   1st Qu.:2020-04-16   1st Qu.:2021-06-15  
2025-07-28T13:39:04.501601611Z  Mode  :character   Median :2020-07-10   Median :2022-06-21  
2025-07-28T13:39:04.501603240Z                     Mean   :2020-07-21   Mean   :2022-06-04  
2025-07-28T13:39:04.501604791Z                     3rd Qu.:2020-10-22   3rd Qu.:2023-07-09  
2025-07-28T13:39:04.501616148Z                     Max.   :2021-06-12   Max.   :2024-04-28  
2025-07-28T13:39:04.501618678Z                     NA's   :3606         NA's   :4931        
2025-07-28T13:39:04.501620322Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:04.501621863Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.501623391Z  1st Qu.:2020-01-01   1st Qu.:2022-07-15   1st Qu.:2020-01-01  
2025-07-28T13:39:04.501624860Z  Median :2020-01-01   Median :2024-04-30   Median :2020-01-01  
2025-07-28T13:39:04.501626367Z  Mean   :2020-01-01   Mean   :2023-05-31   Mean   :2020-01-01  
2025-07-28T13:39:04.501627862Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:04.501629348Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:04.501631229Z                                                                
2025-07-28T13:39:04.501632741Z    study_stop           fup_start             fup_stop         
2025-07-28T13:39:04.501634253Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.501635709Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-07-15  
2025-07-28T13:39:04.501637156Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30  
2025-07-28T13:39:04.501638620Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-05-31  
2025-07-28T13:39:04.501640102Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30  
2025-07-28T13:39:04.501641554Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30  
2025-07-28T13:39:04.501643036Z                                                                
2025-07-28T13:39:04.501644526Z  outcome_status     cox_weight     tstart           tstop       
2025-07-28T13:39:04.501646066Z  Min.   :0.0000   Min.   :1    Min.   :   0.0   Min.   :   1.0  
2025-07-28T13:39:04.501647536Z  1st Qu.:0.0000   1st Qu.:1    1st Qu.:   0.0   1st Qu.: 242.0  
2025-07-28T13:39:04.501648986Z  Median :0.0000   Median :1    Median :  53.0   Median : 527.0  
2025-07-28T13:39:04.501650433Z  Mean   :0.2242   Mean   :1    Mean   : 207.9   Mean   : 754.3  
2025-07-28T13:39:04.501651832Z  3rd Qu.:0.0000   3rd Qu.:1    3rd Qu.: 312.5   3rd Qu.:1431.0  
2025-07-28T13:39:04.501653253Z  Max.   :1.0000   Max.   :1    Max.   :1581.0   Max.   :1582.0  
2025-07-28T13:39:04.501654728Z                                                                 
2025-07-28T13:39:04.501657265Z  exposure_status     episode          days0_1           days1_7       
2025-07-28T13:39:04.501659056Z  Min.   :0.0000   Min.   : 0.000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:04.501660609Z  1st Qu.:0.0000   1st Qu.: 0.000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:04.501662158Z  Median :1.0000   Median : 1.000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:04.501666442Z  Mean   :0.5296   Mean   : 3.013   Mean   :0.05203   Mean   :0.05203  
2025-07-28T13:39:04.501668519Z  3rd Qu.:1.0000   3rd Qu.: 6.000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:04.501670103Z  Max.   :1.0000   Max.   :11.000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:04.501671679Z                                                                       
2025-07-28T13:39:04.501673170Z     days7_14         days14_28         days28_56         days56_84      
2025-07-28T13:39:04.501674717Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:04.501676157Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:04.501677599Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:04.501679036Z  Mean   :0.05191   Mean   :0.05191   Mean   :0.05179   Mean   :0.05087  
2025-07-28T13:39:04.501680498Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:04.501681919Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:04.501683348Z                                                                         
2025-07-28T13:39:04.501684790Z    days84_183       days183_365       days365_730       days730_1065    
2025-07-28T13:39:04.501686218Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:04.501687665Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:04.501689117Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:04.501690572Z  Mean   :0.05017   Mean   :0.04924   Mean   :0.04587   Mean   :0.03983  
2025-07-28T13:39:04.501692028Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:04.501693466Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:04.501694914Z                                                                         
2025-07-28T13:39:04.501696336Z  days1065_1582                     strat_cat_region  cov_num_age    
2025-07-28T13:39:04.501697743Z  Min.   :0.00000   West Midlands           :1049    Min.   : 18.00  
2025-07-28T13:39:04.501699168Z  1st Qu.:0.00000   North West              :1030    1st Qu.: 40.00  
2025-07-28T13:39:04.501700557Z  Median :0.00000   North East              :1012    Median : 62.00  
2025-07-28T13:39:04.501702357Z  Mean   :0.03391   East                    : 958    Mean   : 63.03  
2025-07-28T13:39:04.501704012Z  3rd Qu.:0.00000   Yorkshire and The Humber: 955    3rd Qu.: 86.00  
2025-07-28T13:39:04.501705473Z  Max.   :1.00000   East Midlands           : 932    Max.   :110.00  
2025-07-28T13:39:04.501706978Z                    (Other)                 :2675                    
2025-07-28T13:39:04.501708473Z  cov_num_age_sq 
2025-07-28T13:39:04.501712096Z  Min.   :  324  
2025-07-28T13:39:04.501713928Z  1st Qu.: 1600  
2025-07-28T13:39:04.501715380Z  Median : 3844  
2025-07-28T13:39:04.501716802Z  Mean   : 4687  
2025-07-28T13:39:04.501718181Z  3rd Qu.: 7396  
2025-07-28T13:39:04.501719545Z  Max.   :12100  
2025-07-28T13:39:04.501720919Z                 
2025-07-28T13:39:04.501722371Z [1] "Add sex covariate"
2025-07-28T13:39:04.520927025Z   patient_id           exposure             outcome          
2025-07-28T13:39:04.520955455Z  Length:8611        Min.   :2020-01-01   Min.   :2020-01-02  
2025-07-28T13:39:04.520956694Z  Class :character   1st Qu.:2020-04-16   1st Qu.:2021-06-15  
2025-07-28T13:39:04.520957601Z  Mode  :character   Median :2020-07-10   Median :2022-06-21  
2025-07-28T13:39:04.520958495Z                     Mean   :2020-07-21   Mean   :2022-06-04  
2025-07-28T13:39:04.520959757Z                     3rd Qu.:2020-10-22   3rd Qu.:2023-07-09  
2025-07-28T13:39:04.520960822Z                     Max.   :2021-06-12   Max.   :2024-04-28  
2025-07-28T13:39:04.520966401Z                     NA's   :3606         NA's   :4931        
2025-07-28T13:39:04.520967369Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:04.520968258Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.520969174Z  1st Qu.:2020-01-01   1st Qu.:2022-07-15   1st Qu.:2020-01-01  
2025-07-28T13:39:04.520970074Z  Median :2020-01-01   Median :2024-04-30   Median :2020-01-01  
2025-07-28T13:39:04.520970985Z  Mean   :2020-01-01   Mean   :2023-05-31   Mean   :2020-01-01  
2025-07-28T13:39:04.520971921Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:04.520972828Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:04.520973749Z                                                                
2025-07-28T13:39:04.520974655Z    study_stop           fup_start             fup_stop         
2025-07-28T13:39:04.520975625Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.520976511Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-07-15  
2025-07-28T13:39:04.520977467Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30  
2025-07-28T13:39:04.520978378Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-05-31  
2025-07-28T13:39:04.520979382Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30  
2025-07-28T13:39:04.520980358Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30  
2025-07-28T13:39:04.520981255Z                                                                
2025-07-28T13:39:04.520982171Z  outcome_status     cox_weight     tstart           tstop       
2025-07-28T13:39:04.520983080Z  Min.   :0.0000   Min.   :1    Min.   :   0.0   Min.   :   1.0  
2025-07-28T13:39:04.520995132Z  1st Qu.:0.0000   1st Qu.:1    1st Qu.:   0.0   1st Qu.: 242.0  
2025-07-28T13:39:04.520996131Z  Median :0.0000   Median :1    Median :  53.0   Median : 527.0  
2025-07-28T13:39:04.520997053Z  Mean   :0.2242   Mean   :1    Mean   : 207.9   Mean   : 754.3  
2025-07-28T13:39:04.520998003Z  3rd Qu.:0.0000   3rd Qu.:1    3rd Qu.: 312.5   3rd Qu.:1431.0  
2025-07-28T13:39:04.520998904Z  Max.   :1.0000   Max.   :1    Max.   :1581.0   Max.   :1582.0  
2025-07-28T13:39:04.520999814Z                                                                 
2025-07-28T13:39:04.521002044Z  exposure_status     episode          days0_1           days1_7       
2025-07-28T13:39:04.521003043Z  Min.   :0.0000   Min.   : 0.000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:04.521003976Z  1st Qu.:0.0000   1st Qu.: 0.000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:04.521004898Z  Median :1.0000   Median : 1.000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:04.521005810Z  Mean   :0.5296   Mean   : 3.013   Mean   :0.05203   Mean   :0.05203  
2025-07-28T13:39:04.521006773Z  3rd Qu.:1.0000   3rd Qu.: 6.000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:04.521007688Z  Max.   :1.0000   Max.   :11.000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:04.521008576Z                                                                       
2025-07-28T13:39:04.521009489Z     days7_14         days14_28         days28_56         days56_84      
2025-07-28T13:39:04.521010392Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:04.521011298Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:04.521012214Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:04.521013134Z  Mean   :0.05191   Mean   :0.05191   Mean   :0.05179   Mean   :0.05087  
2025-07-28T13:39:04.521014052Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:04.521014959Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:04.521015862Z                                                                         
2025-07-28T13:39:04.521016771Z    days84_183       days183_365       days365_730       days730_1065    
2025-07-28T13:39:04.521017676Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:04.521018604Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:04.521019511Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:04.521020423Z  Mean   :0.05017   Mean   :0.04924   Mean   :0.04587   Mean   :0.03983  
2025-07-28T13:39:04.521021346Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:04.521022261Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:04.521024736Z                                                                         
2025-07-28T13:39:04.521025677Z  days1065_1582                     strat_cat_region  cov_num_age    
2025-07-28T13:39:04.521026582Z  Min.   :0.00000   West Midlands           :1049    Min.   : 18.00  
2025-07-28T13:39:04.521027483Z  1st Qu.:0.00000   North West              :1030    1st Qu.: 40.00  
2025-07-28T13:39:04.521028411Z  Median :0.00000   North East              :1012    Median : 62.00  
2025-07-28T13:39:04.521029493Z  Mean   :0.03391   East                    : 958    Mean   : 63.03  
2025-07-28T13:39:04.521030435Z  3rd Qu.:0.00000   Yorkshire and The Humber: 955    3rd Qu.: 86.00  
2025-07-28T13:39:04.521031349Z  Max.   :1.00000   East Midlands           : 932    Max.   :110.00  
2025-07-28T13:39:04.521032255Z                    (Other)                 :2675                    
2025-07-28T13:39:04.521033186Z  cov_num_age_sq  cov_cat_sex  
2025-07-28T13:39:04.521034083Z  Min.   :  324   Female:4444  
2025-07-28T13:39:04.521034951Z  1st Qu.: 1600   Male  :4167  
2025-07-28T13:39:04.521035870Z  Median : 3844                
2025-07-28T13:39:04.521036739Z  Mean   : 4687                
2025-07-28T13:39:04.521037602Z  3rd Qu.: 7396                
2025-07-28T13:39:04.521038507Z  Max.   :12100                
2025-07-28T13:39:04.521039380Z                               
2025-07-28T13:39:04.521040238Z [1] "Additional covariates specified: Add covariate information to data"
2025-07-28T13:39:04.530869903Z [1] "Additional covariates specified: Remove covariates with insufficient variation"
2025-07-28T13:39:04.558031053Z [1] "Identify non-numeric covariates to remove"
2025-07-28T13:39:04.558065608Z [1] "Covariate: cov_cat_sex"
2025-07-28T13:39:04.558069085Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.558923234Z     Var1 Freq
2025-07-28T13:39:04.558934281Z 1 Female   97
2025-07-28T13:39:04.558937040Z 2   Male   92
2025-07-28T13:39:04.559068265Z [1] "Covariate: cov_cat_ethnicity"
2025-07-28T13:39:04.559075771Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.559934073Z      Var1 Freq
2025-07-28T13:39:04.559954618Z 1   White   13
2025-07-28T13:39:04.559955806Z 2 Missing  133
2025-07-28T13:39:04.559956704Z 3   Mixed    7
2025-07-28T13:39:04.559957575Z 4   Asian    9
2025-07-28T13:39:04.559958410Z 5   Black   11
2025-07-28T13:39:04.559959343Z 6   Other   16
2025-07-28T13:39:04.559960245Z [1] "Covariate: cov_cat_imd"
2025-07-28T13:39:04.559961338Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.560622290Z                 Var1 Freq
2025-07-28T13:39:04.560640494Z 1  1 (most deprived)   34
2025-07-28T13:39:04.560641812Z 2                  2   43
2025-07-28T13:39:04.560642565Z 3                  3   37
2025-07-28T13:39:04.560643483Z 4                  4   38
2025-07-28T13:39:04.560644287Z 5 5 (least deprived)   37
2025-07-28T13:39:04.560645147Z [1] "Covariate: cov_bin_hcworker"
2025-07-28T13:39:04.560646089Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.561321911Z    Var1 Freq
2025-07-28T13:39:04.561330607Z 1 FALSE   95
2025-07-28T13:39:04.561332287Z 2  TRUE   94
2025-07-28T13:39:04.561333502Z [1] "Covariate: cov_cat_smoking"
2025-07-28T13:39:04.561334830Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.561947531Z             Var1 Freq
2025-07-28T13:39:04.561949351Z 1   Never smoker    2
2025-07-28T13:39:04.561950225Z 2    Ever smoker   40
2025-07-28T13:39:04.561951088Z 3 Current smoker   67
2025-07-28T13:39:04.561951938Z 4        Missing   80
2025-07-28T13:39:04.561952866Z [1] "Add covariate to removal list"
2025-07-28T13:39:04.562072615Z [1] "Covariate: cov_bin_carehome"
2025-07-28T13:39:04.562074149Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.562793272Z    Var1 Freq
2025-07-28T13:39:04.562796069Z 1 FALSE  161
2025-07-28T13:39:04.562797432Z 2  TRUE   28
2025-07-28T13:39:04.562798750Z [1] "Covariate: cov_bin_obesity"
2025-07-28T13:39:04.562799646Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.563423366Z    Var1 Freq
2025-07-28T13:39:04.563425386Z 1 FALSE  188
2025-07-28T13:39:04.563426607Z 2  TRUE    1
2025-07-28T13:39:04.563427901Z [1] "Add covariate to removal list"
2025-07-28T13:39:04.563429091Z [1] "Covariate: cov_bin_ami"
2025-07-28T13:39:04.563429939Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.564180886Z    Var1 Freq
2025-07-28T13:39:04.564182866Z 1 FALSE  137
2025-07-28T13:39:04.564184275Z 2  TRUE   52
2025-07-28T13:39:04.564185075Z [1] "Covariate: cov_bin_dementia"
2025-07-28T13:39:04.564185907Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.564931419Z    Var1 Freq
2025-07-28T13:39:04.564932535Z 1 FALSE  157
2025-07-28T13:39:04.564933392Z 2  TRUE   32
2025-07-28T13:39:04.564934217Z [1] "Covariate: cov_bin_liver_disease"
2025-07-28T13:39:04.564935161Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.565568271Z    Var1 Freq
2025-07-28T13:39:04.565570251Z 1 FALSE  153
2025-07-28T13:39:04.565576383Z 2  TRUE   36
2025-07-28T13:39:04.565577258Z [1] "Covariate: cov_bin_ckd"
2025-07-28T13:39:04.565578097Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.566231174Z    Var1 Freq
2025-07-28T13:39:04.566233249Z 1 FALSE  143
2025-07-28T13:39:04.566234532Z 2  TRUE   46
2025-07-28T13:39:04.566235715Z [1] "Covariate: cov_bin_cancer"
2025-07-28T13:39:04.566236987Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.566923283Z    Var1 Freq
2025-07-28T13:39:04.566924558Z 1 FALSE   55
2025-07-28T13:39:04.566925515Z 2  TRUE  134
2025-07-28T13:39:04.566926464Z [1] "Covariate: cov_bin_hypertension"
2025-07-28T13:39:04.566927472Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.567730832Z    Var1 Freq
2025-07-28T13:39:04.567733651Z 1 FALSE   50
2025-07-28T13:39:04.567735086Z 2  TRUE  139
2025-07-28T13:39:04.567735962Z [1] "Covariate: cov_bin_diabetes"
2025-07-28T13:39:04.567736820Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.568352273Z    Var1 Freq
2025-07-28T13:39:04.568354354Z 1 FALSE   83
2025-07-28T13:39:04.568355733Z 2  TRUE  106
2025-07-28T13:39:04.568356916Z [1] "Covariate: cov_bin_depression"
2025-07-28T13:39:04.568358131Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.569021875Z    Var1 Freq
2025-07-28T13:39:04.569023019Z 1 FALSE  147
2025-07-28T13:39:04.569023807Z 2  TRUE   42
2025-07-28T13:39:04.569045204Z [1] "Covariate: cov_bin_copd"
2025-07-28T13:39:04.569046716Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.569813651Z    Var1 Freq
2025-07-28T13:39:04.569819221Z 1 FALSE   89
2025-07-28T13:39:04.569820588Z 2  TRUE  100
2025-07-28T13:39:04.569821945Z [1] "Covariate: cov_bin_stroke_all"
2025-07-28T13:39:04.569822893Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.570478925Z    Var1 Freq
2025-07-28T13:39:04.570480935Z 1 FALSE  122
2025-07-28T13:39:04.570482285Z 2  TRUE   67
2025-07-28T13:39:04.570483681Z [1] "Covariate: cov_bin_other_ae"
2025-07-28T13:39:04.570484538Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.571197834Z    Var1 Freq
2025-07-28T13:39:04.571200233Z 1 FALSE  168
2025-07-28T13:39:04.571201659Z 2  TRUE   21
2025-07-28T13:39:04.571203051Z [1] "Covariate: cov_bin_vte"
2025-07-28T13:39:04.571223221Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.571904648Z    Var1 Freq
2025-07-28T13:39:04.571908429Z 1 FALSE  128
2025-07-28T13:39:04.571909343Z 2  TRUE   61
2025-07-28T13:39:04.571910206Z [1] "Covariate: cov_bin_hf"
2025-07-28T13:39:04.571911150Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.572701005Z    Var1 Freq
2025-07-28T13:39:04.572703297Z 1 FALSE  168
2025-07-28T13:39:04.572704773Z 2  TRUE   21
2025-07-28T13:39:04.572706022Z [1] "Covariate: cov_bin_angina"
2025-07-28T13:39:04.572706966Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.573335943Z    Var1 Freq
2025-07-28T13:39:04.573338071Z 1 FALSE  173
2025-07-28T13:39:04.573339339Z 2  TRUE   16
2025-07-28T13:39:04.573340570Z [1] "Covariate: cov_bin_lipidmed"
2025-07-28T13:39:04.573341813Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.573996354Z    Var1 Freq
2025-07-28T13:39:04.573997584Z 1 FALSE  156
2025-07-28T13:39:04.573998366Z 2  TRUE   33
2025-07-28T13:39:04.574055258Z [1] "Covariate: cov_bin_antiplatelet"
2025-07-28T13:39:04.574056491Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.574755080Z    Var1 Freq
2025-07-28T13:39:04.574757594Z 1 FALSE  180
2025-07-28T13:39:04.574758858Z 2  TRUE    9
2025-07-28T13:39:04.574759982Z [1] "Covariate: cov_bin_anticoagulant"
2025-07-28T13:39:04.574760842Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.575397912Z    Var1 Freq
2025-07-28T13:39:04.575399974Z 1 FALSE  175
2025-07-28T13:39:04.575401340Z 2  TRUE   14
2025-07-28T13:39:04.575458762Z [1] "Covariate: cov_bin_cocp"
2025-07-28T13:39:04.575459939Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.576149651Z    Var1 Freq
2025-07-28T13:39:04.576151786Z 1 FALSE  179
2025-07-28T13:39:04.576153039Z 2  TRUE   10
2025-07-28T13:39:04.576212346Z [1] "Covariate: cov_bin_hrt"
2025-07-28T13:39:04.576213525Z [1] "Calculate frequency for each level"
2025-07-28T13:39:04.576881255Z    Var1 Freq
2025-07-28T13:39:04.576882475Z 1 FALSE  175
2025-07-28T13:39:04.576883386Z 2  TRUE   14
2025-07-28T13:39:04.576928891Z [1] "Check strata variables meet covariate threshold"
2025-07-28T13:39:04.576932378Z [1] "Remove covariates"
2025-07-28T13:39:04.604787327Z   patient_id           exposure             outcome          
2025-07-28T13:39:04.604805122Z  Length:8611        Min.   :2020-01-01   Min.   :2020-01-02  
2025-07-28T13:39:04.604806415Z  Class :character   1st Qu.:2020-04-16   1st Qu.:2021-06-15  
2025-07-28T13:39:04.604813225Z  Mode  :character   Median :2020-07-10   Median :2022-06-21  
2025-07-28T13:39:04.604820473Z                     Mean   :2020-07-21   Mean   :2022-06-04  
2025-07-28T13:39:04.604821911Z                     3rd Qu.:2020-10-22   3rd Qu.:2023-07-09  
2025-07-28T13:39:04.604822844Z                     Max.   :2021-06-12   Max.   :2024-04-28  
2025-07-28T13:39:04.604823754Z                     NA's   :3606         NA's   :4931        
2025-07-28T13:39:04.604824666Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:04.604825571Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.604826467Z  1st Qu.:2020-01-01   1st Qu.:2022-07-15   1st Qu.:2020-01-01  
2025-07-28T13:39:04.604827375Z  Median :2020-01-01   Median :2024-04-30   Median :2020-01-01  
2025-07-28T13:39:04.604828262Z  Mean   :2020-01-01   Mean   :2023-05-31   Mean   :2020-01-01  
2025-07-28T13:39:04.604829197Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:04.604830104Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:04.604831032Z                                                                
2025-07-28T13:39:04.604831929Z    study_stop           fup_start             fup_stop         
2025-07-28T13:39:04.604832826Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:04.604833719Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-07-15  
2025-07-28T13:39:04.604834644Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30  
2025-07-28T13:39:04.604835537Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-05-31  
2025-07-28T13:39:04.604836448Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30  
2025-07-28T13:39:04.604837335Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30  
2025-07-28T13:39:04.604838252Z                                                                
2025-07-28T13:39:04.604839181Z  outcome_status     cox_weight     tstart           tstop       
2025-07-28T13:39:04.604840100Z  Min.   :0.0000   Min.   :1    Min.   :   0.0   Min.   :   1.0  
2025-07-28T13:39:04.604841072Z  1st Qu.:0.0000   1st Qu.:1    1st Qu.:   0.0   1st Qu.: 242.0  
2025-07-28T13:39:04.604842006Z  Median :0.0000   Median :1    Median :  53.0   Median : 527.0  
2025-07-28T13:39:04.604842974Z  Mean   :0.2242   Mean   :1    Mean   : 207.9   Mean   : 754.3  
2025-07-28T13:39:04.604843950Z  3rd Qu.:0.0000   3rd Qu.:1    3rd Qu.: 312.5   3rd Qu.:1431.0  
2025-07-28T13:39:04.604844901Z  Max.   :1.0000   Max.   :1    Max.   :1581.0   Max.   :1582.0  
2025-07-28T13:39:04.604845860Z                                                                 
2025-07-28T13:39:04.604856560Z  exposure_status     episode          days0_1           days1_7       
2025-07-28T13:39:04.604857636Z  Min.   :0.0000   Min.   : 0.000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:04.604860010Z  1st Qu.:0.0000   1st Qu.: 0.000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:04.604861001Z  Median :1.0000   Median : 1.000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:04.604861960Z  Mean   :0.5296   Mean   : 3.013   Mean   :0.05203   Mean   :0.05203  
2025-07-28T13:39:04.604862950Z  3rd Qu.:1.0000   3rd Qu.: 6.000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:04.604863908Z  Max.   :1.0000   Max.   :11.000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:04.604864886Z                                                                       
2025-07-28T13:39:04.604865827Z     days7_14         days14_28         days28_56         days56_84      
2025-07-28T13:39:04.604866790Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:04.604867752Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:04.604868705Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:04.604869657Z  Mean   :0.05191   Mean   :0.05191   Mean   :0.05179   Mean   :0.05087  
2025-07-28T13:39:04.604870628Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:04.604871568Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:04.604872534Z                                                                         
2025-07-28T13:39:04.604873468Z    days84_183       days183_365       days365_730       days730_1065    
2025-07-28T13:39:04.604874429Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:04.604875366Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:04.604876322Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:04.604877292Z  Mean   :0.05017   Mean   :0.04924   Mean   :0.04587   Mean   :0.03983  
2025-07-28T13:39:04.604878287Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:04.604879427Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:04.604880389Z                                                                         
2025-07-28T13:39:04.604881327Z  days1065_1582                     strat_cat_region  cov_num_age    
2025-07-28T13:39:04.604882253Z  Min.   :0.00000   West Midlands           :1049    Min.   : 18.00  
2025-07-28T13:39:04.604883194Z  1st Qu.:0.00000   North West              :1030    1st Qu.: 40.00  
2025-07-28T13:39:04.604884137Z  Median :0.00000   North East              :1012    Median : 62.00  
2025-07-28T13:39:04.604885379Z  Mean   :0.03391   East                    : 958    Mean   : 63.03  
2025-07-28T13:39:04.604886382Z  3rd Qu.:0.00000   Yorkshire and The Humber: 955    3rd Qu.: 86.00  
2025-07-28T13:39:04.604887368Z  Max.   :1.00000   East Midlands           : 932    Max.   :110.00  
2025-07-28T13:39:04.604889460Z                    (Other)                 :2675                    
2025-07-28T13:39:04.604890458Z  cov_num_age_sq  cov_cat_sex   cov_cat_ethnicity             cov_cat_imd  
2025-07-28T13:39:04.604891408Z  Min.   :  324   Female:4444   White  : 618      1 (most deprived) :1672  
2025-07-28T13:39:04.604892401Z  1st Qu.: 1600   Male  :4167   Missing:5915      2                 :1697  
2025-07-28T13:39:04.604893366Z  Median : 3844                 Mixed  : 240      3                 :1669  
2025-07-28T13:39:04.604894319Z  Mean   : 4687                 Asian  : 557      4                 :1833  
2025-07-28T13:39:04.604895287Z  3rd Qu.: 7396                 Black  : 520      5 (least deprived):1740  
2025-07-28T13:39:04.604896248Z  Max.   :12100                 Other  : 761                               
2025-07-28T13:39:04.604897185Z                                                                           
2025-07-28T13:39:04.604898166Z  cov_num_consrate2019 cov_bin_hcworker cov_bin_carehome cov_bin_ami    
2025-07-28T13:39:04.604899119Z  Min.   :0.0000       Mode :logical    Mode :logical    Mode :logical  
2025-07-28T13:39:04.604900072Z  1st Qu.:0.0000       FALSE:4104       FALSE:7151       FALSE:6286     
2025-07-28T13:39:04.604901010Z  Median :0.0000       TRUE :4507       TRUE :1460       TRUE :2325     
2025-07-28T13:39:04.604901991Z  Mean   :0.0389                                                        
2025-07-28T13:39:04.604902976Z  3rd Qu.:0.0000                                                        
2025-07-28T13:39:04.604903947Z  Max.   :2.0000                                                        
2025-07-28T13:39:04.604904888Z                                                                        
2025-07-28T13:39:04.604905832Z  cov_bin_dementia cov_bin_liver_disease cov_bin_ckd     cov_bin_cancer 
2025-07-28T13:39:04.604906776Z  Mode :logical    Mode :logical         Mode :logical   Mode :logical  
2025-07-28T13:39:04.604907724Z  FALSE:7437       FALSE:6875            FALSE:6585      FALSE:2162     
2025-07-28T13:39:04.604908667Z  TRUE :1174       TRUE :1736            TRUE :2026      TRUE :6449     
2025-07-28T13:39:04.604909619Z                                                                        
2025-07-28T13:39:04.604910616Z                                                                        
2025-07-28T13:39:04.604911585Z                                                                        
2025-07-28T13:39:04.604912540Z                                                                        
2025-07-28T13:39:04.604913608Z  cov_bin_hypertension cov_bin_diabetes cov_bin_depression cov_bin_copd   
2025-07-28T13:39:04.604914604Z  Mode :logical        Mode :logical    Mode :logical      Mode :logical  
2025-07-28T13:39:04.604915564Z  FALSE:2451           FALSE:3884       FALSE:6652         FALSE:3811     
2025-07-28T13:39:04.604916548Z  TRUE :6160           TRUE :4727       TRUE :1959         TRUE :4800     
2025-07-28T13:39:04.604918656Z                                                                          
2025-07-28T13:39:04.604919717Z                                                                          
2025-07-28T13:39:04.604920673Z                                                                          
2025-07-28T13:39:04.604921660Z                                                                          
2025-07-28T13:39:04.604922639Z  cov_bin_stroke_all cov_bin_other_ae cov_bin_vte     cov_bin_hf     
2025-07-28T13:39:04.604923634Z  Mode :logical      Mode :logical    Mode :logical   Mode :logical  
2025-07-28T13:39:04.604924571Z  FALSE:5436         FALSE:7743       FALSE:5789      FALSE:7776     
2025-07-28T13:39:04.604925512Z  TRUE :3175         TRUE :868        TRUE :2822      TRUE :835      
2025-07-28T13:39:04.604926450Z                                                                     
2025-07-28T13:39:04.604927494Z                                                                     
2025-07-28T13:39:04.604928460Z                                                                     
2025-07-28T13:39:04.604929417Z                                                                     
2025-07-28T13:39:04.604931616Z  cov_bin_angina  cov_bin_lipidmed cov_bin_antiplatelet cov_bin_anticoagulant
2025-07-28T13:39:04.604932635Z  Mode :logical   Mode :logical    Mode :logical        Mode :logical        
2025-07-28T13:39:04.604933585Z  FALSE:7872      FALSE:7085       FALSE:8060           FALSE:8174           
2025-07-28T13:39:04.604934540Z  TRUE :739       TRUE :1526       TRUE :551            TRUE :437            
2025-07-28T13:39:04.604935512Z                                                                             
2025-07-28T13:39:04.604936539Z                                                                             
2025-07-28T13:39:04.604937513Z                                                                             
2025-07-28T13:39:04.604938489Z                                                                             
2025-07-28T13:39:04.604939483Z  cov_bin_cocp    cov_bin_hrt    
2025-07-28T13:39:04.604940455Z  Mode :logical   Mode :logical  
2025-07-28T13:39:04.604941381Z  FALSE:8285      FALSE:8029     
2025-07-28T13:39:04.604942320Z  TRUE :326       TRUE :582      
2025-07-28T13:39:04.604943242Z                                 
2025-07-28T13:39:04.604944157Z                                 
2025-07-28T13:39:04.604945097Z                                 
2025-07-28T13:39:04.604951243Z                                 
2025-07-28T13:39:04.604952189Z [1] "Removed covariates: cov_cat_smoking" "Removed covariates: cov_bin_obesity"
2025-07-28T13:39:04.604953390Z [1] "Collapsed covariates: "
2025-07-28T13:39:04.604954447Z [1] "Save analysis ready dataset"
2025-07-28T13:39:04.618961841Z [1] "Perform Cox modelling"
2025-07-28T13:39:04.638332898Z [1] "Define model formula"
2025-07-28T13:39:04.638345489Z [1] "Add age covariate"
2025-07-28T13:39:04.638346787Z [1] "Specify knot placement for age spline"
2025-07-28T13:39:04.639003063Z [1] "Knots will be placed at: 28, 62, 100"
2025-07-28T13:39:04.639009386Z [1] "Surv(tstart, tstop, outcome_status) ~ days0_1 + days1_7 + days7_14 + days14_28 + days28_56 + days56_84 + days84_183 + days183_365 + days365_730 + days730_1065 + days1065_1582 + cov_cat_sex + rms::strat(strat_cat_region) + cluster(patient_id) + rms::rcs(cov_num_age, parms=knot_placement)"
2025-07-28T13:39:04.639010942Z [1] "Fit Cox model"
2025-07-28T13:39:05.390927512Z Cox Proportional Hazards Model
2025-07-28T13:39:05.390948691Z 
2025-07-28T13:39:05.390950782Z rms::cph(formula = as.formula(surv_formula), data = df, weights = df$cox_weight, 
2025-07-28T13:39:05.390952333Z     method = "breslow", x = TRUE, y = TRUE, surv = TRUE)
2025-07-28T13:39:05.390953825Z 
2025-07-28T13:39:05.390955063Z                         Model Tests      Discrimination    
2025-07-28T13:39:05.390956426Z                                                 Indexes    
2025-07-28T13:39:05.390957921Z Obs       8611    LR chi2     16.87      R2       0.002    
2025-07-28T13:39:05.390959305Z Events    1931    d.f.           14    R2(14,8611)0.000    
2025-07-28T13:39:05.390960702Z Center -0.4331    Pr(> chi2) 0.2633    R2(14,1931)0.001    
2025-07-28T13:39:05.390963977Z                   Score chi2  16.20      Dxy      0.041    
2025-07-28T13:39:05.390965384Z                   Pr(> chi2) 0.3016                        
2025-07-28T13:39:05.390966800Z 
2025-07-28T13:39:05.390968175Z                  Coef    S.E.   Wald Z Pr(>|Z|)
2025-07-28T13:39:05.390969634Z days0_1          -2.0201 0.0881 -22.92 <0.0001 
2025-07-28T13:39:05.390971084Z days1_7           0.1646 1.0026   0.16 0.8696  
2025-07-28T13:39:05.390972428Z days7_14         -2.0192 0.0663 -30.45 <0.0001 
2025-07-28T13:39:05.390973790Z days14_28        -0.6808 0.9869  -0.69 0.4903  
2025-07-28T13:39:05.390975237Z days28_56         0.7126 0.3434   2.08 0.0380  
2025-07-28T13:39:05.390976564Z days56_84        -0.0155 0.5016  -0.03 0.9753  
2025-07-28T13:39:05.390977887Z days84_183       -0.5929 0.3535  -1.68 0.0935  
2025-07-28T13:39:05.390979227Z days183_365      -0.0781 0.2053  -0.38 0.7034  
2025-07-28T13:39:05.390980556Z days365_730      -0.2016 0.1504  -1.34 0.1802  
2025-07-28T13:39:05.390981923Z days730_1065     -0.1293 0.1553  -0.83 0.4050  
2025-07-28T13:39:05.390983250Z days1065_1582     0.0493 0.1474   0.33 0.7381  
2025-07-28T13:39:05.390984586Z cov_cat_sex=Male -0.0565 0.0455  -1.24 0.2145  
2025-07-28T13:39:05.390994728Z cov_num_age      -0.0032 0.0023  -1.38 0.1663  
2025-07-28T13:39:05.390995765Z cov_num_age'      0.0024 0.0030   0.79 0.4275  
2025-07-28T13:39:05.390996798Z 
2025-07-28T13:39:05.390997798Z [1] "Format results"
2025-07-28T13:39:05.391445771Z [1] "Add covariates to model formula"
2025-07-28T13:39:05.391463281Z [1] "Surv(tstart, tstop, outcome_status) ~ days0_1 + days1_7 + days7_14 + days14_28 + days28_56 + days56_84 + days84_183 + days183_365 + days365_730 + days730_1065 + days1065_1582 + cov_cat_sex + rms::strat(strat_cat_region) + cluster(patient_id) + rms::rcs(cov_num_age, parms=knot_placement) + cov_cat_ethnicity + cov_cat_imd + cov_num_consrate2019 + cov_bin_hcworker + cov_bin_carehome + cov_bin_ami + cov_bin_dementia + cov_bin_liver_disease + cov_bin_ckd + cov_bin_cancer + cov_bin_hypertension + cov_bin_diabetes + cov_bin_depression + cov_bin_copd + cov_bin_stroke_all + cov_bin_other_ae + cov_bin_vte + cov_bin_hf + cov_bin_angina + cov_bin_lipidmed + cov_bin_antiplatelet + cov_bin_anticoagulant + cov_bin_cocp + cov_bin_hrt"
2025-07-28T13:39:05.391469147Z [1] "Fit Cox model with covariates"
2025-07-28T13:39:05.686994679Z Cox Proportional Hazards Model
2025-07-28T13:39:05.687034810Z 
2025-07-28T13:39:05.687039701Z rms::cph(formula = as.formula(surv_formula_adj), data = df, weights = df$cox_weight, 
2025-07-28T13:39:05.687043087Z     method = "breslow", x = TRUE, y = TRUE, surv = TRUE)
2025-07-28T13:39:05.687046508Z 
2025-07-28T13:39:05.687049101Z                       Model Tests      Discrimination    
2025-07-28T13:39:05.687051760Z                                               Indexes    
2025-07-28T13:39:05.687054374Z Obs     8611    LR chi2     45.95      R2       0.005    
2025-07-28T13:39:05.687056890Z Events  1931    d.f.           45    R2(45,8611)0.000    
2025-07-28T13:39:05.687059352Z Center -0.46    Pr(> chi2) 0.4327    R2(45,1931)0.000    
2025-07-28T13:39:05.687062207Z                 Score chi2  45.84      Dxy      0.088    
2025-07-28T13:39:05.687064749Z                 Pr(> chi2) 0.4371                        
2025-07-28T13:39:05.687067358Z 
2025-07-28T13:39:05.687069759Z                                Coef    S.E.   Wald Z Pr(>|Z|)
2025-07-28T13:39:05.687072392Z days0_1                        -2.0293 0.0887 -22.87 <0.0001 
2025-07-28T13:39:05.687075087Z days1_7                         0.1504 1.0028   0.15 0.8808  
2025-07-28T13:39:05.687077590Z days7_14                       -2.0309 0.0667 -30.43 <0.0001 
2025-07-28T13:39:05.687080087Z days14_28                      -0.6929 0.9873  -0.70 0.4828  
2025-07-28T13:39:05.687082551Z days28_56                       0.7031 0.3438   2.04 0.0409  
2025-07-28T13:39:05.687084999Z days56_84                      -0.0284 0.5017  -0.06 0.9548  
2025-07-28T13:39:05.687087495Z days84_183                     -0.6061 0.3536  -1.71 0.0865  
2025-07-28T13:39:05.687089939Z days183_365                    -0.0930 0.2055  -0.45 0.6509  
2025-07-28T13:39:05.687103861Z days365_730                    -0.2197 0.1506  -1.46 0.1446  
2025-07-28T13:39:05.687106307Z days730_1065                   -0.1430 0.1557  -0.92 0.3582  
2025-07-28T13:39:05.687108280Z days1065_1582                   0.0375 0.1481   0.25 0.8000  
2025-07-28T13:39:05.687110124Z cov_cat_sex=Male               -0.0575 0.0460  -1.25 0.2113  
2025-07-28T13:39:05.687111869Z cov_num_age                    -0.0030 0.0023  -1.30 0.1945  
2025-07-28T13:39:05.687113745Z cov_num_age'                    0.0022 0.0030   0.73 0.4630  
2025-07-28T13:39:05.687115583Z cov_cat_ethnicity=Missing       0.0053 0.0879   0.06 0.9517  
2025-07-28T13:39:05.687117366Z cov_cat_ethnicity=Mixed         0.0576 0.1580   0.36 0.7157  
2025-07-28T13:39:05.687119144Z cov_cat_ethnicity=Asian         0.0409 0.1234   0.33 0.7404  
2025-07-28T13:39:05.687120868Z cov_cat_ethnicity=Black         0.0532 0.1228   0.43 0.6646  
2025-07-28T13:39:05.687122585Z cov_cat_ethnicity=Other        -0.0742 0.1151  -0.64 0.5192  
2025-07-28T13:39:05.687124275Z cov_cat_imd=2                  -0.0995 0.0731  -1.36 0.1735  
2025-07-28T13:39:05.687125975Z cov_cat_imd=3                  -0.1202 0.0731  -1.64 0.1003  
2025-07-28T13:39:05.687127557Z cov_cat_imd=4                   0.0288 0.0719   0.40 0.6887  
2025-07-28T13:39:05.687130219Z cov_cat_imd=5 (least deprived) -0.0737 0.0714  -1.03 0.3022  
2025-07-28T13:39:05.687132053Z cov_num_consrate2019           -0.0236 0.1133  -0.21 0.8349  
2025-07-28T13:39:05.687152387Z cov_bin_hcworker                0.0690 0.0461   1.50 0.1343  
2025-07-28T13:39:05.687154709Z cov_bin_carehome               -0.0020 0.0628  -0.03 0.9750  
2025-07-28T13:39:05.687156459Z cov_bin_ami                     0.0300 0.0536   0.56 0.5761  
2025-07-28T13:39:05.687158112Z cov_bin_dementia                0.0831 0.0710   1.17 0.2421  
2025-07-28T13:39:05.687159809Z cov_bin_liver_disease           0.0365 0.0583   0.63 0.5315  
2025-07-28T13:39:05.687161473Z cov_bin_ckd                     0.0044 0.0558   0.08 0.9365  
2025-07-28T13:39:05.687163147Z cov_bin_cancer                 -0.0162 0.0623  -0.26 0.7954  
2025-07-28T13:39:05.687164768Z cov_bin_hypertension            0.0510 0.0551   0.93 0.3547  
2025-07-28T13:39:05.687166382Z cov_bin_diabetes               -0.0339 0.0491  -0.69 0.4900  
2025-07-28T13:39:05.687168042Z cov_bin_depression              0.0014 0.0571   0.03 0.9799  
2025-07-28T13:39:05.687169689Z cov_bin_copd                   -0.0560 0.0558  -1.00 0.3158  
2025-07-28T13:39:05.687171298Z cov_bin_stroke_all             -0.0844 0.0510  -1.66 0.0978  
2025-07-28T13:39:05.687172900Z cov_bin_other_ae                0.0845 0.0805   1.05 0.2934  
2025-07-28T13:39:05.687174587Z cov_bin_vte                     0.0048 0.0525   0.09 0.9266  
2025-07-28T13:39:05.687176206Z cov_bin_hf                     -0.0768 0.0749  -1.03 0.3053  
2025-07-28T13:39:05.687181767Z cov_bin_angina                  0.0061 0.0863   0.07 0.9434  
2025-07-28T13:39:05.687183740Z cov_bin_lipidmed                0.0008 0.0606   0.01 0.9888  
2025-07-28T13:39:05.687185392Z cov_bin_antiplatelet           -0.1231 0.0880  -1.40 0.1618  
2025-07-28T13:39:05.687187453Z cov_bin_anticoagulant           0.2646 0.0953   2.78 0.0055  
2025-07-28T13:39:05.687189033Z cov_bin_cocp                   -0.0258 0.1264  -0.20 0.8382  
2025-07-28T13:39:05.687190641Z cov_bin_hrt                     0.0716 0.0917   0.78 0.4347  
2025-07-28T13:39:05.687192401Z 
2025-07-28T13:39:05.687193971Z [1] "Format results"
2025-07-28T13:39:05.687769532Z [1] "Bind to other results"
2025-07-28T13:39:05.688061578Z [1] "Return results"
2025-07-28T13:39:05.688164540Z [1] "Merge results with number of events and person time"
2025-07-28T13:39:05.692112921Z      term                lnhr             se_lnhr            model          
2025-07-28T13:39:05.692163685Z  Length:59          Min.   :-2.03086   Min.   :0.002312   Length:59         
2025-07-28T13:39:05.692170467Z  Class :character   1st Qu.:-0.09625   1st Qu.:0.057712   Class :character  
2025-07-28T13:39:05.692173043Z  Mode  :character   Median :-0.01553   Median :0.087913   Mode  :character  
2025-07-28T13:39:05.692175027Z                     Mean   :-0.16601   Mean   :0.178846                     
2025-07-28T13:39:05.692176994Z                     3rd Qu.: 0.03701   3rd Qu.:0.152946                     
2025-07-28T13:39:05.692178940Z                     Max.   : 0.71259   Max.   :1.002767                     
2025-07-28T13:39:05.692180943Z                                                                             
2025-07-28T13:39:05.692183003Z  surv_formula       covariate_removed  covariate_collapsed obs_warning       
2025-07-28T13:39:05.692184861Z  Length:59          Length:59          Length:59           Length:59         
2025-07-28T13:39:05.692186728Z  Class :character   Class :character   Class :character    Class :character  
2025-07-28T13:39:05.692198085Z  Mode  :character   Mode  :character   Mode  :character    Mode  :character  
2025-07-28T13:39:05.692201139Z                                                                              
2025-07-28T13:39:05.692203085Z                                                                              
2025-07-28T13:39:05.692205382Z                                                                              
2025-07-28T13:39:05.692207253Z                                                                              
2025-07-28T13:39:05.692209103Z     N_events     person_time_total outcome_time_median
2025-07-28T13:39:05.692211067Z  Min.   : 0.00   Min.   :   448    Min.   :   2.0     
2025-07-28T13:39:05.692245294Z  1st Qu.: 1.00   1st Qu.:  3909    1st Qu.:  42.0     
2025-07-28T13:39:05.692279138Z  Median : 8.00   Median : 12369    Median :  94.5     
2025-07-28T13:39:05.692295192Z  Mean   :17.18   Mean   : 43358    Mean   : 347.3     
2025-07-28T13:39:05.692298215Z  3rd Qu.:40.00   3rd Qu.: 80859    3rd Qu.: 539.0     
2025-07-28T13:39:05.692300495Z  Max.   :50.00   Max.   :134724    Max.   :1245.5     
2025-07-28T13:39:05.692302534Z  NA's   :37      NA's   :37        NA's   :41         
2025-07-28T13:39:05.692350789Z [1] "Add dummy row for days_pre term"
2025-07-28T13:39:05.696635729Z      term                lnhr             se_lnhr            model          
2025-07-28T13:39:05.696666259Z  Length:61          Min.   :-2.03086   Min.   :0.002312   Length:61         
2025-07-28T13:39:05.696670390Z  Class :character   1st Qu.:-0.09625   1st Qu.:0.057712   Class :character  
2025-07-28T13:39:05.696672857Z  Mode  :character   Median :-0.01553   Median :0.087913   Mode  :character  
2025-07-28T13:39:05.696674862Z                     Mean   :-0.16601   Mean   :0.178846                     
2025-07-28T13:39:05.696676713Z                     3rd Qu.: 0.03701   3rd Qu.:0.152946                     
2025-07-28T13:39:05.696678508Z                     Max.   : 0.71259   Max.   :1.002767                     
2025-07-28T13:39:05.696680277Z                     NA's   :2          NA's   :2                            
2025-07-28T13:39:05.696682118Z  surv_formula       covariate_removed  covariate_collapsed obs_warning       
2025-07-28T13:39:05.696683971Z  Length:61          Length:61          Length:61           Length:61         
2025-07-28T13:39:05.696689824Z  Class :character   Class :character   Class :character    Class :character  
2025-07-28T13:39:05.696691893Z  Mode  :character   Mode  :character   Mode  :character    Mode  :character  
2025-07-28T13:39:05.696693724Z                                                                              
2025-07-28T13:39:05.696696072Z                                                                              
2025-07-28T13:39:05.696697826Z                                                                              
2025-07-28T13:39:05.696699625Z                                                                              
2025-07-28T13:39:05.696701496Z     N_events      person_time_total outcome_time_median
2025-07-28T13:39:05.696703467Z  Min.   :   0.0   Min.   :    448   Min.   :   2.0     
2025-07-28T13:39:05.696705269Z  1st Qu.:   1.0   1st Qu.:   5470   1st Qu.:  42.0     
2025-07-28T13:39:05.696707103Z  Median :   8.0   Median :  27308   Median : 174.8     
2025-07-28T13:39:05.696711730Z  Mean   : 160.9   Mean   : 392116   Mean   : 390.7     
2025-07-28T13:39:05.696713801Z  3rd Qu.:  45.5   3rd Qu.:  88702   3rd Qu.: 781.5     
2025-07-28T13:39:05.696715601Z  Max.   :1742.0   Max.   :4228447   Max.   :1245.5     
2025-07-28T13:39:05.696717404Z  NA's   :37       NA's   :37        NA's   :41         
2025-07-28T13:39:05.696725472Z [1] "Tidy variables for outputting"
2025-07-28T13:39:05.697474093Z Warning messages:
2025-07-28T13:39:05.697496034Z 1: In rms::datadist(df) : index_date is constant
2025-07-28T13:39:05.697498442Z 2: In rms::datadist(df) : fup_start is constant
2025-07-28T13:39:05.697500108Z 3: In rms::datadist(df) : cox_weight is constant
2025-07-28T13:39:05.697501674Z 4: In rms::datadist(df) : index_date is constant
2025-07-28T13:39:05.697524338Z 5: In rms::datadist(df) : fup_start is constant
2025-07-28T13:39:05.697537002Z 6: In rms::datadist(df) : cox_weight is constant
2025-07-28T13:39:05.697557446Z [1] "Save output"
2025-07-28T13:39:05.702785990Z     model             exposure           outcome              term          
2025-07-28T13:39:05.702830634Z  Length:61          Length:61          Length:61          Length:61         
2025-07-28T13:39:05.702835390Z  Class :character   Class :character   Class :character   Class :character  
2025-07-28T13:39:05.702837649Z  Mode  :character   Mode  :character   Mode  :character   Mode  :character  
2025-07-28T13:39:05.702839783Z                                                                             
2025-07-28T13:39:05.702841722Z                                                                             
2025-07-28T13:39:05.702843798Z                                                                             
2025-07-28T13:39:05.702845657Z                                                                             
2025-07-28T13:39:05.702847470Z       lnhr             se_lnhr               hr            conf_low      
2025-07-28T13:39:05.702849334Z  Min.   :-2.03086   Min.   :0.002312   Min.   :0.1312   Min.   :0.07222  
2025-07-28T13:39:05.702851139Z  1st Qu.:-0.09625   1st Qu.:0.057712   1st Qu.:0.9082   1st Qu.:0.61379  
2025-07-28T13:39:05.702852929Z  Median :-0.01553   Median :0.087913   Median :0.9846   Median :0.81796  
2025-07-28T13:39:05.702854725Z  Mean   :-0.16601   Mean   :0.178846   Mean   :0.9380   Mean   :0.71188  
2025-07-28T13:39:05.702856543Z  3rd Qu.: 0.03701   3rd Qu.:0.152946   3rd Qu.:1.0377   3rd Qu.:0.89901  
2025-07-28T13:39:05.702858404Z  Max.   : 0.71259   Max.   :1.002767   Max.   :2.0393   Max.   :1.08099  
2025-07-28T13:39:05.702860221Z  NA's   :2          NA's   :2          NA's   :2        NA's   :2        
2025-07-28T13:39:05.702862086Z    conf_high         N_total       N_exposed      N_events     
2025-07-28T13:39:05.702872514Z  Min.   :0.1496   Min.   :4054   Min.   :448   Min.   :   0.0  
2025-07-28T13:39:05.702874985Z  1st Qu.:1.0596   1st Qu.:4054   1st Qu.:448   1st Qu.:   1.0  
2025-07-28T13:39:05.702876958Z  Median :1.1628   Median :4054   Median :448   Median :   8.0  
2025-07-28T13:39:05.702878838Z  Mean   :1.5645   Mean   :4054   Mean   :448   Mean   : 160.9  
2025-07-28T13:39:05.702880676Z  3rd Qu.:1.3342   3rd Qu.:4054   3rd Qu.:448   3rd Qu.:  45.5  
2025-07-28T13:39:05.702894714Z  Max.   :8.4123   Max.   :4054   Max.   :448   Max.   :1742.0  
2025-07-28T13:39:05.702897332Z  NA's   :2                                     NA's   :37      
2025-07-28T13:39:05.702899228Z  person_time_total outcome_time_median covariate_collapsed strata_warning    
2025-07-28T13:39:05.702901129Z  Min.   :    448   Min.   :   2.0      Length:61           Length:61         
2025-07-28T13:39:05.702903059Z  1st Qu.:   5470   1st Qu.:  42.0      Class :character    Class :character  
2025-07-28T13:39:05.702905015Z  Median :  27308   Median : 174.8      Mode  :character    Mode  :character  
2025-07-28T13:39:05.702912846Z  Mean   : 392116   Mean   : 390.7                                            
2025-07-28T13:39:05.702915217Z  3rd Qu.:  88702   3rd Qu.: 781.5                                            
2025-07-28T13:39:05.702917172Z  Max.   :4228447   Max.   :1245.5                                            
2025-07-28T13:39:05.702919011Z  NA's   :37        NA's   :41                                                
2025-07-28T13:39:05.702920846Z  obs_warning        surv_formula          input             cox_ipw         
2025-07-28T13:39:05.702922740Z  Length:61          Length:61          Length:61          Length:61         
2025-07-28T13:39:05.702929911Z  Class :character   Class :character   Class :character   Class :character  
2025-07-28T13:39:05.702932335Z  Mode  :character   Mode  :character   Mode  :character   Mode  :character  
2025-07-28T13:39:05.702940215Z                                                                             
2025-07-28T13:39:05.702942579Z                                                                             
2025-07-28T13:39:05.702953139Z                                                                             
2025-07-28T13:39:05.702955596Z                                                                             


job_definition_id: isf2ka45zcexz3ji
job_definition_request_id: 4204ecd689
commit: 80168305fee16e2edc662c398b58e7a4d61658cd
docker_image_id: sha256:13f6c027b613bda2d60fbc6dbcd8f7263e1224f1e45a4797375e438f28fd0e5d
exit_code: 0
created_at: 1753709846
completed_at: 1753709948
status_message: Completed successfully

outputs:
  output/model/model_output-cohort_prevax-main-ami.csv  - moderately_sensitive
