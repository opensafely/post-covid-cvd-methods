2025-07-28T13:39:10.684876421Z [1] "Record input arguments"
2025-07-28T13:39:10.686875574Z                   argument
2025-07-28T13:39:10.686884648Z 1                 df_input
2025-07-28T13:39:10.686885987Z 2                      ipw
2025-07-28T13:39:10.686886964Z 3           sample_exposed
2025-07-28T13:39:10.686887905Z 4                 exposure
2025-07-28T13:39:10.686889330Z 5                  outcome
2025-07-28T13:39:10.686890385Z 6                   strata
2025-07-28T13:39:10.686891351Z 7            covariate_sex
2025-07-28T13:39:10.686892311Z 8            covariate_age
2025-07-28T13:39:10.686893271Z 9          covariate_other
2025-07-28T13:39:10.686894222Z 10               cox_start
2025-07-28T13:39:10.686895163Z 11                cox_stop
2025-07-28T13:39:10.686896127Z 12             study_start
2025-07-28T13:39:10.686897101Z 13              study_stop
2025-07-28T13:39:10.686898058Z 14              cut_points
2025-07-28T13:39:10.686898994Z 15       controls_per_case
2025-07-28T13:39:10.686899957Z 16   total_event_threshold
2025-07-28T13:39:10.686900906Z 17 episode_event_threshold
2025-07-28T13:39:10.686901861Z 18     covariate_threshold
2025-07-28T13:39:10.686902818Z 19              age_spline
2025-07-28T13:39:10.686903763Z 20               df_output
2025-07-28T13:39:10.686904736Z 21                    seed
2025-07-28T13:39:10.686905686Z 22     save_analysis_ready
2025-07-28T13:39:10.686906611Z 23            run_analysis
2025-07-28T13:39:10.686907574Z 24                  config
2025-07-28T13:39:10.686908532Z 25                    help
2025-07-28T13:39:10.686909743Z                                                                                                                                                                                                                                                                                                                                                                                                                                      value
2025-07-28T13:39:10.686911958Z 1                                                                                                                                                                                                                                                                                                                                                                                    model/model_input-cohort_prevax-main-stroke_sahhs.rds
2025-07-28T13:39:10.686913506Z 2                                                                                                                                                                                                                                                                                                                                                                                                                                     TRUE
2025-07-28T13:39:10.686921831Z 3                                                                                                                                                                                                                                                                                                                                                                                                                                    FALSE
2025-07-28T13:39:10.686923521Z 4                                                                                                                                                                                                                                                                                                                                                                                                                                 exp_date
2025-07-28T13:39:10.686925071Z 5                                                                                                                                                                                                                                                                                                                                                                                                                                 out_date
2025-07-28T13:39:10.686926575Z 6                                                                                                                                                                                                                                                                                                                                                                                                                         strat_cat_region
2025-07-28T13:39:10.686928257Z 7                                                                                                                                                                                                                                                                                                                                                                                                                              cov_cat_sex
2025-07-28T13:39:10.686929742Z 8                                                                                                                                                                                                                                                                                                                                                                                                                              cov_num_age
2025-07-28T13:39:10.686931249Z 9  cov_cat_ethnicity;cov_cat_imd;cov_num_consrate2019;cov_bin_hcworker;cov_cat_smoking;cov_bin_carehome;cov_bin_obesity;cov_bin_ami;cov_bin_dementia;cov_bin_liver_disease;cov_bin_ckd;cov_bin_cancer;cov_bin_hypertension;cov_bin_diabetes;cov_bin_depression;cov_bin_copd;cov_bin_stroke_all;cov_bin_other_ae;cov_bin_vte;cov_bin_hf;cov_bin_angina;cov_bin_lipidmed;cov_bin_antiplatelet;cov_bin_anticoagulant;cov_bin_cocp;cov_bin_hrt
2025-07-28T13:39:10.686932744Z 10                                                                                                                                                                                                                                                                                                                                                                                                                              index_date
2025-07-28T13:39:10.686934265Z 11                                                                                                                                                                                                                                                                                                                                                                                                                        end_date_outcome
2025-07-28T13:39:10.686937341Z 12                                                                                                                                                                                                                                                                                                                                                                                                                              2020-01-01
2025-07-28T13:39:10.686938910Z 13                                                                                                                                                                                                                                                                                                                                                                                                                              2024-04-30
2025-07-28T13:39:10.686940486Z 14                                                                                                                                                                                                                                                                                                                                                                                                   1;7;14;28;56;84;183;365;730;1065;1582
2025-07-28T13:39:10.686941998Z 15                                                                                                                                                                                                                                                                                                                                                                                                                                      20
2025-07-28T13:39:10.686943499Z 16                                                                                                                                                                                                                                                                                                                                                                                                                                      50
2025-07-28T13:39:10.686945138Z 17                                                                                                                                                                                                                                                                                                                                                                                                                                       5
2025-07-28T13:39:10.686946680Z 18                                                                                                                                                                                                                                                                                                                                                                                                                                       5
2025-07-28T13:39:10.686948225Z 19                                                                                                                                                                                                                                                                                                                                                                                                                                    TRUE
2025-07-28T13:39:10.686951048Z 20                                                                                                                                                                                                                                                                                                                                                                                  model/model_output-cohort_prevax-main-stroke_sahhs.csv
2025-07-28T13:39:10.686952537Z 21                                                                                                                                                                                                                                                                                                                                                                                                                                     137
2025-07-28T13:39:10.686954212Z 22                                                                                                                                                                                                                                                                                                                                                                                                                                   FALSE
2025-07-28T13:39:10.686955721Z 23                                                                                                                                                                                                                                                                                                                                                                                                                                    TRUE
2025-07-28T13:39:10.686957210Z 24                                                                                                                                                                                                                                                                                                                                                                                                                                        
2025-07-28T13:39:10.686958716Z 25                                                                                                                                                                                                                                                                                                                                                                                                                                   FALSE
2025-07-28T13:39:10.687774434Z [1] "Import libraries"
2025-07-28T13:39:11.347821364Z [1] "Import functions"
2025-07-28T13:39:11.350439155Z [[1]]
2025-07-28T13:39:11.350455847Z [[1]]$value
2025-07-28T13:39:11.351258283Z function (df, covariate_threshold, strata) 
2025-07-28T13:39:11.351271541Z {
2025-07-28T13:39:11.351273455Z     library(magrittr)
2025-07-28T13:39:11.351275006Z     print("Identify non-numeric covariates to remove")
2025-07-28T13:39:11.351276508Z     covariate_removed <- NULL
2025-07-28T13:39:11.351285680Z     for (i in unique(c(colnames(df)[grepl("cov_", colnames(df))], 
2025-07-28T13:39:11.351287032Z         strata))) {
2025-07-28T13:39:11.351288069Z         if (grepl("cov_bin_", i) || grepl("cov_cat_", i)) {
2025-07-28T13:39:11.351289298Z             print(paste0("Covariate: ", i))
2025-07-28T13:39:11.351290845Z             print("Calculate frequency for each level")
2025-07-28T13:39:11.351292055Z             tmp <- unique(df[df$exposure_status == 1 & df$outcome_status == 
2025-07-28T13:39:11.351293264Z                 1, c("patient_id", i)])
2025-07-28T13:39:11.351294310Z             freq <- data.frame(table(tmp[, i]))
2025-07-28T13:39:11.351295401Z             print(freq)
2025-07-28T13:39:11.351296407Z             if (nrow(freq[freq$Freq <= covariate_threshold & 
2025-07-28T13:39:11.351297548Z                 freq$Var1 != "Missing", ]) > 0) {
2025-07-28T13:39:11.351298657Z                 print("Add covariate to removal list")
2025-07-28T13:39:11.351299766Z                 covariate_removed <- c(covariate_removed, i)
2025-07-28T13:39:11.351300893Z             }
2025-07-28T13:39:11.351301857Z             if (nrow(freq) == 1) {
2025-07-28T13:39:11.351302828Z                 print("Add covariate to removal list")
2025-07-28T13:39:11.351303886Z                 covariate_removed <- c(covariate_removed, i)
2025-07-28T13:39:11.351304964Z             }
2025-07-28T13:39:11.351305905Z         }
2025-07-28T13:39:11.351306865Z     }
2025-07-28T13:39:11.351307887Z     covariate_collapsed <- NULL
2025-07-28T13:39:11.351308903Z     if ("cov_cat_region" %in% covariate_removed) {
2025-07-28T13:39:11.351310034Z         print("Collapsing region as special case")
2025-07-28T13:39:11.351311167Z         df <- df %>% dplyr::mutate(cov_cat_region = dplyr::case_when(cov_cat_region == 
2025-07-28T13:39:11.351312391Z             "North East" ~ "Northern England", cov_cat_region == 
2025-07-28T13:39:11.351313550Z             "North West" ~ "Northern England", cov_cat_region == 
2025-07-28T13:39:11.351314656Z             "Yorkshire and The Humber" ~ "Northern England", 
2025-07-28T13:39:11.351315821Z             cov_cat_region == "London" ~ "Southern England", 
2025-07-28T13:39:11.351317042Z             cov_cat_region == "South East" ~ "Southern England", 
2025-07-28T13:39:11.351318141Z             cov_cat_region == "East Midlands" ~ "Midlands", cov_cat_region == 
2025-07-28T13:39:11.351319341Z                 "West Midlands" ~ "Midlands", cov_cat_region == 
2025-07-28T13:39:11.351320435Z                 "South West" ~ "Southern England", cov_cat_region == 
2025-07-28T13:39:11.351321545Z                 "East" ~ "Southern England"))
2025-07-28T13:39:11.351324522Z         df$cov_cat_region <- factor(df$cov_cat_region)
2025-07-28T13:39:11.351325620Z         df$cov_cat_region <- relevel(df$cov_cat_region, ref = "Southern England")
2025-07-28T13:39:11.351326844Z         covariate_removed <- setdiff(covariate_removed, "cov_cat_region")
2025-07-28T13:39:11.351328727Z         covariate_collapsed <- c(covariate_collapsed, "cov_cat_region")
2025-07-28T13:39:11.351329857Z     }
2025-07-28T13:39:11.351330829Z     if ("cov_cat_deprivation" %in% covariate_removed) {
2025-07-28T13:39:11.351331912Z         print("Collapsing deprivation as special case")
2025-07-28T13:39:11.351334732Z         df <- df %>% dplyr::mutate(cov_cat_deprivation = dplyr::case_when(cov_cat_deprivation == 
2025-07-28T13:39:11.351335933Z             "1-2 (most deprived)" ~ "1-4", cov_cat_deprivation == 
2025-07-28T13:39:11.351337083Z             "3-4" ~ "1-4", cov_cat_deprivation == "5-6" ~ "5-6", 
2025-07-28T13:39:11.351338244Z             cov_cat_deprivation == "7-8" ~ "7-10", cov_cat_deprivation == 
2025-07-28T13:39:11.351339482Z                 "9-10 (least deprived)" ~ "7-10"))
2025-07-28T13:39:11.351340623Z         df$cov_cat_deprivation <- ordered(df$cov_cat_deprivation, 
2025-07-28T13:39:11.351341694Z             levels = c("1-4", "5-6", "7-10"))
2025-07-28T13:39:11.351342847Z         covariate_removed <- setdiff(covariate_removed, "cov_cat_deprivation")
2025-07-28T13:39:11.351343989Z         covariate_collapsed <- c(covariate_collapsed, "cov_cat_deprivation")
2025-07-28T13:39:11.351345104Z     }
2025-07-28T13:39:11.351346027Z     if ("cov_cat_smoking_status" %in% covariate_removed) {
2025-07-28T13:39:11.351347111Z         print("Collapsing smoking status as special case")
2025-07-28T13:39:11.351348244Z         df <- df %>% dplyr::mutate(cov_cat_smoking_status = dplyr::case_when(cov_cat_smoking_status == 
2025-07-28T13:39:11.351349365Z             "Never smoker" ~ "Never smoker", cov_cat_smoking_status == 
2025-07-28T13:39:11.351350504Z             "Ever smoker" ~ "Ever smoker", cov_cat_smoking_status == 
2025-07-28T13:39:11.351351628Z             "Current smoker" ~ "Ever smoker", cov_cat_smoking_status == 
2025-07-28T13:39:11.351352754Z             "Missing" ~ "Missing"))
2025-07-28T13:39:11.351353807Z         df$cov_cat_smoking_status <- ordered(df$cov_cat_smoking_status, 
2025-07-28T13:39:11.351354879Z             levels = c("Never smoker", "Ever smoker", "Missing"))
2025-07-28T13:39:11.351355997Z         covariate_removed <- setdiff(covariate_removed, "cov_cat_smoking_status")
2025-07-28T13:39:11.351357151Z     }
2025-07-28T13:39:11.351358042Z     for (i in c("cov_cat_deprivation", "cov_cat_smoking_status", 
2025-07-28T13:39:11.351359243Z         "cov_cat_region")) {
2025-07-28T13:39:11.351360269Z         if (i %in% colnames(df)) {
2025-07-28T13:39:11.351362814Z             print(paste0("Rechecking covariate: ", i))
2025-07-28T13:39:11.351363967Z             print("Calculate frequency for each level among exposed with outcome")
2025-07-28T13:39:11.351366508Z             tmp <- unique(df[df$exposure_status == 1 & df$outcome_status == 
2025-07-28T13:39:11.351367668Z                 1, c("patient_id", i)])
2025-07-28T13:39:11.351368810Z             freq <- data.frame(table(tmp[, i]))
2025-07-28T13:39:11.351369881Z             print(freq)
2025-07-28T13:39:11.351370896Z             if (nrow(freq[freq$Freq <= covariate_threshold & 
2025-07-28T13:39:11.351372212Z                 freq$Var1 != "Missing", ]) > 0) {
2025-07-28T13:39:11.351373322Z                 print("Add covariate to removal list")
2025-07-28T13:39:11.351374419Z                 covariate_removed <- c(covariate_removed, i)
2025-07-28T13:39:11.351375550Z                 covariate_collapsed <- setdiff(covariate_collapsed, 
2025-07-28T13:39:11.351376689Z                   i)
2025-07-28T13:39:11.351377689Z             }
2025-07-28T13:39:11.351378636Z             if (nrow(freq) == 1) {
2025-07-28T13:39:11.351379667Z                 print("Add covariate to removal list")
2025-07-28T13:39:11.351380666Z                 covariate_removed <- c(covariate_removed, i)
2025-07-28T13:39:11.351381736Z                 covariate_collapsed <- setdiff(covariate_collapsed, 
2025-07-28T13:39:11.351382778Z                   i)
2025-07-28T13:39:11.351383730Z             }
2025-07-28T13:39:11.351384648Z         }
2025-07-28T13:39:11.351385649Z     }
2025-07-28T13:39:11.351386546Z     print("Check strata variables meet covariate threshold")
2025-07-28T13:39:11.351387669Z     strata_warning <- ""
2025-07-28T13:39:11.351388728Z     if (length(intersect(covariate_removed, strata)) > 0) {
2025-07-28T13:39:11.351389792Z         strata_warning <- paste0(intersect(covariate_removed, 
2025-07-28T13:39:11.351390833Z             strata), collapse = ";")
2025-07-28T13:39:11.351391876Z         for (i in intersect(covariate_removed, strata)) {
2025-07-28T13:39:11.351392909Z             tmp <- unique(df[df$exposure_status == 1 & df$outcome_status == 
2025-07-28T13:39:11.351394059Z                 1, c("patient_id", i)])
2025-07-28T13:39:11.351395046Z             freq <- data.frame(table(tmp[, i]))
2025-07-28T13:39:11.351396103Z             print(paste0("Warning: strata variable '", i, "' does not meet covariate threshold"))
2025-07-28T13:39:11.351397343Z             print(freq)
2025-07-28T13:39:11.351398325Z         }
2025-07-28T13:39:11.351399284Z     }
2025-07-28T13:39:11.351400219Z     print("Remove covariates")
2025-07-28T13:39:11.351402669Z     df <- df[, !(colnames(df) %in% setdiff(covariate_removed, 
2025-07-28T13:39:11.351403826Z         strata))]
2025-07-28T13:39:11.351404804Z     output <- list(df = df, covariate_removed = setdiff(covariate_removed, 
2025-07-28T13:39:11.351405877Z         strata), covariate_collapsed = covariate_collapsed, strata_warning = strata_warning)
2025-07-28T13:39:11.351407006Z     return(output)
2025-07-28T13:39:11.351407986Z }
2025-07-28T13:39:11.351408890Z 
2025-07-28T13:39:11.351409838Z [[1]]$visible
2025-07-28T13:39:11.351410799Z [1] FALSE
2025-07-28T13:39:11.351411797Z 
2025-07-28T13:39:11.351412710Z 
2025-07-28T13:39:11.351413643Z [[2]]
2025-07-28T13:39:11.351414627Z [[2]]$value
2025-07-28T13:39:11.351735573Z function (df, time_periods, covariates, strata, age_spline, covariate_removed, 
2025-07-28T13:39:11.351748304Z     covariate_collapsed, ipw) 
2025-07-28T13:39:11.351751646Z {
2025-07-28T13:39:11.351754169Z     print("Define model formula")
2025-07-28T13:39:11.351756447Z     surv_formula <- paste0("Surv(tstart, tstop, outcome_status) ~ ", 
2025-07-28T13:39:11.351758817Z         paste(time_periods, collapse = " + "), ifelse("cov_cat_sex" %in% 
2025-07-28T13:39:11.351761011Z             colnames(df), " + cov_cat_sex", ""), ifelse(is.null(strata), 
2025-07-28T13:39:11.351763145Z             "", paste(" +", paste0("rms::strat(", strata, ")"), 
2025-07-28T13:39:11.351765389Z                 collapse = " + ")), ifelse(isTRUE(ipw), " + cluster(patient_id)", 
2025-07-28T13:39:11.351767476Z             ""))
2025-07-28T13:39:11.351769250Z     if ("cov_num_age" %in% colnames(df)) {
2025-07-28T13:39:11.351771265Z         print("Add age covariate")
2025-07-28T13:39:11.351773139Z         if (age_spline == TRUE) {
2025-07-28T13:39:11.351775103Z             print("Specify knot placement for age spline")
2025-07-28T13:39:11.351777024Z             knot_placement <- as.numeric(quantile(df$cov_num_age, 
2025-07-28T13:39:11.351778976Z                 probs = c(0.1, 0.5, 0.9)))
2025-07-28T13:39:11.351780780Z             print(paste0("Knots will be placed at: ", paste0(knot_placement, 
2025-07-28T13:39:11.351782855Z                 collapse = ", ")))
2025-07-28T13:39:11.351784772Z             surv_formula <- paste0(surv_formula, " + rms::rcs(cov_num_age, parms=knot_placement)")
2025-07-28T13:39:11.351786871Z         }
2025-07-28T13:39:11.351788696Z         else {
2025-07-28T13:39:11.351790471Z             surv_formula <- paste0(surv_formula, " + cov_num_age + cov_num_age_sq")
2025-07-28T13:39:11.351792417Z         }
2025-07-28T13:39:11.351803790Z     }
2025-07-28T13:39:11.351806450Z     print(surv_formula)
2025-07-28T13:39:11.351808337Z     print("Fit Cox model")
2025-07-28T13:39:11.351810239Z     dd <<- rms::datadist(df)
2025-07-28T13:39:11.351812254Z     withr::local_options(list(datadist = "dd", contrasts = c("contr.treatment", 
2025-07-28T13:39:11.351814243Z         "contr.treatment")))
2025-07-28T13:39:11.351816206Z     if (ipw == TRUE) {
2025-07-28T13:39:11.351817925Z         N_obs_in <- nrow(df)
2025-07-28T13:39:11.351819756Z         fit_cox_model <- rms::cph(formula = as.formula(surv_formula), 
2025-07-28T13:39:11.351821662Z             data = df, weight = df$cox_weight, method = "breslow", 
2025-07-28T13:39:11.351823626Z             surv = TRUE, x = TRUE, y = TRUE)
2025-07-28T13:39:11.351825410Z         N_obs_out <- sum(fit_cox_model$n)
2025-07-28T13:39:11.351827280Z     }
2025-07-28T13:39:11.351829048Z     else {
2025-07-28T13:39:11.351830788Z         N_obs_in <- nrow(df)
2025-07-28T13:39:11.351832534Z         fit_cox_model <- rms::cph(formula = as.formula(surv_formula), 
2025-07-28T13:39:11.351834373Z             data = df, method = "breslow", surv = TRUE, x = TRUE, 
2025-07-28T13:39:11.351836288Z             y = TRUE)
2025-07-28T13:39:11.351838082Z         N_obs_out <- sum(fit_cox_model$n)
2025-07-28T13:39:11.351839838Z     }
2025-07-28T13:39:11.351841567Z     print(fit_cox_model)
2025-07-28T13:39:11.351843321Z     print("Format results")
2025-07-28T13:39:11.351964109Z     results <- data.frame(term = names(fit_cox_model$coefficients), 
2025-07-28T13:39:11.351972340Z         lnhr = fit_cox_model$coefficients, se_lnhr = sqrt(diag(vcov(fit_cox_model))), 
2025-07-28T13:39:11.351974776Z         model = "mdl_age_sex", surv_formula = surv_formula, covariate_removed = "", 
2025-07-28T13:39:11.351976970Z         covariate_collapsed = "", obs_warning = ifelse(N_obs_in == 
2025-07-28T13:39:11.351978886Z             N_obs_out, "", paste0(N_obs_in, " observations provided. ", 
2025-07-28T13:39:11.351981369Z             N_obs_out, " observations used.")), stringsAsFactors = FALSE)
2025-07-28T13:39:11.351983647Z     row.names(results) <- NULL
2025-07-28T13:39:11.351985482Z     covariates <- setdiff(covariates, covariate_removed)
2025-07-28T13:39:11.351987374Z     if (!is.null(covariates) && length(covariates) > 0) {
2025-07-28T13:39:11.351989317Z         print("Add covariates to model formula")
2025-07-28T13:39:11.351991199Z         surv_formula_adj <- paste0(surv_formula, " + ", paste(covariates, 
2025-07-28T13:39:11.351993191Z             collapse = " + "))
2025-07-28T13:39:11.351995066Z         print(surv_formula_adj)
2025-07-28T13:39:11.352003188Z         print("Fit Cox model with covariates")
2025-07-28T13:39:11.352005873Z         dd_adj <<- rms::datadist(df)
2025-07-28T13:39:11.352008128Z         withr::local_options(list(datadist = "dd_adj", contrasts = c("contr.treatment", 
2025-07-28T13:39:11.352010319Z             "contr.treatment")))
2025-07-28T13:39:11.352012208Z         if (ipw == TRUE) {
2025-07-28T13:39:11.352014135Z             N_obs_in <- nrow(df)
2025-07-28T13:39:11.352016054Z             fit_cox_model_adj <- rms::cph(formula = as.formula(surv_formula_adj), 
2025-07-28T13:39:11.352043805Z                 data = df, weight = df$cox_weight, method = "breslow", 
2025-07-28T13:39:11.352047168Z                 surv = TRUE, x = TRUE, y = TRUE)
2025-07-28T13:39:11.352049221Z             N_obs_out <- sum(fit_cox_model$n)
2025-07-28T13:39:11.352051245Z         }
2025-07-28T13:39:11.352053127Z         else {
2025-07-28T13:39:11.352054896Z             N_obs_in <- nrow(df)
2025-07-28T13:39:11.352056673Z             fit_cox_model_adj <- rms::cph(formula = as.formula(surv_formula_adj), 
2025-07-28T13:39:11.352058614Z                 data = df, method = "breslow", surv = TRUE, x = TRUE, 
2025-07-28T13:39:11.352060586Z                 y = TRUE)
2025-07-28T13:39:11.352062453Z             N_obs_out <- sum(fit_cox_model$n)
2025-07-28T13:39:11.352064486Z         }
2025-07-28T13:39:11.352066222Z         print(fit_cox_model_adj)
2025-07-28T13:39:11.352068054Z         print("Format results")
2025-07-28T13:39:11.352069877Z         results_adj <- data.frame(term = names(fit_cox_model_adj$coefficients), 
2025-07-28T13:39:11.352071897Z             lnhr = fit_cox_model_adj$coefficients, se_lnhr = sqrt(diag(vcov(fit_cox_model_adj))), 
2025-07-28T13:39:11.352073961Z             model = "mdl_max_adj", surv_formula = surv_formula_adj, 
2025-07-28T13:39:11.352075887Z             covariate_removed = paste0(covariate_removed, collapse = ";"), 
2025-07-28T13:39:11.352077817Z             covariate_collapsed = paste0(covariate_collapsed, 
2025-07-28T13:39:11.352079634Z                 collapse = ";"), obs_warning = ifelse(N_obs_in == 
2025-07-28T13:39:11.352082127Z                 N_obs_out, "", paste0(N_obs_in, " observations provided. ", 
2025-07-28T13:39:11.352084165Z                 N_obs_out, " observations used.")), stringsAsFactors = FALSE)
2025-07-28T13:39:11.352086073Z         row.names(results_adj) <- NULL
2025-07-28T13:39:11.352087884Z         print("Bind to other results")
2025-07-28T13:39:11.352089746Z         results <- rbind(results, results_adj)
2025-07-28T13:39:11.352091684Z     }
2025-07-28T13:39:11.352093344Z     print("Return results")
2025-07-28T13:39:11.352099143Z     return(results)
2025-07-28T13:39:11.352101282Z     print(summary(results))
2025-07-28T13:39:11.352103138Z }
2025-07-28T13:39:11.352104935Z 
2025-07-28T13:39:11.352106582Z [[2]]$visible
2025-07-28T13:39:11.352108271Z [1] FALSE
2025-07-28T13:39:11.352109920Z 
2025-07-28T13:39:11.352111588Z 
2025-07-28T13:39:11.352113253Z [[3]]
2025-07-28T13:39:11.352114947Z [[3]]$value
2025-07-28T13:39:11.352162764Z function (df, cut_points, episode_labels, ipw) 
2025-07-28T13:39:11.352174794Z {
2025-07-28T13:39:11.352177075Z     library(magrittr)
2025-07-28T13:39:11.352178978Z     print("Calculate number of events per episode")
2025-07-28T13:39:11.352180960Z     events <- df[df$outcome_status == 1, c("patient_id", "episode")]
2025-07-28T13:39:11.352183102Z     events <- aggregate(episode ~ patient_id, data = events, 
2025-07-28T13:39:11.352185062Z         FUN = max)
2025-07-28T13:39:11.352186827Z     events <- data.frame(table(events$episode), stringsAsFactors = FALSE)
2025-07-28T13:39:11.352188656Z     events <- dplyr::rename(events, episode = "Var1", N_events = "Freq")
2025-07-28T13:39:11.352190688Z     print(events)
2025-07-28T13:39:11.352192411Z     print("Add number of events to episode info table")
2025-07-28T13:39:11.352194493Z     episode_info <- merge(episode_labels, events, by = "episode", 
2025-07-28T13:39:11.352196692Z         all.x = TRUE)
2025-07-28T13:39:11.352198498Z     episode_info$N_events <- ifelse(is.na(episode_info$N_events), 
2025-07-28T13:39:11.352200591Z         0, episode_info$N_events)
2025-07-28T13:39:11.352202668Z     print(episode_info)
2025-07-28T13:39:11.352204481Z     print("Calculate person-time in each episode")
2025-07-28T13:39:11.352206376Z     if (ipw == TRUE) {
2025-07-28T13:39:11.352208071Z         tmp <- df[, c("episode", "tstart", "tstop", "cox_weight")]
2025-07-28T13:39:11.352210194Z         tmp$person_time_total <- (tmp$tstop - tmp$tstart) * tmp$cox_weight
2025-07-28T13:39:11.352212188Z         tmp[, c("tstart", "tstop", "cox_weight")] <- NULL
2025-07-28T13:39:11.352214369Z     }
2025-07-28T13:39:11.352216043Z     if (ipw == FALSE) {
2025-07-28T13:39:11.352217764Z         tmp <- df[, c("episode", "tstart", "tstop")]
2025-07-28T13:39:11.352219744Z         tmp$person_time_total <- (tmp$tstop - tmp$tstart)
2025-07-28T13:39:11.352221627Z         tmp[, c("tstart", "tstop")] <- NULL
2025-07-28T13:39:11.352252342Z     }
2025-07-28T13:39:11.352256186Z     tmp <- aggregate(person_time_total ~ episode, data = tmp, 
2025-07-28T13:39:11.352262743Z         FUN = sum)
2025-07-28T13:39:11.352265035Z     episode_info <- merge(episode_info, tmp, by = "episode", 
2025-07-28T13:39:11.352267209Z         all.x = TRUE)
2025-07-28T13:39:11.352269042Z     print(episode_info)
2025-07-28T13:39:11.352270774Z     print("Calculate median person-time")
2025-07-28T13:39:11.352272664Z     tmp <- df[df$outcome_status == 1, c("episode", "tstart", 
2025-07-28T13:39:11.352274739Z         "tstop")]
2025-07-28T13:39:11.352276777Z     tmp$outcome_time <- tmp$tstop - tmp$tstart
2025-07-28T13:39:11.352278679Z     tmp <- tmp %>% dplyr::group_by(episode) %>% dplyr::mutate(outcome_time_median = median(outcome_time)) %>% 
2025-07-28T13:39:11.352280917Z         dplyr::ungroup(episode)
2025-07-28T13:39:11.352282692Z     tmp <- unique(tmp[, c("episode", "outcome_time_median")])
2025-07-28T13:39:11.352284749Z     episode_info <- merge(episode_info, tmp, by = "episode", 
2025-07-28T13:39:11.352286805Z         all.x = TRUE)
2025-07-28T13:39:11.352288510Z     print(episode_info)
2025-07-28T13:39:11.352290256Z     print("Add time from previous episodes to median person-time")
2025-07-28T13:39:11.352292107Z     episode_info$add <- as.numeric(gsub("days", "", gsub("_.*", 
2025-07-28T13:39:11.352294131Z         "", episode_info$time_period)))
2025-07-28T13:39:11.352296673Z     episode_info$add <- ifelse(is.na(episode_info$add), 0, episode_info$add)
2025-07-28T13:39:11.352298847Z     episode_info$outcome_time_median <- episode_info$outcome_time_median + 
2025-07-28T13:39:11.352300829Z         episode_info$add
2025-07-28T13:39:11.352302514Z     episode_info$add <- NULL
2025-07-28T13:39:11.352304352Z     print(episode_info)
2025-07-28T13:39:11.352306036Z     return(episode_info)
2025-07-28T13:39:11.352307728Z }
2025-07-28T13:39:11.352309498Z 
2025-07-28T13:39:11.352311257Z [[3]]$visible
2025-07-28T13:39:11.352312950Z [1] FALSE
2025-07-28T13:39:11.352314673Z 
2025-07-28T13:39:11.352316370Z 
2025-07-28T13:39:11.352318273Z [[4]]
2025-07-28T13:39:11.352320174Z [[4]]$value
2025-07-28T13:39:11.352602732Z function (df, controls_per_case, seed = 137, sample_exposed) 
2025-07-28T13:39:11.352614144Z {
2025-07-28T13:39:11.352617135Z     print("Set seed")
2025-07-28T13:39:11.352619499Z     set.seed(seed)
2025-07-28T13:39:11.352621546Z     print("Split cases and controls")
2025-07-28T13:39:11.352623588Z     cases <- df[df$outcome_status == TRUE, ]
2025-07-28T13:39:11.352625601Z     controls <- df[df$outcome_status == FALSE, ]
2025-07-28T13:39:11.352636534Z     print(paste0("Cases: ", nrow(cases)))
2025-07-28T13:39:11.352639313Z     print(summary(cases))
2025-07-28T13:39:11.352641383Z     print(paste0("Controls: ", nrow(controls)))
2025-07-28T13:39:11.352645461Z     print(summary(controls))
2025-07-28T13:39:11.352647472Z     if (sample_exposed == TRUE) {
2025-07-28T13:39:11.352649281Z         if (nrow(cases) * controls_per_case < nrow(controls)) {
2025-07-28T13:39:11.352651296Z             print("Sample controls, including exposed control individuals")
2025-07-28T13:39:11.352653260Z             controls <- controls[sample(seq_len(nrow(controls)), 
2025-07-28T13:39:11.352655268Z                 nrow(cases) * controls_per_case, replace = FALSE), 
2025-07-28T13:39:11.352657195Z                 ]
2025-07-28T13:39:11.352659007Z             controls$cox_weight <- (nrow(df) - nrow(cases))/nrow(controls)
2025-07-28T13:39:11.352660946Z             print(paste0(nrow(controls), " controls sampled with Cox weight of ", 
2025-07-28T13:39:11.352662960Z                 controls$cox_weight[1]))
2025-07-28T13:39:11.352664764Z         }
2025-07-28T13:39:11.352666487Z         else {
2025-07-28T13:39:11.352668216Z             print("Retain all controls")
2025-07-28T13:39:11.352670060Z             controls$cox_weight <- 1
2025-07-28T13:39:11.352671956Z         }
2025-07-28T13:39:11.352673701Z     }
2025-07-28T13:39:11.352675458Z     if (sample_exposed == FALSE) {
2025-07-28T13:39:11.352677257Z         print("Separate exposed controls so they are not sampled")
2025-07-28T13:39:11.352679211Z         controls_exposed <- controls[!is.na(controls$exposure), 
2025-07-28T13:39:11.352681257Z             ]
2025-07-28T13:39:11.352683023Z         controls_exposed$cox_weight <- 1
2025-07-28T13:39:11.352684870Z         print(paste0(nrow(controls_exposed), " exposed controls"))
2025-07-28T13:39:11.352686857Z         print("Exposed controls:")
2025-07-28T13:39:11.352688690Z         print(summary(controls_exposed))
2025-07-28T13:39:11.352690533Z         print("Sample unexposed controls")
2025-07-28T13:39:11.352692429Z         controls_unexposed <- controls[is.na(controls$exposure), 
2025-07-28T13:39:11.352694333Z             ]
2025-07-28T13:39:11.352696022Z         if (nrow(cases) * controls_per_case < nrow(controls_unexposed)) {
2025-07-28T13:39:11.352697914Z             controls_unexposed <- controls_unexposed[sample(seq_len(nrow(controls_unexposed)), 
2025-07-28T13:39:11.352699861Z                 nrow(cases) * controls_per_case, replace = FALSE), 
2025-07-28T13:39:11.352701715Z                 ]
2025-07-28T13:39:11.352703446Z             controls_unexposed$cox_weight <- (nrow(df) - nrow(cases) - 
2025-07-28T13:39:11.352708044Z                 nrow(controls_exposed))/nrow(controls_unexposed)
2025-07-28T13:39:11.352710321Z             print(paste0(nrow(controls_unexposed), " unexposed controls sampled with Cox weight of ", 
2025-07-28T13:39:11.352713155Z                 controls_unexposed$cox_weight[1]))
2025-07-28T13:39:11.352715131Z             print("Unexposed controls:")
2025-07-28T13:39:11.352717022Z             print(summary(controls_unexposed))
2025-07-28T13:39:11.352718806Z             print("Add exposed control individuals back to control dataset")
2025-07-28T13:39:11.352720813Z             controls <- NULL
2025-07-28T13:39:11.352722685Z             controls <- rbind(controls_unexposed, controls_exposed)
2025-07-28T13:39:11.352724568Z             print(paste0("Controls (N=", nrow(controls), "):"))
2025-07-28T13:39:11.352739405Z             print(summary(controls))
2025-07-28T13:39:11.352742435Z         }
2025-07-28T13:39:11.352744482Z         else {
2025-07-28T13:39:11.352746204Z             print("Insufficient controls so retain all controls")
2025-07-28T13:39:11.352748123Z             rm(controls_exposed, controls_unexposed)
2025-07-28T13:39:11.352749980Z             controls$cox_weight <- 1
2025-07-28T13:39:11.352752006Z         }
2025-07-28T13:39:11.352753951Z     }
2025-07-28T13:39:11.352755732Z     print("Specify cox weight for cases")
2025-07-28T13:39:11.352757579Z     cases$cox_weight <- 1
2025-07-28T13:39:11.352759402Z     print("Recombine cases and controls")
2025-07-28T13:39:11.352761240Z     return_df <- rbind(cases, controls)
2025-07-28T13:39:11.352763097Z     return(return_df)
2025-07-28T13:39:11.352764972Z }
2025-07-28T13:39:11.352766747Z 
2025-07-28T13:39:11.352768493Z [[4]]$visible
2025-07-28T13:39:11.352770319Z [1] FALSE
2025-07-28T13:39:11.352772075Z 
2025-07-28T13:39:11.352774059Z 
2025-07-28T13:39:11.352775850Z [[5]]
2025-07-28T13:39:11.352777690Z [[5]]$value
2025-07-28T13:39:11.352798540Z function (df, cut_points, episode_labels) 
2025-07-28T13:39:11.352802152Z {
2025-07-28T13:39:11.352804050Z     print("Calculate where follow-up occurs in study period")
2025-07-28T13:39:11.352806180Z     df$days_to_start <- as.numeric(df$fup_start - df$study_start)
2025-07-28T13:39:11.352808317Z     df$days_to_end <- as.numeric(df$fup_stop - df$study_start) + 
2025-07-28T13:39:11.352810250Z         1
2025-07-28T13:39:11.352812072Z     print("Set survival data for the exposed")
2025-07-28T13:39:11.352814075Z     print("Filter data to exposed")
2025-07-28T13:39:11.352815956Z     exposed <- df[!is.na(df$exposure), ]
2025-07-28T13:39:11.352821743Z     print("Calculate days to exposure")
2025-07-28T13:39:11.352824058Z     exposed$days_to_exp <- as.numeric(exposed$exposure - exposed$study_start)
2025-07-28T13:39:11.352826109Z     print("Put into survival format (dataset d1)")
2025-07-28T13:39:11.352828095Z     d1 <- exposed[, !(colnames(exposed) %in% c("days_to_start", 
2025-07-28T13:39:11.352830266Z         "days_to_exp", "days_to_end", "outcome_status"))]
2025-07-28T13:39:11.352832365Z     print(summary(d1))
2025-07-28T13:39:11.352834143Z     print("Put into survival format (dataset d2)")
2025-07-28T13:39:11.352836008Z     d2 <- exposed[, c("patient_id", "days_to_start", "days_to_exp", 
2025-07-28T13:39:11.352838128Z         "days_to_end", "outcome_status")]
2025-07-28T13:39:11.352840067Z     print(summary(d2))
2025-07-28T13:39:11.352841877Z     print("Put into survival format (tmerge)")
2025-07-28T13:39:11.352843753Z     exposed <- survival::tmerge(data1 = d1, data2 = d2, id = patient_id, 
2025-07-28T13:39:11.352845826Z         outcome_status = event(days_to_end, outcome_status), 
2025-07-28T13:39:11.352847684Z         tstart = days_to_start, tstop = days_to_end, exposure_status = tdc(days_to_exp))
2025-07-28T13:39:11.352849720Z     print(summary(exposed))
2025-07-28T13:39:11.352851581Z     print("Split post-exposure time for the exposed")
2025-07-28T13:39:11.352853462Z     print("Filter to post-exposure data")
2025-07-28T13:39:11.352855241Z     exposed_post <- exposed[exposed$exposure_status == 1, ]
2025-07-28T13:39:11.352857137Z     print("Format tstart and tstop")
2025-07-28T13:39:11.352858981Z     exposed_post <- dplyr::rename(exposed_post, t0 = tstart, 
2025-07-28T13:39:11.352860956Z         t = tstop)
2025-07-28T13:39:11.352862748Z     exposed_post$tstart <- 0
2025-07-28T13:39:11.352864518Z     exposed_post$tstop <- exposed_post$t - exposed_post$t0
2025-07-28T13:39:11.352866365Z     print("Implement post-exposure cut points")
2025-07-28T13:39:11.352868212Z     print(summary(exposed_post))
2025-07-28T13:39:11.352870102Z     exposed_post <- survival::survSplit(Surv(tstop, outcome_status) ~ 
2025-07-28T13:39:11.352872118Z         ., exposed_post, cut = cut_points, episode = "episode")
2025-07-28T13:39:11.352874058Z     print(summary(exposed_post))
2025-07-28T13:39:11.352875865Z     print("Account for pre-exposure time")
2025-07-28T13:39:11.352877784Z     exposed_post$tstart <- exposed_post$tstart + exposed_post$t0
2025-07-28T13:39:11.352879778Z     exposed_post$tstop <- exposed_post$tstop + exposed_post$t0
2025-07-28T13:39:11.352881776Z     exposed_post[, c("t0", "t")] <- NULL
2025-07-28T13:39:11.352883775Z     print(summary(exposed_post))
2025-07-28T13:39:11.352888607Z     print("Combine pre- and post-exposure time for the exposed")
2025-07-28T13:39:11.352891037Z     print("Filter to pre-exposure data")
2025-07-28T13:39:11.352893114Z     exposed_pre <- exposed[exposed$exposure_status == 0, ]
2025-07-28T13:39:11.352895220Z     if (nrow(exposed_pre) > 0) {
2025-07-28T13:39:11.352897110Z         print("Set pre-exposure to be episode 0")
2025-07-28T13:39:11.352899076Z         exposed_pre$episode <- 0
2025-07-28T13:39:11.352901087Z         print(summary(exposed_pre))
2025-07-28T13:39:11.352902837Z         print("Bind pre- and post-exposure time")
2025-07-28T13:39:11.352904694Z         exposed <- plyr::rbind.fill(exposed_pre, exposed_post)
2025-07-28T13:39:11.352906670Z     }
2025-07-28T13:39:11.352908454Z     else {
2025-07-28T13:39:11.352910198Z         print("No pre-exposure time so exposed = post-exposure time only")
2025-07-28T13:39:11.352912373Z         exposed <- exposed_post
2025-07-28T13:39:11.352914277Z     }
2025-07-28T13:39:11.352916416Z     print(summary(exposed))
2025-07-28T13:39:11.352918246Z     print("Set survival data for the unexposed")
2025-07-28T13:39:11.352920028Z     print("Filter data to unexposed")
2025-07-28T13:39:11.352921764Z     unexposed <- df[is.na(df$exposure), ]
2025-07-28T13:39:11.352923560Z     print("Rename variables to survival variable names")
2025-07-28T13:39:11.352925417Z     unexposed <- dplyr::rename(unexposed, tstart = "days_to_start", 
2025-07-28T13:39:11.352927470Z         tstop = "days_to_end")
2025-07-28T13:39:11.352929325Z     unexposed$exposure_status <- c(0)
2025-07-28T13:39:11.352931178Z     unexposed$episode <- c(0)
2025-07-28T13:39:11.352933299Z     unexposed$outcome_status <- as.numeric(unexposed$outcome_status)
2025-07-28T13:39:11.352935165Z     print(summary(unexposed))
2025-07-28T13:39:11.352937203Z     print("Combine exposed and unexposed individuals")
2025-07-28T13:39:11.352939384Z     exposed <- exposed[, intersect(colnames(unexposed), colnames(exposed))]
2025-07-28T13:39:11.352941329Z     unexposed <- unexposed[, intersect(colnames(unexposed), colnames(exposed))]
2025-07-28T13:39:11.352943257Z     df <- rbind(exposed, unexposed)
2025-07-28T13:39:11.352945116Z     print(summary(df))
2025-07-28T13:39:11.352946882Z     print("Add indicators for episode")
2025-07-28T13:39:11.352948729Z     for (i in 1:max(episode_labels$episode)) {
2025-07-28T13:39:11.352950599Z         preserve_cols <- colnames(df)
2025-07-28T13:39:11.352952472Z         df$tmp <- as.numeric(df$episode == i)
2025-07-28T13:39:11.352954321Z         colnames(df) <- c(preserve_cols, episode_labels[episode_labels$episode == 
2025-07-28T13:39:11.352958627Z             i, ]$time_period)
2025-07-28T13:39:11.352960811Z     }
2025-07-28T13:39:11.352962534Z     print(summary(df))
2025-07-28T13:39:11.352964579Z     return(df)
2025-07-28T13:39:11.352966571Z }
2025-07-28T13:39:11.352968208Z 
2025-07-28T13:39:11.352969836Z [[5]]$visible
2025-07-28T13:39:11.352971492Z [1] FALSE
2025-07-28T13:39:11.352973170Z 
2025-07-28T13:39:11.352974780Z 
2025-07-28T13:39:11.352976589Z [1] "Separate list arguments"
2025-07-28T13:39:11.532256379Z [1] "Make numeric arguments numeric"
2025-07-28T13:39:11.532281631Z [1] "Load data"
2025-07-28T13:39:11.641300916Z   patient_id          index_date         end_date_exposure   
2025-07-28T13:39:11.641333261Z  Length:4054        Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:11.641336679Z  Class :character   1st Qu.:2020-01-01   1st Qu.:2020-12-08  
2025-07-28T13:39:11.641339003Z  Mode  :character   Median :2020-01-01   Median :2021-02-15  
2025-07-28T13:39:11.641341140Z                     Mean   :2020-01-01   Mean   :2021-02-08  
2025-07-28T13:39:11.641343191Z                     3rd Qu.:2020-01-01   3rd Qu.:2021-02-15  
2025-07-28T13:39:11.641345861Z                     Max.   :2020-01-01   Max.   :2021-06-18  
2025-07-28T13:39:11.641347700Z                                                              
2025-07-28T13:39:11.641349561Z  end_date_outcome        exp_date             out_date         
2025-07-28T13:39:11.641351348Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:11.641353105Z  1st Qu.:2021-12-01   1st Qu.:2020-04-21   1st Qu.:2021-01-16  
2025-07-28T13:39:11.641354913Z  Median :2024-01-17   Median :2020-07-18   Median :2022-02-13  
2025-07-28T13:39:11.641356677Z  Mean   :2023-02-19   Mean   :2020-07-29   Mean   :2022-02-19  
2025-07-28T13:39:11.641358371Z  3rd Qu.:2024-04-30   3rd Qu.:2020-11-01   3rd Qu.:2023-03-19  
2025-07-28T13:39:11.641360068Z  Max.   :2024-04-30   Max.   :2021-06-18   Max.   :2024-04-30  
2025-07-28T13:39:11.641361869Z                       NA's   :3575         NA's   :2085        
2025-07-28T13:39:11.641363629Z                  strat_cat_region  cov_num_age     cov_cat_sex  
2025-07-28T13:39:11.641365549Z  Yorkshire and The Humber: 475    Min.   : 18.00   Female:2054  
2025-07-28T13:39:11.641367294Z  North East              : 460    1st Qu.: 41.00   Male  :2000  
2025-07-28T13:39:11.641368998Z  West Midlands           : 460    Median : 62.00                
2025-07-28T13:39:11.641370742Z  East Midlands           : 451    Mean   : 63.48                
2025-07-28T13:39:11.641372458Z  East                    : 444    3rd Qu.: 86.00                
2025-07-28T13:39:11.641388021Z  North West              : 443    Max.   :110.00                
2025-07-28T13:39:11.641390348Z  (Other)                 :1321                                  
2025-07-28T13:39:11.641392122Z  cov_cat_ethnicity             cov_cat_imd  cov_num_consrate2019
2025-07-28T13:39:11.641393862Z  White  : 335      1 (most deprived) :809   Min.   :0.0000      
2025-07-28T13:39:11.641395550Z  Missing:2794      2                 :830   1st Qu.:0.0000      
2025-07-28T13:39:11.641397264Z  Mixed  : 118      3                 :756   Median :0.0000      
2025-07-28T13:39:11.641398997Z  Asian  : 231      4                 :813   Mean   :0.0407      
2025-07-28T13:39:11.641400746Z  Black  : 230      5 (least deprived):846   3rd Qu.:0.0000      
2025-07-28T13:39:11.641402481Z  Other  : 346                               Max.   :2.0000      
2025-07-28T13:39:11.641404229Z                                                                 
2025-07-28T13:39:11.641407262Z  cov_bin_hcworker       cov_cat_smoking cov_bin_carehome cov_bin_obesity
2025-07-28T13:39:11.641409417Z  FALSE:1912       Never smoker  :  66   FALSE:3417       FALSE:3967     
2025-07-28T13:39:11.641411272Z  TRUE :2142       Ever smoker   : 909   TRUE : 637       TRUE :  87     
2025-07-28T13:39:11.641413056Z                   Current smoker:1312                                   
2025-07-28T13:39:11.641414837Z                   Missing       :1767                                   
2025-07-28T13:39:11.641416547Z                                                                         
2025-07-28T13:39:11.641418321Z                                                                         
2025-07-28T13:39:11.641420106Z                                                                         
2025-07-28T13:39:11.641421881Z  cov_bin_ami  cov_bin_dementia cov_bin_liver_disease cov_bin_ckd 
2025-07-28T13:39:11.641423683Z  FALSE:2948   FALSE:3567       FALSE:3206            FALSE:3029  
2025-07-28T13:39:11.641425396Z  TRUE :1106   TRUE : 487       TRUE : 848            TRUE :1025  
2025-07-28T13:39:11.641427097Z                                                                  
2025-07-28T13:39:11.641428808Z                                                                  
2025-07-28T13:39:11.641430572Z                                                                  
2025-07-28T13:39:11.641432341Z                                                                  
2025-07-28T13:39:11.641434068Z                                                                  
2025-07-28T13:39:11.641435784Z  cov_bin_cancer cov_bin_hypertension cov_bin_diabetes cov_bin_depression
2025-07-28T13:39:11.641437559Z  FALSE: 979     FALSE:1095           FALSE:1809       FALSE:3121        
2025-07-28T13:39:11.641439300Z  TRUE :3075     TRUE :2959           TRUE :2245       TRUE : 933        
2025-07-28T13:39:11.641441117Z                                                                         
2025-07-28T13:39:11.641445190Z                                                                         
2025-07-28T13:39:11.641447248Z                                                                         
2025-07-28T13:39:11.641448977Z                                                                         
2025-07-28T13:39:11.641450696Z                                                                         
2025-07-28T13:39:11.641452411Z  cov_bin_copd cov_bin_stroke_all cov_bin_other_ae cov_bin_vte  cov_bin_hf  
2025-07-28T13:39:11.641454151Z  FALSE:1741   FALSE:2601         FALSE:3667       FALSE:2752   FALSE:3601  
2025-07-28T13:39:11.641455848Z  TRUE :2313   TRUE :1453         TRUE : 387       TRUE :1302   TRUE : 453  
2025-07-28T13:39:11.641457566Z                                                                            
2025-07-28T13:39:11.641459829Z                                                                            
2025-07-28T13:39:11.641461651Z                                                                            
2025-07-28T13:39:11.641463370Z                                                                            
2025-07-28T13:39:11.641465123Z                                                                            
2025-07-28T13:39:11.641466867Z  cov_bin_angina cov_bin_lipidmed cov_bin_antiplatelet cov_bin_anticoagulant
2025-07-28T13:39:11.641468616Z  FALSE:3720     FALSE:3280       FALSE:3747           FALSE:3852           
2025-07-28T13:39:11.641470329Z  TRUE : 334     TRUE : 774       TRUE : 307           TRUE : 202           
2025-07-28T13:39:11.641472087Z                                                                            
2025-07-28T13:39:11.641473816Z                                                                            
2025-07-28T13:39:11.641475545Z                                                                            
2025-07-28T13:39:11.641477391Z                                                                            
2025-07-28T13:39:11.641479232Z                                                                            
2025-07-28T13:39:11.641480992Z  cov_bin_cocp cov_bin_hrt 
2025-07-28T13:39:11.641482722Z  FALSE:3922   FALSE:3799  
2025-07-28T13:39:11.641484369Z  TRUE : 132   TRUE : 255  
2025-07-28T13:39:11.641485990Z                           
2025-07-28T13:39:11.641487615Z                           
2025-07-28T13:39:11.641489197Z                           
2025-07-28T13:39:11.641490832Z                           
2025-07-28T13:39:11.641492460Z                           
2025-07-28T13:39:11.641494141Z [1] "Make binary variables logical"
2025-07-28T13:39:11.642775290Z [1] "Make date variables dates"
2025-07-28T13:39:11.643821640Z [1] "Make categorical variables factors"
2025-07-28T13:39:11.644019869Z [1] " Make numerical variables numerical"
2025-07-28T13:39:11.644121545Z [1] "Restrict to core variables"
2025-07-28T13:39:11.644197335Z [1] "Core variables: patient_id, exp_date, out_date, index_date, end_date_outcome"
2025-07-28T13:39:11.644202951Z [1] "Give generic names to variables"
2025-07-28T13:39:11.719089702Z   patient_id           exposure             outcome          
2025-07-28T13:39:11.719130217Z  Length:4054        Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:11.719150622Z  Class :character   1st Qu.:2020-04-21   1st Qu.:2021-01-16  
2025-07-28T13:39:11.719153289Z  Mode  :character   Median :2020-07-18   Median :2022-02-13  
2025-07-28T13:39:11.719155339Z                     Mean   :2020-07-29   Mean   :2022-02-19  
2025-07-28T13:39:11.719157104Z                     3rd Qu.:2020-11-01   3rd Qu.:2023-03-19  
2025-07-28T13:39:11.719158829Z                     Max.   :2021-06-18   Max.   :2024-04-30  
2025-07-28T13:39:11.719161349Z                     NA's   :3575         NA's   :2085        
2025-07-28T13:39:11.719163147Z    index_date         end_date_outcome    
2025-07-28T13:39:11.719164873Z  Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:11.719166558Z  1st Qu.:2020-01-01   1st Qu.:2021-12-01  
2025-07-28T13:39:11.719168286Z  Median :2020-01-01   Median :2024-01-17  
2025-07-28T13:39:11.719169935Z  Mean   :2020-01-01   Mean   :2023-02-19  
2025-07-28T13:39:11.719171584Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30  
2025-07-28T13:39:11.719173212Z  Max.   :2020-01-01   Max.   :2024-04-30  
2025-07-28T13:39:11.719174903Z                                           
2025-07-28T13:39:11.719176676Z [1] "Specify study dates"
2025-07-28T13:39:11.723597657Z   patient_id           exposure             outcome          
2025-07-28T13:39:11.723630358Z  Length:4054        Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:11.723633410Z  Class :character   1st Qu.:2020-04-21   1st Qu.:2021-01-16  
2025-07-28T13:39:11.723635300Z  Mode  :character   Median :2020-07-18   Median :2022-02-13  
2025-07-28T13:39:11.723637096Z                     Mean   :2020-07-29   Mean   :2022-02-19  
2025-07-28T13:39:11.723639372Z                     3rd Qu.:2020-11-01   3rd Qu.:2023-03-19  
2025-07-28T13:39:11.723641087Z                     Max.   :2021-06-18   Max.   :2024-04-30  
2025-07-28T13:39:11.723642935Z                     NA's   :3575         NA's   :2085        
2025-07-28T13:39:11.723644603Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:11.723646234Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:11.723647888Z  1st Qu.:2020-01-01   1st Qu.:2021-12-01   1st Qu.:2020-01-01  
2025-07-28T13:39:11.723649533Z  Median :2020-01-01   Median :2024-01-17   Median :2020-01-01  
2025-07-28T13:39:11.723662471Z  Mean   :2020-01-01   Mean   :2023-02-19   Mean   :2020-01-01  
2025-07-28T13:39:11.723665012Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:11.723666861Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:11.723668591Z                                                                
2025-07-28T13:39:11.723670383Z    study_stop        
2025-07-28T13:39:11.723672025Z  Min.   :2024-04-30  
2025-07-28T13:39:11.723673618Z  1st Qu.:2024-04-30  
2025-07-28T13:39:11.723675152Z  Median :2024-04-30  
2025-07-28T13:39:11.723676753Z  Mean   :2024-04-30  
2025-07-28T13:39:11.723682075Z  3rd Qu.:2024-04-30  
2025-07-28T13:39:11.723683878Z  Max.   :2024-04-30  
2025-07-28T13:39:11.723685489Z                      
2025-07-28T13:39:11.723687036Z [1] "Specify follow-up dates"
2025-07-28T13:39:11.731188176Z   patient_id           exposure             outcome          
2025-07-28T13:39:11.731216970Z  Length:4054        Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:11.731220684Z  Class :character   1st Qu.:2020-04-21   1st Qu.:2021-01-16  
2025-07-28T13:39:11.731223753Z  Mode  :character   Median :2020-07-18   Median :2022-02-13  
2025-07-28T13:39:11.731225754Z                     Mean   :2020-07-29   Mean   :2022-02-19  
2025-07-28T13:39:11.731227744Z                     3rd Qu.:2020-11-01   3rd Qu.:2023-03-19  
2025-07-28T13:39:11.731229452Z                     Max.   :2021-06-18   Max.   :2024-04-30  
2025-07-28T13:39:11.731231175Z                     NA's   :3575         NA's   :2085        
2025-07-28T13:39:11.731232936Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:11.731234689Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:11.731236474Z  1st Qu.:2020-01-01   1st Qu.:2021-12-01   1st Qu.:2020-01-01  
2025-07-28T13:39:11.731238270Z  Median :2020-01-01   Median :2024-01-17   Median :2020-01-01  
2025-07-28T13:39:11.731240048Z  Mean   :2020-01-01   Mean   :2023-02-19   Mean   :2020-01-01  
2025-07-28T13:39:11.731241795Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:11.731243530Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:11.731245321Z                                                                
2025-07-28T13:39:11.731247040Z    study_stop           fup_start             fup_stop         
2025-07-28T13:39:11.731251839Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:11.731253867Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2021-12-01  
2025-07-28T13:39:11.731255733Z  Median :2024-04-30   Median :2020-01-01   Median :2024-01-17  
2025-07-28T13:39:11.731257609Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-02-19  
2025-07-28T13:39:11.731270494Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30  
2025-07-28T13:39:11.731272922Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30  
2025-07-28T13:39:11.731277420Z                                                                
2025-07-28T13:39:11.731296691Z [1] "Remove exposures and outcomes outside follow-up"
2025-07-28T13:39:11.731992136Z [1] "Exposure data range: 2020-01-01 to 2021-06-18"
2025-07-28T13:39:11.732258849Z [1] "Outcome data range: 2020-01-01 to 2024-04-30"
2025-07-28T13:39:11.739562924Z [1] "Exposure data range: 2020-01-01 to 2021-06-18"
2025-07-28T13:39:11.739734981Z [1] "Outcome data range: 2020-01-01 to 2024-04-30"
2025-07-28T13:39:11.739742685Z [1] "Make indicator variable for outcome status"
2025-07-28T13:39:11.741204998Z 
2025-07-28T13:39:11.741218852Z FALSE  TRUE 
2025-07-28T13:39:11.741220465Z  2085  1969 
2025-07-28T13:39:11.741221619Z [1] "N_total = 4054"
2025-07-28T13:39:11.741468815Z [1] "N_exposed = 434"
2025-07-28T13:39:11.741557046Z [1] "Sample control population"
2025-07-28T13:39:11.776981712Z [1] "Set seed"
2025-07-28T13:39:11.777013816Z [1] "Split cases and controls"
2025-07-28T13:39:11.777655483Z [1] "Cases: 1969"
2025-07-28T13:39:11.780925010Z   patient_id           exposure             outcome          
2025-07-28T13:39:11.780959587Z  Length:1969        Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:11.780964696Z  Class :character   1st Qu.:2020-04-21   1st Qu.:2021-01-16  
2025-07-28T13:39:11.780967474Z  Mode  :character   Median :2020-07-14   Median :2022-02-13  
2025-07-28T13:39:11.780970064Z                     Mean   :2020-07-16   Mean   :2022-02-19  
2025-07-28T13:39:11.780972426Z                     3rd Qu.:2020-10-16   3rd Qu.:2023-03-19  
2025-07-28T13:39:11.780974773Z                     Max.   :2021-05-23   Max.   :2024-04-30  
2025-07-28T13:39:11.780977086Z                     NA's   :1766                             
2025-07-28T13:39:11.780979431Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:11.780982025Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:11.780984245Z  1st Qu.:2020-01-01   1st Qu.:2021-01-16   1st Qu.:2020-01-01  
2025-07-28T13:39:11.780986481Z  Median :2020-01-01   Median :2022-02-13   Median :2020-01-01  
2025-07-28T13:39:11.780988756Z  Mean   :2020-01-01   Mean   :2022-02-19   Mean   :2020-01-01  
2025-07-28T13:39:11.780990912Z  3rd Qu.:2020-01-01   3rd Qu.:2023-03-19   3rd Qu.:2020-01-01  
2025-07-28T13:39:11.780993086Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:11.780995281Z                                                                
2025-07-28T13:39:11.781013115Z    study_stop           fup_start             fup_stop          outcome_status
2025-07-28T13:39:11.781016427Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-01   Mode:logical  
2025-07-28T13:39:11.781018825Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2021-01-16   TRUE:1969     
2025-07-28T13:39:11.781021027Z  Median :2024-04-30   Median :2020-01-01   Median :2022-02-13                 
2025-07-28T13:39:11.781023239Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2022-02-19                 
2025-07-28T13:39:11.781025409Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2023-03-19                 
2025-07-28T13:39:11.781027600Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30                 
2025-07-28T13:39:11.781029914Z                                                                               
2025-07-28T13:39:11.781063187Z [1] "Controls: 2085"
2025-07-28T13:39:11.783089852Z   patient_id           exposure             outcome       index_date        
2025-07-28T13:39:11.783121955Z  Length:2085        Min.   :2020-01-01   Min.   :NA     Min.   :2020-01-01  
2025-07-28T13:39:11.783126691Z  Class :character   1st Qu.:2020-03-28   1st Qu.:NA     1st Qu.:2020-01-01  
2025-07-28T13:39:11.783129172Z  Mode  :character   Median :2020-07-10   Median :NA     Median :2020-01-01  
2025-07-28T13:39:11.783131365Z                     Mean   :2020-07-29   Mean   :NaN    Mean   :2020-01-01  
2025-07-28T13:39:11.783150877Z                     3rd Qu.:2020-11-07   3rd Qu.:NA     3rd Qu.:2020-01-01  
2025-07-28T13:39:11.783154816Z                     Max.   :2021-06-18   Max.   :NA     Max.   :2020-01-01  
2025-07-28T13:39:11.783156936Z                     NA's   :1854         NA's   :2085                       
2025-07-28T13:39:11.783158962Z  end_date_outcome      study_start           study_stop        
2025-07-28T13:39:11.783161090Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2024-04-30  
2025-07-28T13:39:11.783163145Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2024-04-30  
2025-07-28T13:39:11.783165005Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30  
2025-07-28T13:39:11.783166934Z  Mean   :2024-01-31   Mean   :2020-01-01   Mean   :2024-04-30  
2025-07-28T13:39:11.783168877Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30  
2025-07-28T13:39:11.783170685Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30  
2025-07-28T13:39:11.783172488Z                                                                
2025-07-28T13:39:11.783174336Z    fup_start             fup_stop          outcome_status 
2025-07-28T13:39:11.783176179Z  Min.   :2020-01-01   Min.   :2020-01-01   Mode :logical  
2025-07-28T13:39:11.783178059Z  1st Qu.:2020-01-01   1st Qu.:2024-04-30   FALSE:2085     
2025-07-28T13:39:11.783179905Z  Median :2020-01-01   Median :2024-04-30                  
2025-07-28T13:39:11.783195570Z  Mean   :2020-01-01   Mean   :2024-01-31                  
2025-07-28T13:39:11.783198804Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30                  
2025-07-28T13:39:11.783202983Z  Max.   :2020-01-01   Max.   :2024-04-30                  
2025-07-28T13:39:11.783205019Z                                                           
2025-07-28T13:39:11.783206846Z [1] "Separate exposed controls so they are not sampled"
2025-07-28T13:39:11.783574558Z [1] "231 exposed controls"
2025-07-28T13:39:11.783586369Z [1] "Exposed controls:"
2025-07-28T13:39:11.786491864Z   patient_id           exposure             outcome      index_date        
2025-07-28T13:39:11.786520913Z  Length:231         Min.   :2020-01-01   Min.   :NA    Min.   :2020-01-01  
2025-07-28T13:39:11.786522707Z  Class :character   1st Qu.:2020-03-28   1st Qu.:NA    1st Qu.:2020-01-01  
2025-07-28T13:39:11.786523978Z  Mode  :character   Median :2020-07-10   Median :NA    Median :2020-01-01  
2025-07-28T13:39:11.786525067Z                     Mean   :2020-07-29   Mean   :NaN   Mean   :2020-01-01  
2025-07-28T13:39:11.786526110Z                     3rd Qu.:2020-11-07   3rd Qu.:NA    3rd Qu.:2020-01-01  
2025-07-28T13:39:11.786527185Z                     Max.   :2021-06-18   Max.   :NA    Max.   :2020-01-01  
2025-07-28T13:39:11.786528318Z                                          NA's   :231                       
2025-07-28T13:39:11.786529563Z  end_date_outcome      study_start           study_stop        
2025-07-28T13:39:11.786530733Z  Min.   :2020-04-08   Min.   :2020-01-01   Min.   :2024-04-30  
2025-07-28T13:39:11.786531787Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2024-04-30  
2025-07-28T13:39:11.786532817Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30  
2025-07-28T13:39:11.786533861Z  Mean   :2024-02-15   Mean   :2020-01-01   Mean   :2024-04-30  
2025-07-28T13:39:11.786534885Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30  
2025-07-28T13:39:11.786535946Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30  
2025-07-28T13:39:11.786540704Z                                                                
2025-07-28T13:39:11.786542223Z    fup_start             fup_stop          outcome_status    cox_weight
2025-07-28T13:39:11.786543751Z  Min.   :2020-01-01   Min.   :2020-04-08   Mode :logical   Min.   :1   
2025-07-28T13:39:11.786545225Z  1st Qu.:2020-01-01   1st Qu.:2024-04-30   FALSE:231       1st Qu.:1   
2025-07-28T13:39:11.786546861Z  Median :2020-01-01   Median :2024-04-30                   Median :1   
2025-07-28T13:39:11.786548742Z  Mean   :2020-01-01   Mean   :2024-02-15                   Mean   :1   
2025-07-28T13:39:11.786550591Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30                   3rd Qu.:1   
2025-07-28T13:39:11.786551681Z  Max.   :2020-01-01   Max.   :2024-04-30                   Max.   :1   
2025-07-28T13:39:11.786552778Z                                                                        
2025-07-28T13:39:11.786613751Z [1] "Sample unexposed controls"
2025-07-28T13:39:11.787152238Z [1] "Insufficient controls so retain all controls"
2025-07-28T13:39:11.787399370Z [1] "Specify cox weight for cases"
2025-07-28T13:39:11.787506722Z [1] "Recombine cases and controls"
2025-07-28T13:39:11.790283550Z [1] "After sampling, N_total = 4054"
2025-07-28T13:39:11.796059926Z   patient_id           exposure             outcome          
2025-07-28T13:39:11.796089107Z  Length:4054        Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:11.796090556Z  Class :character   1st Qu.:2020-04-15   1st Qu.:2021-01-16  
2025-07-28T13:39:11.796091713Z  Mode  :character   Median :2020-07-14   Median :2022-02-13  
2025-07-28T13:39:11.796092744Z                     Mean   :2020-07-23   Mean   :2022-02-19  
2025-07-28T13:39:11.796093730Z                     3rd Qu.:2020-10-25   3rd Qu.:2023-03-19  
2025-07-28T13:39:11.796094913Z                     Max.   :2021-06-18   Max.   :2024-04-30  
2025-07-28T13:39:11.796095915Z                     NA's   :3620         NA's   :2085        
2025-07-28T13:39:11.796096939Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:11.796097998Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:11.796098973Z  1st Qu.:2020-01-01   1st Qu.:2021-12-01   1st Qu.:2020-01-01  
2025-07-28T13:39:11.796099964Z  Median :2020-01-01   Median :2024-01-17   Median :2020-01-01  
2025-07-28T13:39:11.796100929Z  Mean   :2020-01-01   Mean   :2023-02-19   Mean   :2020-01-01  
2025-07-28T13:39:11.796101955Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:11.796102951Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:11.796103903Z                                                                
2025-07-28T13:39:11.796104934Z    study_stop           fup_start             fup_stop          outcome_status 
2025-07-28T13:39:11.796106087Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-01   Mode :logical  
2025-07-28T13:39:11.796107130Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2021-12-01   FALSE:2085     
2025-07-28T13:39:11.796108115Z  Median :2024-04-30   Median :2020-01-01   Median :2024-01-17   TRUE :1969     
2025-07-28T13:39:11.796109108Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-02-19                  
2025-07-28T13:39:11.796110117Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30                  
2025-07-28T13:39:11.796111171Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30                  
2025-07-28T13:39:11.796114415Z                                                                                
2025-07-28T13:39:11.796115497Z    cox_weight
2025-07-28T13:39:11.796116491Z  Min.   :1   
2025-07-28T13:39:11.796129191Z  1st Qu.:1   
2025-07-28T13:39:11.796130167Z  Median :1   
2025-07-28T13:39:11.796131087Z  Mean   :1   
2025-07-28T13:39:11.796148659Z  3rd Qu.:1   
2025-07-28T13:39:11.796150921Z  Max.   :1   
2025-07-28T13:39:11.796151990Z              
2025-07-28T13:39:11.796181039Z [1] "Define episode labels"
2025-07-28T13:39:11.797364914Z    episode   time_period
2025-07-28T13:39:11.797374530Z 1        0      days_pre
2025-07-28T13:39:11.797376199Z 2        1       days0_1
2025-07-28T13:39:11.797377543Z 3        2       days1_7
2025-07-28T13:39:11.797378454Z 4        3      days7_14
2025-07-28T13:39:11.797379380Z 5        4     days14_28
2025-07-28T13:39:11.797380318Z 6        5     days28_56
2025-07-28T13:39:11.797381249Z 7        6     days56_84
2025-07-28T13:39:11.797382167Z 8        7    days84_183
2025-07-28T13:39:11.797383061Z 9        8   days183_365
2025-07-28T13:39:11.797383956Z 10       9   days365_730
2025-07-28T13:39:11.797384892Z 11      10  days730_1065
2025-07-28T13:39:11.797385796Z 12      11 days1065_1582
2025-07-28T13:39:11.797416599Z [1] "Survival data setup"
2025-07-28T13:39:11.842242418Z [1] "Calculate where follow-up occurs in study period"
2025-07-28T13:39:11.843573129Z [1] "Set survival data for the exposed"
2025-07-28T13:39:11.843609701Z [1] "Filter data to exposed"
2025-07-28T13:39:11.843851769Z [1] "Calculate days to exposure"
2025-07-28T13:39:11.843974640Z [1] "Put into survival format (dataset d1)"
2025-07-28T13:39:11.845754175Z   patient_id           exposure             outcome          
2025-07-28T13:39:11.845779241Z  Length:434         Min.   :2020-01-01   Min.   :2020-02-25  
2025-07-28T13:39:11.845781171Z  Class :character   1st Qu.:2020-04-15   1st Qu.:2021-06-04  
2025-07-28T13:39:11.845782435Z  Mode  :character   Median :2020-07-14   Median :2022-04-15  
2025-07-28T13:39:11.845783579Z                     Mean   :2020-07-23   Mean   :2022-05-18  
2025-07-28T13:39:11.845784600Z                     3rd Qu.:2020-10-25   3rd Qu.:2023-05-22  
2025-07-28T13:39:11.845785676Z                     Max.   :2021-06-18   Max.   :2024-04-26  
2025-07-28T13:39:11.845786725Z                                          NA's   :231         
2025-07-28T13:39:11.845787749Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:11.845788784Z  Min.   :2020-01-01   Min.   :2020-02-25   Min.   :2020-01-01  
2025-07-28T13:39:11.845789825Z  1st Qu.:2020-01-01   1st Qu.:2022-03-18   1st Qu.:2020-01-01  
2025-07-28T13:39:11.845790877Z  Median :2020-01-01   Median :2024-03-26   Median :2020-01-01  
2025-07-28T13:39:11.845804234Z  Mean   :2020-01-01   Mean   :2023-04-22   Mean   :2020-01-01  
2025-07-28T13:39:11.845805325Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:11.845806341Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:11.845807387Z                                                                
2025-07-28T13:39:11.845808435Z    study_stop           fup_start             fup_stop            cox_weight
2025-07-28T13:39:11.845809558Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-02-25   Min.   :1   
2025-07-28T13:39:11.845810639Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-03-18   1st Qu.:1   
2025-07-28T13:39:11.845811695Z  Median :2024-04-30   Median :2020-01-01   Median :2024-03-26   Median :1   
2025-07-28T13:39:11.845812744Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-04-22   Mean   :1   
2025-07-28T13:39:11.845813802Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:1   
2025-07-28T13:39:11.845814826Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1   
2025-07-28T13:39:11.845815832Z                                                                             
2025-07-28T13:39:11.845816885Z [1] "Put into survival format (dataset d2)"
2025-07-28T13:39:11.846892971Z   patient_id        days_to_start  days_to_exp     days_to_end    
2025-07-28T13:39:11.846910099Z  Length:434         Min.   :0     Min.   :  0.0   Min.   :  56.0  
2025-07-28T13:39:11.846912392Z  Class :character   1st Qu.:0     1st Qu.:105.2   1st Qu.: 808.2  
2025-07-28T13:39:11.846914365Z  Mode  :character   Median :0     Median :195.0   Median :1547.5  
2025-07-28T13:39:11.846915738Z                     Mean   :0     Mean   :204.8   Mean   :1208.8  
2025-07-28T13:39:11.846917097Z                     3rd Qu.:0     3rd Qu.:298.8   3rd Qu.:1582.0  
2025-07-28T13:39:11.846918463Z                     Max.   :0     Max.   :534.0   Max.   :1582.0  
2025-07-28T13:39:11.846919843Z  outcome_status 
2025-07-28T13:39:11.846921373Z  Mode :logical  
2025-07-28T13:39:11.846922602Z  FALSE:231      
2025-07-28T13:39:11.846923826Z  TRUE :203      
2025-07-28T13:39:11.846925067Z                 
2025-07-28T13:39:11.846926334Z                 
2025-07-28T13:39:11.846927550Z                 
2025-07-28T13:39:11.846928965Z [1] "Put into survival format (tmerge)"
2025-07-28T13:39:11.860968002Z Call:
2025-07-28T13:39:11.860998704Z survival::tmerge(data1 = d1, data2 = d2, id = patient_id, outcome_status = event(days_to_end, 
2025-07-28T13:39:11.861000620Z     outcome_status), exposure_status = tdc(days_to_exp), tstart = days_to_start, 
2025-07-28T13:39:11.861001860Z     tstop = days_to_end)
2025-07-28T13:39:11.861002944Z 
2025-07-28T13:39:11.861015445Z                 early late gap within boundary leading trailing tied missid
2025-07-28T13:39:11.861047647Z outcome_status      0    0   0      0        0       0      434    0      0
2025-07-28T13:39:11.861063295Z exposure_status     0    0   0    431        0       3        0    0      0
2025-07-28T13:39:11.861066746Z                 early late gap within boundary leading trailing tied missid
2025-07-28T13:39:11.861068893Z outcome_status      0    0   0      0        0       0      434    0      0
2025-07-28T13:39:11.861070773Z exposure_status     0    0   0    431        0       3        0    0      0
2025-07-28T13:39:11.861072566Z [1] "Split post-exposure time for the exposed"
2025-07-28T13:39:11.861076527Z [1] "Filter to post-exposure data"
2025-07-28T13:39:11.861414341Z [1] "Format tstart and tstop"
2025-07-28T13:39:11.863256637Z [1] "Implement post-exposure cut points"
2025-07-28T13:39:11.866695925Z   patient_id           exposure             outcome          
2025-07-28T13:39:11.866740909Z  Length:434         Min.   :2020-01-01   Min.   :2020-02-25  
2025-07-28T13:39:11.866744459Z  Class :character   1st Qu.:2020-04-15   1st Qu.:2021-06-04  
2025-07-28T13:39:11.866746893Z  Mode  :character   Median :2020-07-14   Median :2022-04-15  
2025-07-28T13:39:11.866749148Z                     Mean   :2020-07-23   Mean   :2022-05-18  
2025-07-28T13:39:11.866751640Z                     3rd Qu.:2020-10-25   3rd Qu.:2023-05-22  
2025-07-28T13:39:11.866753712Z                     Max.   :2021-06-18   Max.   :2024-04-26  
2025-07-28T13:39:11.866755735Z                                          NA's   :231         
2025-07-28T13:39:11.866757644Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:11.866759613Z  Min.   :2020-01-01   Min.   :2020-02-25   Min.   :2020-01-01  
2025-07-28T13:39:11.866761290Z  1st Qu.:2020-01-01   1st Qu.:2022-03-18   1st Qu.:2020-01-01  
2025-07-28T13:39:11.866763053Z  Median :2020-01-01   Median :2024-03-26   Median :2020-01-01  
2025-07-28T13:39:11.866764993Z  Mean   :2020-01-01   Mean   :2023-04-22   Mean   :2020-01-01  
2025-07-28T13:39:11.866766941Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:11.866769224Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:11.866771834Z                                                                
2025-07-28T13:39:11.866807155Z    study_stop           fup_start             fup_stop            cox_weight
2025-07-28T13:39:11.866832115Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-02-25   Min.   :1   
2025-07-28T13:39:11.866836256Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-03-18   1st Qu.:1   
2025-07-28T13:39:11.866838865Z  Median :2024-04-30   Median :2020-01-01   Median :2024-03-26   Median :1   
2025-07-28T13:39:11.866841341Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-04-22   Mean   :1   
2025-07-28T13:39:11.866859431Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:1   
2025-07-28T13:39:11.866862536Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1   
2025-07-28T13:39:11.866865029Z                                                                             
2025-07-28T13:39:11.866867434Z        t0              t          outcome_status  exposure_status     tstart 
2025-07-28T13:39:11.866869811Z  Min.   :  0.0   Min.   :  56.0   Mode :logical   Min.   :1       Min.   :0  
2025-07-28T13:39:11.866872151Z  1st Qu.:105.2   1st Qu.: 808.2   FALSE:231       1st Qu.:1       1st Qu.:0  
2025-07-28T13:39:11.866874458Z  Median :195.0   Median :1547.5   TRUE :203       Median :1       Median :0  
2025-07-28T13:39:11.866876837Z  Mean   :204.8   Mean   :1208.8                   Mean   :1       Mean   :0  
2025-07-28T13:39:11.866879201Z  3rd Qu.:298.8   3rd Qu.:1582.0                   3rd Qu.:1       3rd Qu.:0  
2025-07-28T13:39:11.866881580Z  Max.   :534.0   Max.   :1582.0                   Max.   :1       Max.   :0  
2025-07-28T13:39:11.866884020Z                                                                              
2025-07-28T13:39:11.866886248Z      tstop       
2025-07-28T13:39:11.866888554Z  Min.   :   2.0  
2025-07-28T13:39:11.866890623Z  1st Qu.: 568.8  
2025-07-28T13:39:11.866892671Z  Median :1198.5  
2025-07-28T13:39:11.866894693Z  Mean   :1004.0  
2025-07-28T13:39:11.866896705Z  3rd Qu.:1395.5  
2025-07-28T13:39:11.866898775Z  Max.   :1579.0  
2025-07-28T13:39:11.866900886Z                  
2025-07-28T13:39:11.878982816Z   patient_id           exposure             outcome          
2025-07-28T13:39:11.879019464Z  Length:4329        Min.   :2020-01-01   Min.   :2020-02-25  
2025-07-28T13:39:11.879023704Z  Class :character   1st Qu.:2020-04-15   1st Qu.:2021-09-21  
2025-07-28T13:39:11.879026426Z  Mode  :character   Median :2020-07-11   Median :2022-08-26  
2025-07-28T13:39:11.879028967Z                     Mean   :2020-07-24   Mean   :2022-07-29  
2025-07-28T13:39:11.879031308Z                     3rd Qu.:2020-10-29   3rd Qu.:2023-09-09  
2025-07-28T13:39:11.879033667Z                     Max.   :2021-06-18   Max.   :2024-04-26  
2025-07-28T13:39:11.879035973Z                                          NA's   :2493        
2025-07-28T13:39:11.879038385Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:11.879040739Z  Min.   :2020-01-01   Min.   :2020-02-25   Min.   :2020-01-01  
2025-07-28T13:39:11.879043127Z  1st Qu.:2020-01-01   1st Qu.:2022-09-15   1st Qu.:2020-01-01  
2025-07-28T13:39:11.879045466Z  Median :2020-01-01   Median :2024-04-30   Median :2020-01-01  
2025-07-28T13:39:11.879047813Z  Mean   :2020-01-01   Mean   :2023-06-30   Mean   :2020-01-01  
2025-07-28T13:39:11.879065385Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:11.879067702Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:11.879069635Z                                                                
2025-07-28T13:39:11.879071493Z    study_stop           fup_start             fup_stop            cox_weight
2025-07-28T13:39:11.879073516Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-02-25   Min.   :1   
2025-07-28T13:39:11.879075389Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-09-15   1st Qu.:1   
2025-07-28T13:39:11.879077214Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30   Median :1   
2025-07-28T13:39:11.879079019Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-06-30   Mean   :1   
2025-07-28T13:39:11.879080823Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:1   
2025-07-28T13:39:11.879082605Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1   
2025-07-28T13:39:11.879084403Z                                                                             
2025-07-28T13:39:11.879086190Z        t0              t        exposure_status     tstart         tstop       
2025-07-28T13:39:11.879088194Z  Min.   :  0.0   Min.   :  56   Min.   :1       Min.   :   0   Min.   :   1.0  
2025-07-28T13:39:11.879090010Z  1st Qu.:105.0   1st Qu.: 989   1st Qu.:1       1st Qu.:   7   1st Qu.:  14.0  
2025-07-28T13:39:11.879091962Z  Median :192.0   Median :1582   Median :1       Median :  56   Median :  70.0  
2025-07-28T13:39:11.879093854Z  Mean   :205.2   Mean   :1278   Mean   :1       Mean   : 181   Mean   : 281.6  
2025-07-28T13:39:11.879097068Z  3rd Qu.:302.0   3rd Qu.:1582   3rd Qu.:1       3rd Qu.: 183   3rd Qu.: 365.0  
2025-07-28T13:39:11.879106490Z  Max.   :534.0   Max.   :1582   Max.   :1       Max.   :1065   Max.   :1579.0  
2025-07-28T13:39:11.879108993Z                                                                                
2025-07-28T13:39:11.879110941Z  outcome_status       episode      
2025-07-28T13:39:11.879112772Z  Min.   :0.00000   Min.   : 1.000  
2025-07-28T13:39:11.879114534Z  1st Qu.:0.00000   1st Qu.: 3.000  
2025-07-28T13:39:11.879116333Z  Median :0.00000   Median : 6.000  
2025-07-28T13:39:11.879118039Z  Mean   :0.04689   Mean   : 5.614  
2025-07-28T13:39:11.879119819Z  3rd Qu.:0.00000   3rd Qu.: 8.000  
2025-07-28T13:39:11.879121510Z  Max.   :1.00000   Max.   :11.000  
2025-07-28T13:39:11.879123271Z                                    
2025-07-28T13:39:11.879125398Z [1] "Account for pre-exposure time"
2025-07-28T13:39:11.882781913Z   patient_id           exposure             outcome          
2025-07-28T13:39:11.882823267Z  Length:4329        Min.   :2020-01-01   Min.   :2020-02-25  
2025-07-28T13:39:11.882826598Z  Class :character   1st Qu.:2020-04-15   1st Qu.:2021-09-21  
2025-07-28T13:39:11.882843205Z  Mode  :character   Median :2020-07-11   Median :2022-08-26  
2025-07-28T13:39:11.882845782Z                     Mean   :2020-07-24   Mean   :2022-07-29  
2025-07-28T13:39:11.882847652Z                     3rd Qu.:2020-10-29   3rd Qu.:2023-09-09  
2025-07-28T13:39:11.882849440Z                     Max.   :2021-06-18   Max.   :2024-04-26  
2025-07-28T13:39:11.882851349Z                                          NA's   :2493        
2025-07-28T13:39:11.882853163Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:11.882855065Z  Min.   :2020-01-01   Min.   :2020-02-25   Min.   :2020-01-01  
2025-07-28T13:39:11.882856825Z  1st Qu.:2020-01-01   1st Qu.:2022-09-15   1st Qu.:2020-01-01  
2025-07-28T13:39:11.882858627Z  Median :2020-01-01   Median :2024-04-30   Median :2020-01-01  
2025-07-28T13:39:11.882860450Z  Mean   :2020-01-01   Mean   :2023-06-30   Mean   :2020-01-01  
2025-07-28T13:39:11.882862230Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:11.882864032Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:11.882865814Z                                                                
2025-07-28T13:39:11.882867650Z    study_stop           fup_start             fup_stop            cox_weight
2025-07-28T13:39:11.882869645Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-02-25   Min.   :1   
2025-07-28T13:39:11.882871534Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-09-15   1st Qu.:1   
2025-07-28T13:39:11.882873378Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30   Median :1   
2025-07-28T13:39:11.882875209Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-06-30   Mean   :1   
2025-07-28T13:39:11.882877013Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:1   
2025-07-28T13:39:11.882878841Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1   
2025-07-28T13:39:11.882880744Z                                                                             
2025-07-28T13:39:11.882882559Z  exposure_status     tstart           tstop        outcome_status   
2025-07-28T13:39:11.882884388Z  Min.   :1       Min.   :   0.0   Min.   :   1.0   Min.   :0.00000  
2025-07-28T13:39:11.882886187Z  1st Qu.:1       1st Qu.: 171.0   1st Qu.: 196.0   1st Qu.:0.00000  
2025-07-28T13:39:11.882887954Z  Median :1       Median : 297.0   Median : 340.0   Median :0.00000  
2025-07-28T13:39:11.882889714Z  Mean   :1       Mean   : 386.2   Mean   : 486.9   Mean   :0.04689  
2025-07-28T13:39:11.882891511Z  3rd Qu.:1       3rd Qu.: 467.0   3rd Qu.: 610.0   3rd Qu.:0.00000  
2025-07-28T13:39:11.882894655Z  Max.   :1       Max.   :1581.0   Max.   :1582.0   Max.   :1.00000  
2025-07-28T13:39:11.882896583Z                                                                     
2025-07-28T13:39:11.882901196Z     episode      
2025-07-28T13:39:11.882903272Z  Min.   : 1.000  
2025-07-28T13:39:11.882904993Z  1st Qu.: 3.000  
2025-07-28T13:39:11.882906696Z  Median : 6.000  
2025-07-28T13:39:11.882908402Z  Mean   : 5.614  
2025-07-28T13:39:11.882910059Z  3rd Qu.: 8.000  
2025-07-28T13:39:11.882911804Z  Max.   :11.000  
2025-07-28T13:39:11.882913498Z                  
2025-07-28T13:39:11.882915186Z [1] "Combine pre- and post-exposure time for the exposed"
2025-07-28T13:39:11.882917175Z [1] "Filter to pre-exposure data"
2025-07-28T13:39:11.883095549Z [1] "Set pre-exposure to be episode 0"
2025-07-28T13:39:11.890284050Z   patient_id           exposure             outcome          
2025-07-28T13:39:11.890321238Z  Length:431         Min.   :2020-01-04   Min.   :2020-02-25  
2025-07-28T13:39:11.890325871Z  Class :character   1st Qu.:2020-04-17   1st Qu.:2021-05-27  
2025-07-28T13:39:11.890328634Z  Mode  :character   Median :2020-07-14   Median :2022-04-15  
2025-07-28T13:39:11.890331317Z                     Mean   :2020-07-25   Mean   :2022-05-16  
2025-07-28T13:39:11.890333674Z                     3rd Qu.:2020-10-27   3rd Qu.:2023-05-05  
2025-07-28T13:39:11.890335995Z                     Max.   :2021-06-18   Max.   :2024-04-26  
2025-07-28T13:39:11.890338365Z                                          NA's   :230         
2025-07-28T13:39:11.890340650Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:11.890343007Z  Min.   :2020-01-01   Min.   :2020-02-25   Min.   :2020-01-01  
2025-07-28T13:39:11.890345327Z  1st Qu.:2020-01-01   1st Qu.:2022-03-18   1st Qu.:2020-01-01  
2025-07-28T13:39:11.890347588Z  Median :2020-01-01   Median :2024-04-11   Median :2020-01-01  
2025-07-28T13:39:11.890349899Z  Mean   :2020-01-01   Mean   :2023-04-25   Mean   :2020-01-01  
2025-07-28T13:39:11.890352114Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:11.890354369Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:11.890356593Z                                                                
2025-07-28T13:39:11.890358982Z    study_stop           fup_start             fup_stop            cox_weight
2025-07-28T13:39:11.890361464Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-02-25   Min.   :1   
2025-07-28T13:39:11.890368215Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-03-18   1st Qu.:1   
2025-07-28T13:39:11.890370908Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-11   Median :1   
2025-07-28T13:39:11.890373487Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-04-25   Mean   :1   
2025-07-28T13:39:11.890375825Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:1   
2025-07-28T13:39:11.890378139Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1   
2025-07-28T13:39:11.890398038Z                                                                             
2025-07-28T13:39:11.890401079Z      tstart      tstop       outcome_status  exposure_status    episode 
2025-07-28T13:39:11.890403494Z  Min.   :0   Min.   :  3.0   Mode :logical   Min.   :0       Min.   :0  
2025-07-28T13:39:11.890405835Z  1st Qu.:0   1st Qu.:107.0   FALSE:431       1st Qu.:0       1st Qu.:0  
2025-07-28T13:39:11.890408264Z  Median :0   Median :195.0                   Median :0       Median :0  
2025-07-28T13:39:11.890410683Z  Mean   :0   Mean   :206.2                   Mean   :0       Mean   :0  
2025-07-28T13:39:11.890413103Z  3rd Qu.:0   3rd Qu.:300.0                   3rd Qu.:0       3rd Qu.:0  
2025-07-28T13:39:11.890416203Z  Max.   :0   Max.   :534.0                   Max.   :0       Max.   :0  
2025-07-28T13:39:11.890418651Z                                                                         
2025-07-28T13:39:11.890464070Z [1] "Bind pre- and post-exposure time"
2025-07-28T13:39:11.975421664Z   patient_id           exposure             outcome          
2025-07-28T13:39:11.975454401Z  Length:4760        Min.   :2020-01-01   Min.   :2020-02-25  
2025-07-28T13:39:11.975456235Z  Class :character   1st Qu.:2020-04-15   1st Qu.:2021-09-02  
2025-07-28T13:39:11.975457400Z  Mode  :character   Median :2020-07-14   Median :2022-07-14  
2025-07-28T13:39:11.975458597Z                     Mean   :2020-07-24   Mean   :2022-07-22  
2025-07-28T13:39:11.975459696Z                     3rd Qu.:2020-10-29   3rd Qu.:2023-09-09  
2025-07-28T13:39:11.975461051Z                     Max.   :2021-06-18   Max.   :2024-04-26  
2025-07-28T13:39:11.975462145Z                                          NA's   :2723        
2025-07-28T13:39:11.975463191Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:11.975464335Z  Min.   :2020-01-01   Min.   :2020-02-25   Min.   :2020-01-01  
2025-07-28T13:39:11.975465397Z  1st Qu.:2020-01-01   1st Qu.:2022-09-14   1st Qu.:2020-01-01  
2025-07-28T13:39:11.975466458Z  Median :2020-01-01   Median :2024-04-30   Median :2020-01-01  
2025-07-28T13:39:11.975467547Z  Mean   :2020-01-01   Mean   :2023-06-24   Mean   :2020-01-01  
2025-07-28T13:39:11.975468639Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:11.975469687Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:11.975470799Z                                                                
2025-07-28T13:39:11.975471870Z    study_stop           fup_start             fup_stop            cox_weight
2025-07-28T13:39:11.975473146Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-02-25   Min.   :1   
2025-07-28T13:39:11.975474225Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-09-14   1st Qu.:1   
2025-07-28T13:39:11.975492445Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-30   Median :1   
2025-07-28T13:39:11.975493727Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-06-24   Mean   :1   
2025-07-28T13:39:11.975494785Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:1   
2025-07-28T13:39:11.975498566Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1   
2025-07-28T13:39:11.975499713Z                                                                             
2025-07-28T13:39:11.975500776Z      tstart           tstop        outcome_status    exposure_status 
2025-07-28T13:39:11.975502019Z  Min.   :   0.0   Min.   :   1.0   Min.   :0.00000   Min.   :0.0000  
2025-07-28T13:39:11.975503087Z  1st Qu.: 131.0   1st Qu.: 183.0   1st Qu.:0.00000   1st Qu.:1.0000  
2025-07-28T13:39:11.975504156Z  Median : 269.0   Median : 321.0   Median :0.00000   Median :1.0000  
2025-07-28T13:39:11.975505311Z  Mean   : 351.2   Mean   : 461.4   Mean   :0.04265   Mean   :0.9095  
2025-07-28T13:39:11.975506432Z  3rd Qu.: 441.0   3rd Qu.: 556.0   3rd Qu.:0.00000   3rd Qu.:1.0000  
2025-07-28T13:39:11.975507499Z  Max.   :1581.0   Max.   :1582.0   Max.   :1.00000   Max.   :1.0000  
2025-07-28T13:39:11.975508587Z                                                                      
2025-07-28T13:39:11.975510195Z     episode      
2025-07-28T13:39:11.975511317Z  Min.   : 0.000  
2025-07-28T13:39:11.975512377Z  1st Qu.: 2.000  
2025-07-28T13:39:11.975513411Z  Median : 5.000  
2025-07-28T13:39:11.975514421Z  Mean   : 5.105  
2025-07-28T13:39:11.975515498Z  3rd Qu.: 8.000  
2025-07-28T13:39:11.975516452Z  Max.   :11.000  
2025-07-28T13:39:11.975517753Z                  
2025-07-28T13:39:11.975622091Z [1] "Set survival data for the unexposed"
2025-07-28T13:39:11.975649650Z [1] "Filter data to unexposed"
2025-07-28T13:39:11.976909421Z [1] "Rename variables to survival variable names"
2025-07-28T13:39:11.986893687Z   patient_id           exposure       outcome             index_date        
2025-07-28T13:39:11.986928497Z  Length:3620        Min.   :NA     Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:11.986932127Z  Class :character   1st Qu.:NA     1st Qu.:2020-12-29   1st Qu.:2020-01-01  
2025-07-28T13:39:11.986934414Z  Mode  :character   Median :NA     Median :2022-02-04   Median :2020-01-01  
2025-07-28T13:39:11.986936503Z                     Mean   :NaN    Mean   :2022-02-09   Mean   :2020-01-01  
2025-07-28T13:39:11.986938329Z                     3rd Qu.:NA     3rd Qu.:2023-03-14   3rd Qu.:2020-01-01  
2025-07-28T13:39:11.986940163Z                     Max.   :NA     Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:11.986941913Z                     NA's   :3620   NA's   :1854                             
2025-07-28T13:39:11.986943688Z  end_date_outcome      study_start           study_stop        
2025-07-28T13:39:11.986957796Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2024-04-30  
2025-07-28T13:39:11.986960186Z  1st Qu.:2021-11-12   1st Qu.:2020-01-01   1st Qu.:2024-04-30  
2025-07-28T13:39:11.986962018Z  Median :2024-01-10   Median :2020-01-01   Median :2024-04-30  
2025-07-28T13:39:11.986963814Z  Mean   :2023-02-12   Mean   :2020-01-01   Mean   :2024-04-30  
2025-07-28T13:39:11.986965583Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30  
2025-07-28T13:39:11.986967433Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30  
2025-07-28T13:39:11.986969163Z                                                                
2025-07-28T13:39:11.986971499Z    fup_start             fup_stop          outcome_status     cox_weight
2025-07-28T13:39:11.986973378Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :0.0000   Min.   :1   
2025-07-28T13:39:11.986975170Z  1st Qu.:2020-01-01   1st Qu.:2021-11-12   1st Qu.:0.0000   1st Qu.:1   
2025-07-28T13:39:11.986977272Z  Median :2020-01-01   Median :2024-01-10   Median :0.0000   Median :1   
2025-07-28T13:39:11.986979042Z  Mean   :2020-01-01   Mean   :2023-02-12   Mean   :0.4878   Mean   :1   
2025-07-28T13:39:11.986980804Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:1.0000   3rd Qu.:1   
2025-07-28T13:39:11.986982597Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1.0000   Max.   :1   
2025-07-28T13:39:11.986984397Z                                                                         
2025-07-28T13:39:11.986986234Z      tstart      tstop        exposure_status    episode 
2025-07-28T13:39:11.986988030Z  Min.   :0   Min.   :   1.0   Min.   :0       Min.   :0  
2025-07-28T13:39:11.986989819Z  1st Qu.:0   1st Qu.: 682.8   1st Qu.:0       1st Qu.:0  
2025-07-28T13:39:11.986995356Z  Median :0   Median :1471.0   Median :0       Median :0  
2025-07-28T13:39:11.986997395Z  Mean   :0   Mean   :1139.5   Mean   :0       Mean   :0  
2025-07-28T13:39:11.986999206Z  3rd Qu.:0   3rd Qu.:1582.0   3rd Qu.:0       3rd Qu.:0  
2025-07-28T13:39:11.987000961Z  Max.   :0   Max.   :1582.0   Max.   :0       Max.   :0  
2025-07-28T13:39:11.987002668Z                                                          
2025-07-28T13:39:11.987004377Z [1] "Combine exposed and unexposed individuals"
2025-07-28T13:39:12.004266265Z   patient_id           exposure             outcome          
2025-07-28T13:39:12.004309928Z  Length:8380        Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:12.004312171Z  Class :character   1st Qu.:2020-04-15   1st Qu.:2021-05-08  
2025-07-28T13:39:12.004313853Z  Mode  :character   Median :2020-07-14   Median :2022-05-12  
2025-07-28T13:39:12.004315355Z                     Mean   :2020-07-24   Mean   :2022-05-07  
2025-07-28T13:39:12.004316927Z                     3rd Qu.:2020-10-29   3rd Qu.:2023-05-31  
2025-07-28T13:39:12.004336115Z                     Max.   :2021-06-18   Max.   :2024-04-30  
2025-07-28T13:39:12.004337655Z                     NA's   :3620         NA's   :4577        
2025-07-28T13:39:12.004339444Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:12.004340975Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:12.004342381Z  1st Qu.:2020-01-01   1st Qu.:2022-04-28   1st Qu.:2020-01-01  
2025-07-28T13:39:12.004343770Z  Median :2020-01-01   Median :2024-04-26   Median :2020-01-01  
2025-07-28T13:39:12.004345623Z  Mean   :2020-01-01   Mean   :2023-04-28   Mean   :2020-01-01  
2025-07-28T13:39:12.004347141Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:12.004348744Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:12.004350216Z                                                                
2025-07-28T13:39:12.004351723Z    study_stop           fup_start             fup_stop          outcome_status 
2025-07-28T13:39:12.004353376Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-01   Min.   :0.000  
2025-07-28T13:39:12.004355115Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-04-28   1st Qu.:0.000  
2025-07-28T13:39:12.004399812Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-26   Median :0.000  
2025-07-28T13:39:12.004409531Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-04-28   Mean   :0.235  
2025-07-28T13:39:12.004412496Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:0.000  
2025-07-28T13:39:12.004414666Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1.000  
2025-07-28T13:39:12.004431782Z                                                                                
2025-07-28T13:39:12.004434877Z    cox_weight     tstart           tstop        exposure_status     episode    
2025-07-28T13:39:12.004436976Z  Min.   :1    Min.   :   0.0   Min.   :   1.0   Min.   :0.0000   Min.   : 0.0  
2025-07-28T13:39:12.004438965Z  1st Qu.:1    1st Qu.:   0.0   1st Qu.: 244.0   1st Qu.:0.0000   1st Qu.: 0.0  
2025-07-28T13:39:12.004441001Z  Median :1    Median :  35.0   Median : 520.0   Median :1.0000   Median : 1.0  
2025-07-28T13:39:12.004443014Z  Mean   :1    Mean   : 199.5   Mean   : 754.4   Mean   :0.5166   Mean   : 2.9  
2025-07-28T13:39:12.004448314Z  3rd Qu.:1    3rd Qu.: 306.0   3rd Qu.:1449.2   3rd Qu.:1.0000   3rd Qu.: 6.0  
2025-07-28T13:39:12.004450611Z  Max.   :1    Max.   :1581.0   Max.   :1582.0   Max.   :1.0000   Max.   :11.0  
2025-07-28T13:39:12.004452590Z                                                                                
2025-07-28T13:39:12.004454702Z [1] "Add indicators for episode"
2025-07-28T13:39:12.029583232Z   patient_id           exposure             outcome          
2025-07-28T13:39:12.029633462Z  Length:8380        Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:12.029658229Z  Class :character   1st Qu.:2020-04-15   1st Qu.:2021-05-08  
2025-07-28T13:39:12.029662010Z  Mode  :character   Median :2020-07-14   Median :2022-05-12  
2025-07-28T13:39:12.029664654Z                     Mean   :2020-07-24   Mean   :2022-05-07  
2025-07-28T13:39:12.029667147Z                     3rd Qu.:2020-10-29   3rd Qu.:2023-05-31  
2025-07-28T13:39:12.029669773Z                     Max.   :2021-06-18   Max.   :2024-04-30  
2025-07-28T13:39:12.029672127Z                     NA's   :3620         NA's   :4577        
2025-07-28T13:39:12.029674325Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:12.029676570Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:12.029678808Z  1st Qu.:2020-01-01   1st Qu.:2022-04-28   1st Qu.:2020-01-01  
2025-07-28T13:39:12.029680969Z  Median :2020-01-01   Median :2024-04-26   Median :2020-01-01  
2025-07-28T13:39:12.029683131Z  Mean   :2020-01-01   Mean   :2023-04-28   Mean   :2020-01-01  
2025-07-28T13:39:12.029685450Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:12.029687647Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:12.029689790Z                                                                
2025-07-28T13:39:12.029692144Z    study_stop           fup_start             fup_stop          outcome_status 
2025-07-28T13:39:12.029694522Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-01   Min.   :0.000  
2025-07-28T13:39:12.029697716Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-04-28   1st Qu.:0.000  
2025-07-28T13:39:12.029700053Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-26   Median :0.000  
2025-07-28T13:39:12.029702460Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-04-28   Mean   :0.235  
2025-07-28T13:39:12.029704764Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:0.000  
2025-07-28T13:39:12.029707066Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1.000  
2025-07-28T13:39:12.029709329Z                                                                                
2025-07-28T13:39:12.029711583Z    cox_weight     tstart           tstop        exposure_status     episode    
2025-07-28T13:39:12.029713882Z  Min.   :1    Min.   :   0.0   Min.   :   1.0   Min.   :0.0000   Min.   : 0.0  
2025-07-28T13:39:12.029729252Z  1st Qu.:1    1st Qu.:   0.0   1st Qu.: 244.0   1st Qu.:0.0000   1st Qu.: 0.0  
2025-07-28T13:39:12.029739899Z  Median :1    Median :  35.0   Median : 520.0   Median :1.0000   Median : 1.0  
2025-07-28T13:39:12.029742796Z  Mean   :1    Mean   : 199.5   Mean   : 754.4   Mean   :0.5166   Mean   : 2.9  
2025-07-28T13:39:12.029745226Z  3rd Qu.:1    3rd Qu.: 306.0   3rd Qu.:1449.2   3rd Qu.:1.0000   3rd Qu.: 6.0  
2025-07-28T13:39:12.029749289Z  Max.   :1    Max.   :1581.0   Max.   :1582.0   Max.   :1.0000   Max.   :11.0  
2025-07-28T13:39:12.029759322Z                                                                                
2025-07-28T13:39:12.029762022Z     days0_1           days1_7           days7_14         days14_28      
2025-07-28T13:39:12.029764298Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:12.029766555Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:12.029768816Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:12.029771216Z  Mean   :0.05179   Mean   :0.05179   Mean   :0.05167   Mean   :0.05155  
2025-07-28T13:39:12.029773531Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:12.029775829Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:12.029778095Z                                                                         
2025-07-28T13:39:12.029780326Z    days28_56         days56_84         days84_183       days183_365     
2025-07-28T13:39:12.029782477Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:12.029784863Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:12.029787039Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:12.029789220Z  Mean   :0.05095   Mean   :0.05048   Mean   :0.04952   Mean   :0.04809  
2025-07-28T13:39:12.029791388Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:12.029793587Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:12.029795761Z                                                                         
2025-07-28T13:39:12.029797949Z   days365_730       days730_1065     days1065_1582    
2025-07-28T13:39:12.029800195Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:12.029803294Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:12.029805528Z  Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:12.029807720Z  Mean   :0.04368   Mean   :0.03652   Mean   :0.03055  
2025-07-28T13:39:12.029810078Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:12.029812252Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:12.029814446Z                                                       
2025-07-28T13:39:12.043582470Z   patient_id           exposure             outcome          
2025-07-28T13:39:12.043644711Z  Length:8380        Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:12.043649328Z  Class :character   1st Qu.:2020-04-15   1st Qu.:2021-05-08  
2025-07-28T13:39:12.043652056Z  Mode  :character   Median :2020-07-14   Median :2022-05-12  
2025-07-28T13:39:12.043654358Z                     Mean   :2020-07-24   Mean   :2022-05-07  
2025-07-28T13:39:12.043676929Z                     3rd Qu.:2020-10-29   3rd Qu.:2023-05-31  
2025-07-28T13:39:12.043679751Z                     Max.   :2021-06-18   Max.   :2024-04-30  
2025-07-28T13:39:12.043682242Z                     NA's   :3620         NA's   :4577        
2025-07-28T13:39:12.043684452Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:12.043686701Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:12.043688900Z  1st Qu.:2020-01-01   1st Qu.:2022-04-28   1st Qu.:2020-01-01  
2025-07-28T13:39:12.043691312Z  Median :2020-01-01   Median :2024-04-26   Median :2020-01-01  
2025-07-28T13:39:12.043693439Z  Mean   :2020-01-01   Mean   :2023-04-28   Mean   :2020-01-01  
2025-07-28T13:39:12.043695659Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:12.043697942Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:12.043700122Z                                                                
2025-07-28T13:39:12.043702365Z    study_stop           fup_start             fup_stop          outcome_status 
2025-07-28T13:39:12.043704834Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-01   Min.   :0.000  
2025-07-28T13:39:12.043707243Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-04-28   1st Qu.:0.000  
2025-07-28T13:39:12.043709526Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-26   Median :0.000  
2025-07-28T13:39:12.043711766Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-04-28   Mean   :0.235  
2025-07-28T13:39:12.043713991Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:0.000  
2025-07-28T13:39:12.043731965Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1.000  
2025-07-28T13:39:12.043734389Z                                                                                
2025-07-28T13:39:12.043736620Z    cox_weight     tstart           tstop        exposure_status     episode    
2025-07-28T13:39:12.043738918Z  Min.   :1    Min.   :   0.0   Min.   :   1.0   Min.   :0.0000   Min.   : 0.0  
2025-07-28T13:39:12.043741256Z  1st Qu.:1    1st Qu.:   0.0   1st Qu.: 244.0   1st Qu.:0.0000   1st Qu.: 0.0  
2025-07-28T13:39:12.043743597Z  Median :1    Median :  35.0   Median : 520.0   Median :1.0000   Median : 1.0  
2025-07-28T13:39:12.043745763Z  Mean   :1    Mean   : 199.5   Mean   : 754.4   Mean   :0.5166   Mean   : 2.9  
2025-07-28T13:39:12.043750340Z  3rd Qu.:1    3rd Qu.: 306.0   3rd Qu.:1449.2   3rd Qu.:1.0000   3rd Qu.: 6.0  
2025-07-28T13:39:12.043752768Z  Max.   :1    Max.   :1581.0   Max.   :1582.0   Max.   :1.0000   Max.   :11.0  
2025-07-28T13:39:12.043754978Z                                                                                
2025-07-28T13:39:12.043757165Z     days0_1           days1_7           days7_14         days14_28      
2025-07-28T13:39:12.043759413Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:12.043774660Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:12.043777381Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:12.043779776Z  Mean   :0.05179   Mean   :0.05179   Mean   :0.05167   Mean   :0.05155  
2025-07-28T13:39:12.043782158Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:12.043784420Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:12.043786701Z                                                                         
2025-07-28T13:39:12.043788991Z    days28_56         days56_84         days84_183       days183_365     
2025-07-28T13:39:12.043791245Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:12.043793487Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:12.043795744Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:12.043797957Z  Mean   :0.05095   Mean   :0.05048   Mean   :0.04952   Mean   :0.04809  
2025-07-28T13:39:12.043801556Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:12.043803844Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:12.043806074Z                                                                         
2025-07-28T13:39:12.043808314Z   days365_730       days730_1065     days1065_1582    
2025-07-28T13:39:12.043810568Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:12.043812784Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:12.043814998Z  Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:12.043817247Z  Mean   :0.04368   Mean   :0.03652   Mean   :0.03055  
2025-07-28T13:39:12.043819472Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:12.043821645Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:12.043823876Z                                                       
2025-07-28T13:39:12.043871799Z [1] "Calculate events in each time period"
2025-07-28T13:39:12.065536295Z [1] "Calculate number of events per episode"
2025-07-28T13:39:12.081022758Z    episode N_events
2025-07-28T13:39:12.081073232Z 1        0     1766
2025-07-28T13:39:12.081075054Z 2        2        1
2025-07-28T13:39:12.081076422Z 3        3        1
2025-07-28T13:39:12.081077700Z 4        4        5
2025-07-28T13:39:12.081079399Z 5        5        4
2025-07-28T13:39:12.081080765Z 6        6        6
2025-07-28T13:39:12.081081942Z 7        7       11
2025-07-28T13:39:12.081083390Z 8        8       31
2025-07-28T13:39:12.081097960Z 9        9       55
2025-07-28T13:39:12.081099277Z 10      10       44
2025-07-28T13:39:12.081100480Z 11      11       45
2025-07-28T13:39:12.081101780Z [1] "Add number of events to episode info table"
2025-07-28T13:39:12.082695655Z    episode   time_period N_events
2025-07-28T13:39:12.082731393Z 1        0      days_pre     1766
2025-07-28T13:39:12.082735623Z 2        1       days0_1        0
2025-07-28T13:39:12.082738103Z 3        2       days1_7        1
2025-07-28T13:39:12.082740070Z 4        3      days7_14        1
2025-07-28T13:39:12.082741989Z 5        4     days14_28        5
2025-07-28T13:39:12.082743800Z 6        5     days28_56        4
2025-07-28T13:39:12.082745639Z 7        6     days56_84        6
2025-07-28T13:39:12.082747387Z 8        7    days84_183       11
2025-07-28T13:39:12.082749088Z 9        8   days183_365       31
2025-07-28T13:39:12.082750861Z 10       9   days365_730       55
2025-07-28T13:39:12.082752544Z 11      10  days730_1065       44
2025-07-28T13:39:12.082754294Z 12      11 days1065_1582       45
2025-07-28T13:39:12.082756044Z [1] "Calculate person-time in each episode"
2025-07-28T13:39:12.097213655Z    episode   time_period N_events person_time_total
2025-07-28T13:39:12.097248989Z 1        0      days_pre     1766           4213874
2025-07-28T13:39:12.097251211Z 2        1       days0_1        0               434
2025-07-28T13:39:12.097252925Z 3        2       days1_7        1              2599
2025-07-28T13:39:12.097254604Z 4        3      days7_14        1              3029
2025-07-28T13:39:12.097256139Z 5        4     days14_28        5              6004
2025-07-28T13:39:12.097257928Z 6        5     days28_56        4             11907
2025-07-28T13:39:12.097258943Z 7        6     days56_84        6             11737
2025-07-28T13:39:12.097259949Z 8        7    days84_183       11             40451
2025-07-28T13:39:12.097260917Z 9        8   days183_365       31             70119
2025-07-28T13:39:12.097261986Z 10       9   days365_730       55            120707
2025-07-28T13:39:12.097262997Z 11      10  days730_1065       44             94966
2025-07-28T13:39:12.097263967Z 12      11 days1065_1582       45             73779
2025-07-28T13:39:12.097264998Z [1] "Calculate median person-time"
2025-07-28T13:39:12.110965683Z    episode   time_period N_events person_time_total outcome_time_median
2025-07-28T13:39:12.111006369Z 1        0      days_pre     1766           4213874               766.0
2025-07-28T13:39:12.111010790Z 2        1       days0_1        0               434                  NA
2025-07-28T13:39:12.111013726Z 3        2       days1_7        1              2599                 1.0
2025-07-28T13:39:12.111036068Z 4        3      days7_14        1              3029                 5.0
2025-07-28T13:39:12.111039115Z 5        4     days14_28        5              6004                 4.0
2025-07-28T13:39:12.111041580Z 6        5     days28_56        4             11907                16.5
2025-07-28T13:39:12.111043952Z 7        6     days56_84        6             11737                19.0
2025-07-28T13:39:12.111046218Z 8        7    days84_183       11             40451                36.0
2025-07-28T13:39:12.111048478Z 9        8   days183_365       31             70119                91.0
2025-07-28T13:39:12.111050733Z 10       9   days365_730       55            120707               156.0
2025-07-28T13:39:12.111052971Z 11      10  days730_1065       44             94966               201.0
2025-07-28T13:39:12.111055270Z 12      11 days1065_1582       45             73779               220.0
2025-07-28T13:39:12.111057604Z [1] "Add time from previous episodes to median person-time"
2025-07-28T13:39:12.111695180Z    episode   time_period N_events person_time_total outcome_time_median
2025-07-28T13:39:12.111731068Z 1        0      days_pre     1766           4213874               766.0
2025-07-28T13:39:12.111738874Z 2        1       days0_1        0               434                  NA
2025-07-28T13:39:12.111740926Z 3        2       days1_7        1              2599                 2.0
2025-07-28T13:39:12.111742717Z 4        3      days7_14        1              3029                12.0
2025-07-28T13:39:12.111744858Z 5        4     days14_28        5              6004                18.0
2025-07-28T13:39:12.111746925Z 6        5     days28_56        4             11907                44.5
2025-07-28T13:39:12.111748921Z 7        6     days56_84        6             11737                75.0
2025-07-28T13:39:12.111750978Z 8        7    days84_183       11             40451               120.0
2025-07-28T13:39:12.111753051Z 9        8   days183_365       31             70119               274.0
2025-07-28T13:39:12.111755111Z 10       9   days365_730       55            120707               521.0
2025-07-28T13:39:12.111757011Z 11      10  days730_1065       44             94966               931.0
2025-07-28T13:39:12.111758900Z 12      11 days1065_1582       45             73779              1285.0
2025-07-28T13:39:12.112073720Z    episode   time_period N_events person_time_total outcome_time_median
2025-07-28T13:39:12.112082152Z 1        0      days_pre     1766           4213874               766.0
2025-07-28T13:39:12.112084385Z 2        1       days0_1        0               434                  NA
2025-07-28T13:39:12.112086154Z 3        2       days1_7        1              2599                 2.0
2025-07-28T13:39:12.112087906Z 4        3      days7_14        1              3029                12.0
2025-07-28T13:39:12.112089631Z 5        4     days14_28        5              6004                18.0
2025-07-28T13:39:12.112100717Z 6        5     days28_56        4             11907                44.5
2025-07-28T13:39:12.112103099Z 7        6     days56_84        6             11737                75.0
2025-07-28T13:39:12.112106435Z 8        7    days84_183       11             40451               120.0
2025-07-28T13:39:12.112108308Z 9        8   days183_365       31             70119               274.0
2025-07-28T13:39:12.112109982Z 10       9   days365_730       55            120707               521.0
2025-07-28T13:39:12.112111622Z 11      10  days730_1065       44             94966               931.0
2025-07-28T13:39:12.112113299Z 12      11 days1065_1582       45             73779              1285.0
2025-07-28T13:39:12.127340888Z [1] "Add strata information to data"
2025-07-28T13:39:12.159967767Z   patient_id           exposure             outcome          
2025-07-28T13:39:12.159990655Z  Length:8380        Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:12.159992187Z  Class :character   1st Qu.:2020-04-15   1st Qu.:2021-05-08  
2025-07-28T13:39:12.159993261Z  Mode  :character   Median :2020-07-14   Median :2022-05-12  
2025-07-28T13:39:12.159994304Z                     Mean   :2020-07-24   Mean   :2022-05-07  
2025-07-28T13:39:12.159995397Z                     3rd Qu.:2020-10-29   3rd Qu.:2023-05-31  
2025-07-28T13:39:12.159996410Z                     Max.   :2021-06-18   Max.   :2024-04-30  
2025-07-28T13:39:12.159997738Z                     NA's   :3620         NA's   :4577        
2025-07-28T13:39:12.159998753Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:12.159999797Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:12.160000802Z  1st Qu.:2020-01-01   1st Qu.:2022-04-28   1st Qu.:2020-01-01  
2025-07-28T13:39:12.160001807Z  Median :2020-01-01   Median :2024-04-26   Median :2020-01-01  
2025-07-28T13:39:12.160002837Z  Mean   :2020-01-01   Mean   :2023-04-28   Mean   :2020-01-01  
2025-07-28T13:39:12.160003847Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:12.160004841Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:12.160005931Z                                                                
2025-07-28T13:39:12.160006961Z    study_stop           fup_start             fup_stop          outcome_status 
2025-07-28T13:39:12.160008060Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-01   Min.   :0.000  
2025-07-28T13:39:12.160009094Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-04-28   1st Qu.:0.000  
2025-07-28T13:39:12.160010135Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-26   Median :0.000  
2025-07-28T13:39:12.160011142Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-04-28   Mean   :0.235  
2025-07-28T13:39:12.160012154Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:0.000  
2025-07-28T13:39:12.160022196Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1.000  
2025-07-28T13:39:12.160023332Z                                                                                
2025-07-28T13:39:12.160024462Z    cox_weight     tstart           tstop        exposure_status     episode    
2025-07-28T13:39:12.160025453Z  Min.   :1    Min.   :   0.0   Min.   :   1.0   Min.   :0.0000   Min.   : 0.0  
2025-07-28T13:39:12.160026564Z  1st Qu.:1    1st Qu.:   0.0   1st Qu.: 244.0   1st Qu.:0.0000   1st Qu.: 0.0  
2025-07-28T13:39:12.160027597Z  Median :1    Median :  35.0   Median : 520.0   Median :1.0000   Median : 1.0  
2025-07-28T13:39:12.160028714Z  Mean   :1    Mean   : 199.5   Mean   : 754.4   Mean   :0.5166   Mean   : 2.9  
2025-07-28T13:39:12.160030972Z  3rd Qu.:1    3rd Qu.: 306.0   3rd Qu.:1449.2   3rd Qu.:1.0000   3rd Qu.: 6.0  
2025-07-28T13:39:12.160032057Z  Max.   :1    Max.   :1581.0   Max.   :1582.0   Max.   :1.0000   Max.   :11.0  
2025-07-28T13:39:12.160033110Z                                                                                
2025-07-28T13:39:12.160034143Z     days0_1           days1_7           days7_14         days14_28      
2025-07-28T13:39:12.160035156Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:12.160036233Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:12.160037241Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:12.160038288Z  Mean   :0.05179   Mean   :0.05179   Mean   :0.05167   Mean   :0.05155  
2025-07-28T13:39:12.160042354Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:12.160043377Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:12.160044399Z                                                                         
2025-07-28T13:39:12.160045457Z    days28_56         days56_84         days84_183       days183_365     
2025-07-28T13:39:12.160046545Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:12.160047541Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:12.160048522Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:12.160049500Z  Mean   :0.05095   Mean   :0.05048   Mean   :0.04952   Mean   :0.04809  
2025-07-28T13:39:12.160050548Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:12.160051534Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:12.160052557Z                                                                         
2025-07-28T13:39:12.160053554Z   days365_730       days730_1065     days1065_1582    
2025-07-28T13:39:12.160054553Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:12.160056928Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:12.160057933Z  Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:12.160058889Z  Mean   :0.04368   Mean   :0.03652   Mean   :0.03055  
2025-07-28T13:39:12.160059837Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:12.160060806Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:12.160061806Z                                                       
2025-07-28T13:39:12.160062760Z                  strat_cat_region
2025-07-28T13:39:12.160064542Z  West Midlands           :1047   
2025-07-28T13:39:12.160065649Z  North West              :1030   
2025-07-28T13:39:12.160066594Z  North East              : 961   
2025-07-28T13:39:12.160067525Z  Yorkshire and The Humber: 939   
2025-07-28T13:39:12.160068444Z  East                    : 924   
2025-07-28T13:39:12.160069397Z  East Midlands           : 901   
2025-07-28T13:39:12.160070345Z  (Other)                 :2578   
2025-07-28T13:39:12.160094831Z [1] "Add age covariates"
2025-07-28T13:39:12.182824922Z   patient_id           exposure             outcome          
2025-07-28T13:39:12.182858692Z  Length:8380        Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:12.182862467Z  Class :character   1st Qu.:2020-04-15   1st Qu.:2021-05-08  
2025-07-28T13:39:12.182864674Z  Mode  :character   Median :2020-07-14   Median :2022-05-12  
2025-07-28T13:39:12.182866639Z                     Mean   :2020-07-24   Mean   :2022-05-07  
2025-07-28T13:39:12.182868449Z                     3rd Qu.:2020-10-29   3rd Qu.:2023-05-31  
2025-07-28T13:39:12.182870189Z                     Max.   :2021-06-18   Max.   :2024-04-30  
2025-07-28T13:39:12.182872007Z                     NA's   :3620         NA's   :4577        
2025-07-28T13:39:12.182873822Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:12.182875633Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:12.182877416Z  1st Qu.:2020-01-01   1st Qu.:2022-04-28   1st Qu.:2020-01-01  
2025-07-28T13:39:12.182879201Z  Median :2020-01-01   Median :2024-04-26   Median :2020-01-01  
2025-07-28T13:39:12.182881027Z  Mean   :2020-01-01   Mean   :2023-04-28   Mean   :2020-01-01  
2025-07-28T13:39:12.182882862Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:12.182884568Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:12.182886494Z                                                                
2025-07-28T13:39:12.182888310Z    study_stop           fup_start             fup_stop          outcome_status 
2025-07-28T13:39:12.182890357Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-01   Min.   :0.000  
2025-07-28T13:39:12.182907916Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-04-28   1st Qu.:0.000  
2025-07-28T13:39:12.182910558Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-26   Median :0.000  
2025-07-28T13:39:12.182912538Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-04-28   Mean   :0.235  
2025-07-28T13:39:12.182914400Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:0.000  
2025-07-28T13:39:12.182916256Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1.000  
2025-07-28T13:39:12.182918085Z                                                                                
2025-07-28T13:39:12.182919867Z    cox_weight     tstart           tstop        exposure_status     episode    
2025-07-28T13:39:12.182921635Z  Min.   :1    Min.   :   0.0   Min.   :   1.0   Min.   :0.0000   Min.   : 0.0  
2025-07-28T13:39:12.182923394Z  1st Qu.:1    1st Qu.:   0.0   1st Qu.: 244.0   1st Qu.:0.0000   1st Qu.: 0.0  
2025-07-28T13:39:12.182925195Z  Median :1    Median :  35.0   Median : 520.0   Median :1.0000   Median : 1.0  
2025-07-28T13:39:12.182927002Z  Mean   :1    Mean   : 199.5   Mean   : 754.4   Mean   :0.5166   Mean   : 2.9  
2025-07-28T13:39:12.182930121Z  3rd Qu.:1    3rd Qu.: 306.0   3rd Qu.:1449.2   3rd Qu.:1.0000   3rd Qu.: 6.0  
2025-07-28T13:39:12.182932078Z  Max.   :1    Max.   :1581.0   Max.   :1582.0   Max.   :1.0000   Max.   :11.0  
2025-07-28T13:39:12.182933836Z                                                                                
2025-07-28T13:39:12.182935573Z     days0_1           days1_7           days7_14         days14_28      
2025-07-28T13:39:12.182937337Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:12.182939103Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:12.182940896Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:12.182942693Z  Mean   :0.05179   Mean   :0.05179   Mean   :0.05167   Mean   :0.05155  
2025-07-28T13:39:12.182944671Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:12.182946482Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:12.182948272Z                                                                         
2025-07-28T13:39:12.182950025Z    days28_56         days56_84         days84_183       days183_365     
2025-07-28T13:39:12.182951808Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:12.182953618Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:12.182955454Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:12.182957251Z  Mean   :0.05095   Mean   :0.05048   Mean   :0.04952   Mean   :0.04809  
2025-07-28T13:39:12.182959023Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:12.182963716Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:12.182965900Z                                                                         
2025-07-28T13:39:12.182967774Z   days365_730       days730_1065     days1065_1582    
2025-07-28T13:39:12.182969585Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:12.182971372Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:12.182973195Z  Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:12.182974993Z  Mean   :0.04368   Mean   :0.03652   Mean   :0.03055  
2025-07-28T13:39:12.182976768Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:12.182978540Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:12.182980311Z                                                       
2025-07-28T13:39:12.182982042Z                  strat_cat_region  cov_num_age     cov_num_age_sq 
2025-07-28T13:39:12.182983846Z  West Midlands           :1047    Min.   : 18.00   Min.   :  324  
2025-07-28T13:39:12.182986554Z  North West              :1030    1st Qu.: 40.00   1st Qu.: 1600  
2025-07-28T13:39:12.182988456Z  North East              : 961    Median : 62.00   Median : 3844  
2025-07-28T13:39:12.182990232Z  Yorkshire and The Humber: 939    Mean   : 63.09   Mean   : 4685  
2025-07-28T13:39:12.182991981Z  East                    : 924    3rd Qu.: 86.00   3rd Qu.: 7396  
2025-07-28T13:39:12.182993767Z  East Midlands           : 901    Max.   :110.00   Max.   :12100  
2025-07-28T13:39:12.182995541Z  (Other)                 :2578                                    
2025-07-28T13:39:12.182997420Z [1] "Add sex covariate"
2025-07-28T13:39:12.217851759Z   patient_id           exposure             outcome          
2025-07-28T13:39:12.217878230Z  Length:8380        Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:12.217879886Z  Class :character   1st Qu.:2020-04-15   1st Qu.:2021-05-08  
2025-07-28T13:39:12.217881096Z  Mode  :character   Median :2020-07-14   Median :2022-05-12  
2025-07-28T13:39:12.217882182Z                     Mean   :2020-07-24   Mean   :2022-05-07  
2025-07-28T13:39:12.217883241Z                     3rd Qu.:2020-10-29   3rd Qu.:2023-05-31  
2025-07-28T13:39:12.217884275Z                     Max.   :2021-06-18   Max.   :2024-04-30  
2025-07-28T13:39:12.217885307Z                     NA's   :3620         NA's   :4577        
2025-07-28T13:39:12.217886349Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:12.217887459Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:12.217888554Z  1st Qu.:2020-01-01   1st Qu.:2022-04-28   1st Qu.:2020-01-01  
2025-07-28T13:39:12.217889598Z  Median :2020-01-01   Median :2024-04-26   Median :2020-01-01  
2025-07-28T13:39:12.217901991Z  Mean   :2020-01-01   Mean   :2023-04-28   Mean   :2020-01-01  
2025-07-28T13:39:12.217903097Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:12.217904341Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:12.217905551Z                                                                
2025-07-28T13:39:12.217906646Z    study_stop           fup_start             fup_stop          outcome_status 
2025-07-28T13:39:12.217907865Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-01   Min.   :0.000  
2025-07-28T13:39:12.217908981Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-04-28   1st Qu.:0.000  
2025-07-28T13:39:12.217910121Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-26   Median :0.000  
2025-07-28T13:39:12.217911170Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-04-28   Mean   :0.235  
2025-07-28T13:39:12.217912331Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:0.000  
2025-07-28T13:39:12.217913583Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1.000  
2025-07-28T13:39:12.217914767Z                                                                                
2025-07-28T13:39:12.217919053Z    cox_weight     tstart           tstop        exposure_status     episode    
2025-07-28T13:39:12.217920235Z  Min.   :1    Min.   :   0.0   Min.   :   1.0   Min.   :0.0000   Min.   : 0.0  
2025-07-28T13:39:12.217921385Z  1st Qu.:1    1st Qu.:   0.0   1st Qu.: 244.0   1st Qu.:0.0000   1st Qu.: 0.0  
2025-07-28T13:39:12.217922439Z  Median :1    Median :  35.0   Median : 520.0   Median :1.0000   Median : 1.0  
2025-07-28T13:39:12.217923502Z  Mean   :1    Mean   : 199.5   Mean   : 754.4   Mean   :0.5166   Mean   : 2.9  
2025-07-28T13:39:12.217924535Z  3rd Qu.:1    3rd Qu.: 306.0   3rd Qu.:1449.2   3rd Qu.:1.0000   3rd Qu.: 6.0  
2025-07-28T13:39:12.217925576Z  Max.   :1    Max.   :1581.0   Max.   :1582.0   Max.   :1.0000   Max.   :11.0  
2025-07-28T13:39:12.217926627Z                                                                                
2025-07-28T13:39:12.217941526Z     days0_1           days1_7           days7_14         days14_28      
2025-07-28T13:39:12.217950608Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:12.217952119Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:12.217954132Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:12.217976159Z  Mean   :0.05179   Mean   :0.05179   Mean   :0.05167   Mean   :0.05155  
2025-07-28T13:39:12.217978062Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:12.217979155Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:12.217980407Z                                                                         
2025-07-28T13:39:12.217989813Z    days28_56         days56_84         days84_183       days183_365     
2025-07-28T13:39:12.218001500Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:12.218005687Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:12.218008420Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:12.218015074Z  Mean   :0.05095   Mean   :0.05048   Mean   :0.04952   Mean   :0.04809  
2025-07-28T13:39:12.218030113Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:12.218032006Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:12.218035863Z                                                                         
2025-07-28T13:39:12.218039586Z   days365_730       days730_1065     days1065_1582    
2025-07-28T13:39:12.218044909Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:12.218051236Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:12.218063950Z  Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:12.218065237Z  Mean   :0.04368   Mean   :0.03652   Mean   :0.03055  
2025-07-28T13:39:12.218068629Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:12.218075252Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:12.218078429Z                                                       
2025-07-28T13:39:12.218092477Z                  strat_cat_region  cov_num_age     cov_num_age_sq 
2025-07-28T13:39:12.218094051Z  West Midlands           :1047    Min.   : 18.00   Min.   :  324  
2025-07-28T13:39:12.218106235Z  North West              :1030    1st Qu.: 40.00   1st Qu.: 1600  
2025-07-28T13:39:12.218107470Z  North East              : 961    Median : 62.00   Median : 3844  
2025-07-28T13:39:12.218119231Z  Yorkshire and The Humber: 939    Mean   : 63.09   Mean   : 4685  
2025-07-28T13:39:12.218122295Z  East                    : 924    3rd Qu.: 86.00   3rd Qu.: 7396  
2025-07-28T13:39:12.218132754Z  East Midlands           : 901    Max.   :110.00   Max.   :12100  
2025-07-28T13:39:12.218152295Z  (Other)                 :2578                                    
2025-07-28T13:39:12.218157226Z  cov_cat_sex  
2025-07-28T13:39:12.218186106Z  Female:4295  
2025-07-28T13:39:12.218188035Z  Male  :4085  
2025-07-28T13:39:12.218189579Z               
2025-07-28T13:39:12.218191130Z               
2025-07-28T13:39:12.218192742Z               
2025-07-28T13:39:12.218193766Z               
2025-07-28T13:39:12.218194738Z               
2025-07-28T13:39:12.218259952Z [1] "Additional covariates specified: Add covariate information to data"
2025-07-28T13:39:12.231938998Z [1] "Additional covariates specified: Remove covariates with insufficient variation"
2025-07-28T13:39:12.279215864Z [1] "Identify non-numeric covariates to remove"
2025-07-28T13:39:12.279250958Z [1] "Covariate: cov_cat_sex"
2025-07-28T13:39:12.279253851Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.281031905Z     Var1 Freq
2025-07-28T13:39:12.281067169Z 1 Female  112
2025-07-28T13:39:12.281069054Z 2   Male   91
2025-07-28T13:39:12.281629764Z [1] "Covariate: cov_cat_ethnicity"
2025-07-28T13:39:12.281652035Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.283264700Z      Var1 Freq
2025-07-28T13:39:12.283299809Z 1   White   12
2025-07-28T13:39:12.283302155Z 2 Missing  137
2025-07-28T13:39:12.283303780Z 3   Mixed    7
2025-07-28T13:39:12.283305234Z 4   Asian   18
2025-07-28T13:39:12.283306841Z 5   Black   10
2025-07-28T13:39:12.283308509Z 6   Other   19
2025-07-28T13:39:12.283518142Z [1] "Covariate: cov_cat_imd"
2025-07-28T13:39:12.283527165Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.285049264Z                 Var1 Freq
2025-07-28T13:39:12.285071369Z 1  1 (most deprived)   42
2025-07-28T13:39:12.285072895Z 2                  2   42
2025-07-28T13:39:12.285073966Z 3                  3   33
2025-07-28T13:39:12.285075409Z 4                  4   45
2025-07-28T13:39:12.285076409Z 5 5 (least deprived)   41
2025-07-28T13:39:12.285161913Z [1] "Covariate: cov_bin_hcworker"
2025-07-28T13:39:12.285180172Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.286143909Z    Var1 Freq
2025-07-28T13:39:12.286152482Z 1 FALSE   87
2025-07-28T13:39:12.286153905Z 2  TRUE  116
2025-07-28T13:39:12.286197029Z [1] "Covariate: cov_cat_smoking"
2025-07-28T13:39:12.286201539Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.287124007Z             Var1 Freq
2025-07-28T13:39:12.287127409Z 1   Never smoker    3
2025-07-28T13:39:12.287128536Z 2    Ever smoker   36
2025-07-28T13:39:12.287129639Z 3 Current smoker   65
2025-07-28T13:39:12.287130618Z 4        Missing   99
2025-07-28T13:39:12.287215577Z [1] "Add covariate to removal list"
2025-07-28T13:39:12.287238942Z [1] "Covariate: cov_bin_carehome"
2025-07-28T13:39:12.287240397Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.288128559Z    Var1 Freq
2025-07-28T13:39:12.288132595Z 1 FALSE  170
2025-07-28T13:39:12.288133596Z 2  TRUE   33
2025-07-28T13:39:12.288234911Z [1] "Covariate: cov_bin_obesity"
2025-07-28T13:39:12.288262837Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.289131582Z    Var1 Freq
2025-07-28T13:39:12.289159579Z 1 FALSE  198
2025-07-28T13:39:12.289162766Z 2  TRUE    5
2025-07-28T13:39:12.289189784Z [1] "Add covariate to removal list"
2025-07-28T13:39:12.289202051Z [1] "Covariate: cov_bin_ami"
2025-07-28T13:39:12.289204877Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.290035520Z    Var1 Freq
2025-07-28T13:39:12.290052033Z 1 FALSE  146
2025-07-28T13:39:12.290054139Z 2  TRUE   57
2025-07-28T13:39:12.290117149Z [1] "Covariate: cov_bin_dementia"
2025-07-28T13:39:12.290119962Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.290987443Z    Var1 Freq
2025-07-28T13:39:12.291001744Z 1 FALSE  174
2025-07-28T13:39:12.291003977Z 2  TRUE   29
2025-07-28T13:39:12.291075244Z [1] "Covariate: cov_bin_liver_disease"
2025-07-28T13:39:12.291081021Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.292008671Z    Var1 Freq
2025-07-28T13:39:12.292024893Z 1 FALSE  159
2025-07-28T13:39:12.292026889Z 2  TRUE   44
2025-07-28T13:39:12.292037614Z [1] "Covariate: cov_bin_ckd"
2025-07-28T13:39:12.292039609Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.293101401Z    Var1 Freq
2025-07-28T13:39:12.293119486Z 1 FALSE  159
2025-07-28T13:39:12.293121683Z 2  TRUE   44
2025-07-28T13:39:12.293193287Z [1] "Covariate: cov_bin_cancer"
2025-07-28T13:39:12.293199334Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.294104876Z    Var1 Freq
2025-07-28T13:39:12.294111164Z 1 FALSE   55
2025-07-28T13:39:12.294112703Z 2  TRUE  148
2025-07-28T13:39:12.294230902Z [1] "Covariate: cov_bin_hypertension"
2025-07-28T13:39:12.294245925Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.295044119Z    Var1 Freq
2025-07-28T13:39:12.295051077Z 1 FALSE   56
2025-07-28T13:39:12.295052978Z 2  TRUE  147
2025-07-28T13:39:12.295145268Z [1] "Covariate: cov_bin_diabetes"
2025-07-28T13:39:12.295152087Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.295947814Z    Var1 Freq
2025-07-28T13:39:12.295954183Z 1 FALSE   96
2025-07-28T13:39:12.295956125Z 2  TRUE  107
2025-07-28T13:39:12.296033389Z [1] "Covariate: cov_bin_depression"
2025-07-28T13:39:12.296036548Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.296917931Z    Var1 Freq
2025-07-28T13:39:12.296930146Z 1 FALSE  159
2025-07-28T13:39:12.296948730Z 2  TRUE   44
2025-07-28T13:39:12.297012335Z [1] "Covariate: cov_bin_copd"
2025-07-28T13:39:12.297024383Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.297863438Z    Var1 Freq
2025-07-28T13:39:12.297873897Z 1 FALSE   97
2025-07-28T13:39:12.297875974Z 2  TRUE  106
2025-07-28T13:39:12.297938869Z [1] "Covariate: cov_bin_stroke_all"
2025-07-28T13:39:12.297941957Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.298912311Z    Var1 Freq
2025-07-28T13:39:12.298933262Z 1 FALSE  121
2025-07-28T13:39:12.298936830Z 2  TRUE   82
2025-07-28T13:39:12.298982543Z [1] "Covariate: cov_bin_other_ae"
2025-07-28T13:39:12.298993311Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.299862115Z    Var1 Freq
2025-07-28T13:39:12.299876542Z 1 FALSE  189
2025-07-28T13:39:12.299878515Z 2  TRUE   14
2025-07-28T13:39:12.299934127Z [1] "Covariate: cov_bin_vte"
2025-07-28T13:39:12.299941110Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.300873728Z    Var1 Freq
2025-07-28T13:39:12.300897057Z 1 FALSE  135
2025-07-28T13:39:12.300900894Z 2  TRUE   68
2025-07-28T13:39:12.300915962Z [1] "Covariate: cov_bin_hf"
2025-07-28T13:39:12.300928400Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.301781256Z    Var1 Freq
2025-07-28T13:39:12.301799796Z 1 FALSE  184
2025-07-28T13:39:12.301802696Z 2  TRUE   19
2025-07-28T13:39:12.301830181Z [1] "Covariate: cov_bin_angina"
2025-07-28T13:39:12.301838678Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.302716113Z    Var1 Freq
2025-07-28T13:39:12.302727200Z 1 FALSE  184
2025-07-28T13:39:12.302728578Z 2  TRUE   19
2025-07-28T13:39:12.302729604Z [1] "Covariate: cov_bin_lipidmed"
2025-07-28T13:39:12.302730864Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.303596622Z    Var1 Freq
2025-07-28T13:39:12.303615463Z 1 FALSE  166
2025-07-28T13:39:12.303619134Z 2  TRUE   37
2025-07-28T13:39:12.303621022Z [1] "Covariate: cov_bin_antiplatelet"
2025-07-28T13:39:12.303623200Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.304442153Z    Var1 Freq
2025-07-28T13:39:12.304456048Z 1 FALSE  190
2025-07-28T13:39:12.304462479Z 2  TRUE   13
2025-07-28T13:39:12.304464570Z [1] "Covariate: cov_bin_anticoagulant"
2025-07-28T13:39:12.304466628Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.305292322Z    Var1 Freq
2025-07-28T13:39:12.305307392Z 1 FALSE  192
2025-07-28T13:39:12.305310943Z 2  TRUE   11
2025-07-28T13:39:12.305336281Z [1] "Covariate: cov_bin_cocp"
2025-07-28T13:39:12.305351089Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.306158427Z    Var1 Freq
2025-07-28T13:39:12.306165637Z 1 FALSE  193
2025-07-28T13:39:12.306167795Z 2  TRUE   10
2025-07-28T13:39:12.306201652Z [1] "Covariate: cov_bin_hrt"
2025-07-28T13:39:12.306207587Z [1] "Calculate frequency for each level"
2025-07-28T13:39:12.306975155Z    Var1 Freq
2025-07-28T13:39:12.306980340Z 1 FALSE  187
2025-07-28T13:39:12.306982456Z 2  TRUE   16
2025-07-28T13:39:12.307062138Z [1] "Check strata variables meet covariate threshold"
2025-07-28T13:39:12.307071511Z [1] "Remove covariates"
2025-07-28T13:39:12.342578003Z   patient_id           exposure             outcome          
2025-07-28T13:39:12.342606158Z  Length:8380        Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:12.342609554Z  Class :character   1st Qu.:2020-04-15   1st Qu.:2021-05-08  
2025-07-28T13:39:12.342612146Z  Mode  :character   Median :2020-07-14   Median :2022-05-12  
2025-07-28T13:39:12.342614253Z                     Mean   :2020-07-24   Mean   :2022-05-07  
2025-07-28T13:39:12.342616357Z                     3rd Qu.:2020-10-29   3rd Qu.:2023-05-31  
2025-07-28T13:39:12.342618680Z                     Max.   :2021-06-18   Max.   :2024-04-30  
2025-07-28T13:39:12.342621135Z                     NA's   :3620         NA's   :4577        
2025-07-28T13:39:12.342623251Z    index_date         end_date_outcome      study_start        
2025-07-28T13:39:12.342625186Z  Min.   :2020-01-01   Min.   :2020-01-01   Min.   :2020-01-01  
2025-07-28T13:39:12.342627181Z  1st Qu.:2020-01-01   1st Qu.:2022-04-28   1st Qu.:2020-01-01  
2025-07-28T13:39:12.342629025Z  Median :2020-01-01   Median :2024-04-26   Median :2020-01-01  
2025-07-28T13:39:12.342630768Z  Mean   :2020-01-01   Mean   :2023-04-28   Mean   :2020-01-01  
2025-07-28T13:39:12.342632574Z  3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:2020-01-01  
2025-07-28T13:39:12.342634691Z  Max.   :2020-01-01   Max.   :2024-04-30   Max.   :2020-01-01  
2025-07-28T13:39:12.342636676Z                                                                
2025-07-28T13:39:12.342638701Z    study_stop           fup_start             fup_stop          outcome_status 
2025-07-28T13:39:12.342640894Z  Min.   :2024-04-30   Min.   :2020-01-01   Min.   :2020-01-01   Min.   :0.000  
2025-07-28T13:39:12.342645776Z  1st Qu.:2024-04-30   1st Qu.:2020-01-01   1st Qu.:2022-04-28   1st Qu.:0.000  
2025-07-28T13:39:12.342647906Z  Median :2024-04-30   Median :2020-01-01   Median :2024-04-26   Median :0.000  
2025-07-28T13:39:12.342662322Z  Mean   :2024-04-30   Mean   :2020-01-01   Mean   :2023-04-28   Mean   :0.235  
2025-07-28T13:39:12.342669025Z  3rd Qu.:2024-04-30   3rd Qu.:2020-01-01   3rd Qu.:2024-04-30   3rd Qu.:0.000  
2025-07-28T13:39:12.342670875Z  Max.   :2024-04-30   Max.   :2020-01-01   Max.   :2024-04-30   Max.   :1.000  
2025-07-28T13:39:12.342672675Z                                                                                
2025-07-28T13:39:12.342674366Z    cox_weight     tstart           tstop        exposure_status     episode    
2025-07-28T13:39:12.342676061Z  Min.   :1    Min.   :   0.0   Min.   :   1.0   Min.   :0.0000   Min.   : 0.0  
2025-07-28T13:39:12.342678062Z  1st Qu.:1    1st Qu.:   0.0   1st Qu.: 244.0   1st Qu.:0.0000   1st Qu.: 0.0  
2025-07-28T13:39:12.342679959Z  Median :1    Median :  35.0   Median : 520.0   Median :1.0000   Median : 1.0  
2025-07-28T13:39:12.342681786Z  Mean   :1    Mean   : 199.5   Mean   : 754.4   Mean   :0.5166   Mean   : 2.9  
2025-07-28T13:39:12.342685054Z  3rd Qu.:1    3rd Qu.: 306.0   3rd Qu.:1449.2   3rd Qu.:1.0000   3rd Qu.: 6.0  
2025-07-28T13:39:12.342687148Z  Max.   :1    Max.   :1581.0   Max.   :1582.0   Max.   :1.0000   Max.   :11.0  
2025-07-28T13:39:12.342688930Z                                                                                
2025-07-28T13:39:12.342690768Z     days0_1           days1_7           days7_14         days14_28      
2025-07-28T13:39:12.342692481Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:12.342694353Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:12.342696207Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:12.342698071Z  Mean   :0.05179   Mean   :0.05179   Mean   :0.05167   Mean   :0.05155  
2025-07-28T13:39:12.342699777Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:12.342701520Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:12.342703316Z                                                                         
2025-07-28T13:39:12.342705122Z    days28_56         days56_84         days84_183       days183_365     
2025-07-28T13:39:12.342706943Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:12.342708697Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:12.342718454Z  Median :0.00000   Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:12.342720591Z  Mean   :0.05095   Mean   :0.05048   Mean   :0.04952   Mean   :0.04809  
2025-07-28T13:39:12.342722304Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:12.342724026Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:12.342725631Z                                                                         
2025-07-28T13:39:12.342729764Z   days365_730       days730_1065     days1065_1582    
2025-07-28T13:39:12.342731812Z  Min.   :0.00000   Min.   :0.00000   Min.   :0.00000  
2025-07-28T13:39:12.342733507Z  1st Qu.:0.00000   1st Qu.:0.00000   1st Qu.:0.00000  
2025-07-28T13:39:12.342735113Z  Median :0.00000   Median :0.00000   Median :0.00000  
2025-07-28T13:39:12.342736667Z  Mean   :0.04368   Mean   :0.03652   Mean   :0.03055  
2025-07-28T13:39:12.342738248Z  3rd Qu.:0.00000   3rd Qu.:0.00000   3rd Qu.:0.00000  
2025-07-28T13:39:12.342739910Z  Max.   :1.00000   Max.   :1.00000   Max.   :1.00000  
2025-07-28T13:39:12.342741494Z                                                       
2025-07-28T13:39:12.342743135Z                  strat_cat_region  cov_num_age     cov_num_age_sq 
2025-07-28T13:39:12.342744954Z  West Midlands           :1047    Min.   : 18.00   Min.   :  324  
2025-07-28T13:39:12.342747296Z  North West              :1030    1st Qu.: 40.00   1st Qu.: 1600  
2025-07-28T13:39:12.342749229Z  North East              : 961    Median : 62.00   Median : 3844  
2025-07-28T13:39:12.342751046Z  Yorkshire and The Humber: 939    Mean   : 63.09   Mean   : 4685  
2025-07-28T13:39:12.342752811Z  East                    : 924    3rd Qu.: 86.00   3rd Qu.: 7396  
2025-07-28T13:39:12.342754591Z  East Midlands           : 901    Max.   :110.00   Max.   :12100  
2025-07-28T13:39:12.342756276Z  (Other)                 :2578                                    
2025-07-28T13:39:12.342758073Z  cov_cat_sex   cov_cat_ethnicity             cov_cat_imd   cov_num_consrate2019
2025-07-28T13:39:12.342759821Z  Female:4295   White  : 606      1 (most deprived) :1684   Min.   :0.00000     
2025-07-28T13:39:12.342761673Z  Male  :4085   Missing:5759      2                 :1655   1st Qu.:0.00000     
2025-07-28T13:39:12.342763371Z                Mixed  : 224      3                 :1580   Median :0.00000     
2025-07-28T13:39:12.342765211Z                Asian  : 553      4                 :1744   Mean   :0.03687     
2025-07-28T13:39:12.342766933Z                Black  : 507      5 (least deprived):1717   3rd Qu.:0.00000     
2025-07-28T13:39:12.342768752Z                Other  : 731                                Max.   :2.00000     
2025-07-28T13:39:12.342770565Z                                                                                
2025-07-28T13:39:12.342772313Z  cov_bin_hcworker cov_bin_carehome cov_bin_ami     cov_bin_dementia
2025-07-28T13:39:12.342773995Z  Mode :logical    Mode :logical    Mode :logical   Mode :logical   
2025-07-28T13:39:12.342775833Z  FALSE:3983       FALSE:6975       FALSE:6175      FALSE:7237      
2025-07-28T13:39:12.342777553Z  TRUE :4397       TRUE :1405       TRUE :2205      TRUE :1143      
2025-07-28T13:39:12.342779257Z                                                                    
2025-07-28T13:39:12.342782022Z                                                                    
2025-07-28T13:39:12.342790303Z                                                                    
2025-07-28T13:39:12.342792232Z                                                                    
2025-07-28T13:39:12.342794089Z  cov_bin_liver_disease cov_bin_ckd     cov_bin_cancer  cov_bin_hypertension
2025-07-28T13:39:12.342796053Z  Mode :logical         Mode :logical   Mode :logical   Mode :logical       
2025-07-28T13:39:12.342797903Z  FALSE:6698            FALSE:6413      FALSE:2175      FALSE:2361          
2025-07-28T13:39:12.342799821Z  TRUE :1682            TRUE :1967      TRUE :6205      TRUE :6019          
2025-07-28T13:39:12.342801631Z                                                                            
2025-07-28T13:39:12.342803545Z                                                                            
2025-07-28T13:39:12.342806192Z                                                                            
2025-07-28T13:39:12.342808236Z                                                                            
2025-07-28T13:39:12.342810099Z  cov_bin_diabetes cov_bin_depression cov_bin_copd    cov_bin_stroke_all
2025-07-28T13:39:12.342812058Z  Mode :logical    Mode :logical      Mode :logical   Mode :logical     
2025-07-28T13:39:12.342813867Z  FALSE:3859       FALSE:6511         FALSE:3736      FALSE:5399        
2025-07-28T13:39:12.342815639Z  TRUE :4521       TRUE :1869         TRUE :4644      TRUE :2981        
2025-07-28T13:39:12.342817382Z                                                                        
2025-07-28T13:39:12.342819103Z                                                                        
2025-07-28T13:39:12.342820812Z                                                                        
2025-07-28T13:39:12.342822601Z                                                                        
2025-07-28T13:39:12.342824339Z  cov_bin_other_ae cov_bin_vte     cov_bin_hf      cov_bin_angina 
2025-07-28T13:39:12.342826074Z  Mode :logical    Mode :logical   Mode :logical   Mode :logical  
2025-07-28T13:39:12.342827805Z  FALSE:7578       FALSE:5596      FALSE:7535      FALSE:7679     
2025-07-28T13:39:12.342829546Z  TRUE :802        TRUE :2784      TRUE :845       TRUE :701      
2025-07-28T13:39:12.342831260Z                                                                  
2025-07-28T13:39:12.342832989Z                                                                  
2025-07-28T13:39:12.342834732Z                                                                  
2025-07-28T13:39:12.342836443Z                                                                  
2025-07-28T13:39:12.342838224Z  cov_bin_lipidmed cov_bin_antiplatelet cov_bin_anticoagulant cov_bin_cocp   
2025-07-28T13:39:12.342840022Z  Mode :logical    Mode :logical        Mode :logical         Mode :logical  
2025-07-28T13:39:12.342841829Z  FALSE:6841       FALSE:7869           FALSE:7963            FALSE:8047     
2025-07-28T13:39:12.342845743Z  TRUE :1539       TRUE :511            TRUE :417             TRUE :333      
2025-07-28T13:39:12.342847726Z                                                                             
2025-07-28T13:39:12.342849526Z                                                                             
2025-07-28T13:39:12.342851320Z                                                                             
2025-07-28T13:39:12.342853119Z                                                                             
2025-07-28T13:39:12.342854957Z  cov_bin_hrt    
2025-07-28T13:39:12.342857769Z  Mode :logical  
2025-07-28T13:39:12.342859537Z  FALSE:7844     
2025-07-28T13:39:12.342861144Z  TRUE :536      
2025-07-28T13:39:12.342862821Z                 
2025-07-28T13:39:12.342864562Z                 
2025-07-28T13:39:12.342866288Z                 
2025-07-28T13:39:12.342867888Z                 
2025-07-28T13:39:12.342870083Z [1] "Removed covariates: cov_cat_smoking" "Removed covariates: cov_bin_obesity"
2025-07-28T13:39:12.342872248Z [1] "Collapsed covariates: "
2025-07-28T13:39:12.342882018Z [1] "Save analysis ready dataset"
2025-07-28T13:39:12.359314918Z [1] "Perform Cox modelling"
2025-07-28T13:39:12.386527038Z [1] "Define model formula"
2025-07-28T13:39:12.386698972Z [1] "Add age covariate"
2025-07-28T13:39:12.386705679Z [1] "Specify knot placement for age spline"
2025-07-28T13:39:12.387578363Z [1] "Knots will be placed at: 28, 62, 100"
2025-07-28T13:39:12.387608817Z [1] "Surv(tstart, tstop, outcome_status) ~ days0_1 + days1_7 + days7_14 + days14_28 + days28_56 + days56_84 + days84_183 + days183_365 + days365_730 + days730_1065 + days1065_1582 + cov_cat_sex + rms::strat(strat_cat_region) + cluster(patient_id) + rms::rcs(cov_num_age, parms=knot_placement)"
2025-07-28T13:39:12.387615949Z [1] "Fit Cox model"
2025-07-28T13:39:13.118228079Z Cox Proportional Hazards Model
2025-07-28T13:39:13.118254246Z 
2025-07-28T13:39:13.118258131Z rms::cph(formula = as.formula(surv_formula), data = df, weights = df$cox_weight, 
2025-07-28T13:39:13.118260802Z     method = "breslow", x = TRUE, y = TRUE, surv = TRUE)
2025-07-28T13:39:13.118263344Z 
2025-07-28T13:39:13.118265711Z                         Model Tests      Discrimination    
2025-07-28T13:39:13.118268152Z                                                 Indexes    
2025-07-28T13:39:13.118270451Z Obs       8380    LR chi2     10.55      R2       0.001    
2025-07-28T13:39:13.118272752Z Events    1969    d.f.           14    R2(14,8380)0.000    
2025-07-28T13:39:13.118275054Z Center -0.1495    Pr(> chi2) 0.7208    R2(14,1969)0.000    
2025-07-28T13:39:13.118277768Z                   Score chi2  11.55      Dxy      0.032    
2025-07-28T13:39:13.118287994Z                   Pr(> chi2) 0.6425                        
2025-07-28T13:39:13.118290847Z 
2025-07-28T13:39:13.118292348Z                  Coef    S.E.   Wald Z Pr(>|Z|)
2025-07-28T13:39:13.118293990Z days0_1          -2.0036 0.0845 -23.72 <0.0001 
2025-07-28T13:39:13.118295576Z days1_7           0.1215 1.0020   0.12 0.9035  
2025-07-28T13:39:13.118297065Z days7_14         -0.0334 1.0022  -0.03 0.9734  
2025-07-28T13:39:13.118298552Z days14_28         0.9386 0.4099   2.29 0.0220  
2025-07-28T13:39:13.118299994Z days28_56        -0.0487 0.5031  -0.10 0.9229  
2025-07-28T13:39:13.118301428Z days56_84         0.3594 0.4080   0.88 0.3783  
2025-07-28T13:39:13.118302842Z days84_183       -0.3046 0.3039  -1.00 0.3162  
2025-07-28T13:39:13.118304280Z days183_365       0.1613 0.1840   0.88 0.3807  
2025-07-28T13:39:13.118305719Z days365_730       0.1154 0.1416   0.82 0.4150  
2025-07-28T13:39:13.118307155Z days730_1065     -0.0535 0.1549  -0.35 0.7296  
2025-07-28T13:39:13.118308582Z days1065_1582     0.0668 0.1544   0.43 0.6652  
2025-07-28T13:39:13.118309964Z cov_cat_sex=Male -0.0705 0.0451  -1.56 0.1182  
2025-07-28T13:39:13.118311344Z cov_num_age      -0.0023 0.0023  -0.97 0.3309  
2025-07-28T13:39:13.118312746Z cov_num_age'      0.0037 0.0030   1.23 0.2198  
2025-07-28T13:39:13.118314135Z 
2025-07-28T13:39:13.118315501Z [1] "Format results"
2025-07-28T13:39:13.118688440Z [1] "Add covariates to model formula"
2025-07-28T13:39:13.118744558Z [1] "Surv(tstart, tstop, outcome_status) ~ days0_1 + days1_7 + days7_14 + days14_28 + days28_56 + days56_84 + days84_183 + days183_365 + days365_730 + days730_1065 + days1065_1582 + cov_cat_sex + rms::strat(strat_cat_region) + cluster(patient_id) + rms::rcs(cov_num_age, parms=knot_placement) + cov_cat_ethnicity + cov_cat_imd + cov_num_consrate2019 + cov_bin_hcworker + cov_bin_carehome + cov_bin_ami + cov_bin_dementia + cov_bin_liver_disease + cov_bin_ckd + cov_bin_cancer + cov_bin_hypertension + cov_bin_diabetes + cov_bin_depression + cov_bin_copd + cov_bin_stroke_all + cov_bin_other_ae + cov_bin_vte + cov_bin_hf + cov_bin_angina + cov_bin_lipidmed + cov_bin_antiplatelet + cov_bin_anticoagulant + cov_bin_cocp + cov_bin_hrt"
2025-07-28T13:39:13.118757636Z [1] "Fit Cox model with covariates"
2025-07-28T13:39:13.332020078Z Cox Proportional Hazards Model
2025-07-28T13:39:13.332050926Z 
2025-07-28T13:39:13.332052466Z rms::cph(formula = as.formula(surv_formula_adj), data = df, weights = df$cox_weight, 
2025-07-28T13:39:13.332054155Z     method = "breslow", x = TRUE, y = TRUE, surv = TRUE)
2025-07-28T13:39:13.332055512Z 
2025-07-28T13:39:13.332056615Z                         Model Tests      Discrimination    
2025-07-28T13:39:13.332057829Z                                                 Indexes    
2025-07-28T13:39:13.332059002Z Obs       8380    LR chi2     40.85      R2       0.005    
2025-07-28T13:39:13.332071639Z Events    1969    d.f.           45    R2(45,8380)0.000    
2025-07-28T13:39:13.332072584Z Center -0.1167    Pr(> chi2) 0.6485    R2(45,1969)0.000    
2025-07-28T13:39:13.332073783Z                   Score chi2  41.71      Dxy      0.078    
2025-07-28T13:39:13.332074757Z                   Pr(> chi2) 0.6123                        
2025-07-28T13:39:13.332075716Z 
2025-07-28T13:39:13.332076559Z                                Coef    S.E.   Wald Z Pr(>|Z|)
2025-07-28T13:39:13.332077674Z days0_1                        -2.0069 0.0857 -23.41 <0.0001 
2025-07-28T13:39:13.332078701Z days1_7                         0.1266 1.0019   0.13 0.8994  
2025-07-28T13:39:13.332079625Z days7_14                       -0.0285 1.0023  -0.03 0.9773  
2025-07-28T13:39:13.332080522Z days14_28                       0.9425 0.4099   2.30 0.0215  
2025-07-28T13:39:13.332081441Z days28_56                      -0.0426 0.5030  -0.08 0.9325  
2025-07-28T13:39:13.332082348Z days56_84                       0.3657 0.4080   0.90 0.3701  
2025-07-28T13:39:13.332083244Z days84_183                     -0.2989 0.3039  -0.98 0.3253  
2025-07-28T13:39:13.332084139Z days183_365                     0.1673 0.1842   0.91 0.3639  
2025-07-28T13:39:13.332085036Z days365_730                     0.1224 0.1418   0.86 0.3879  
2025-07-28T13:39:13.332085924Z days730_1065                   -0.0435 0.1548  -0.28 0.7789  
2025-07-28T13:39:13.332086828Z days1065_1582                   0.0815 0.1551   0.53 0.5992  
2025-07-28T13:39:13.332087719Z cov_cat_sex=Male               -0.0793 0.0455  -1.74 0.0817  
2025-07-28T13:39:13.332088600Z cov_num_age                    -0.0021 0.0023  -0.87 0.3821  
2025-07-28T13:39:13.332089529Z cov_num_age'                    0.0035 0.0030   1.15 0.2485  
2025-07-28T13:39:13.332090433Z cov_cat_ethnicity=Missing       0.0603 0.0873   0.69 0.4894  
2025-07-28T13:39:13.332091312Z cov_cat_ethnicity=Mixed         0.1738 0.1509   1.15 0.2496  
2025-07-28T13:39:13.332092193Z cov_cat_ethnicity=Asian         0.1245 0.1197   1.04 0.2982  
2025-07-28T13:39:13.332093103Z cov_cat_ethnicity=Black        -0.0842 0.1278  -0.66 0.5099  
2025-07-28T13:39:13.332094009Z cov_cat_ethnicity=Other         0.0949 0.1121   0.85 0.3970  
2025-07-28T13:39:13.332094907Z cov_cat_imd=2                  -0.0817 0.0724  -1.13 0.2591  
2025-07-28T13:39:13.332095805Z cov_cat_imd=3                  -0.1427 0.0743  -1.92 0.0546  
2025-07-28T13:39:13.332096708Z cov_cat_imd=4                   0.0495 0.0720   0.69 0.4914  
2025-07-28T13:39:13.332098385Z cov_cat_imd=5 (least deprived)  0.0259 0.0705   0.37 0.7130  
2025-07-28T13:39:13.332099296Z cov_num_consrate2019            0.1794 0.1049   1.71 0.0872  
2025-07-28T13:39:13.332100196Z cov_bin_hcworker                0.0275 0.0455   0.61 0.5452  
2025-07-28T13:39:13.332101091Z cov_bin_carehome               -0.1134 0.0639  -1.78 0.0759  
2025-07-28T13:39:13.332103501Z cov_bin_ami                    -0.0086 0.0537  -0.16 0.8721  
2025-07-28T13:39:13.332104408Z cov_bin_dementia               -0.0221 0.0721  -0.31 0.7591  
2025-07-28T13:39:13.332105301Z cov_bin_liver_disease           0.0519 0.0574   0.90 0.3657  
2025-07-28T13:39:13.332106223Z cov_bin_ckd                    -0.0299 0.0547  -0.55 0.5843  
2025-07-28T13:39:13.332107322Z cov_bin_cancer                  0.0256 0.0598   0.43 0.6687  
2025-07-28T13:39:13.332108236Z cov_bin_hypertension            0.0003 0.0551   0.01 0.9951  
2025-07-28T13:39:13.332109148Z cov_bin_diabetes                0.0070 0.0488   0.14 0.8853  
2025-07-28T13:39:13.332110034Z cov_bin_depression             -0.0340 0.0575  -0.59 0.5549  
2025-07-28T13:39:13.332110930Z cov_bin_copd                   -0.0321 0.0529  -0.61 0.5434  
2025-07-28T13:39:13.332111853Z cov_bin_stroke_all              0.0333 0.0505   0.66 0.5088  
2025-07-28T13:39:13.332112748Z cov_bin_other_ae               -0.0553 0.0811  -0.68 0.4956  
2025-07-28T13:39:13.332113677Z cov_bin_vte                    -0.0858 0.0516  -1.66 0.0961  
2025-07-28T13:39:13.332114579Z cov_bin_hf                      0.0496 0.0721   0.69 0.4917  
2025-07-28T13:39:13.332115460Z cov_bin_angina                 -0.0193 0.0852  -0.23 0.8210  
2025-07-28T13:39:13.332116361Z cov_bin_lipidmed                0.0232 0.0586   0.40 0.6918  
2025-07-28T13:39:13.332117231Z cov_bin_antiplatelet            0.0958 0.0816   1.17 0.2404  
2025-07-28T13:39:13.332118106Z cov_bin_anticoagulant          -0.0289 0.1089  -0.26 0.7910  
2025-07-28T13:39:13.332118985Z cov_bin_cocp                   -0.0439 0.1285  -0.34 0.7327  
2025-07-28T13:39:13.332119861Z cov_bin_hrt                     0.1218 0.0896   1.36 0.1739  
2025-07-28T13:39:13.332120772Z 
2025-07-28T13:39:13.332121621Z [1] "Format results"
2025-07-28T13:39:13.332181944Z [1] "Bind to other results"
2025-07-28T13:39:13.332323876Z [1] "Return results"
2025-07-28T13:39:13.332330323Z [1] "Merge results with number of events and person time"
2025-07-28T13:39:13.333933355Z      term                lnhr             se_lnhr            model          
2025-07-28T13:39:13.333960608Z  Length:59          Min.   :-2.00689   Min.   :0.002332   Length:59         
2025-07-28T13:39:13.333963079Z  Class :character   1st Qu.:-0.04366   1st Qu.:0.057456   Class :character  
2025-07-28T13:39:13.333964831Z  Mode  :character   Median : 0.00347   Median :0.085716   Mode  :character  
2025-07-28T13:39:13.333966342Z                     Mean   :-0.01829   Mean   :0.190188                     
2025-07-28T13:39:13.333967812Z                     3rd Qu.: 0.09538   3rd Qu.:0.155026                     
2025-07-28T13:39:13.333969311Z                     Max.   : 0.94248   Max.   :1.002307                     
2025-07-28T13:39:13.333978842Z                                                                             
2025-07-28T13:39:13.333980892Z  surv_formula       covariate_removed  covariate_collapsed obs_warning       
2025-07-28T13:39:13.333982502Z  Length:59          Length:59          Length:59           Length:59         
2025-07-28T13:39:13.333984015Z  Class :character   Class :character   Class :character    Class :character  
2025-07-28T13:39:13.333985477Z  Mode  :character   Mode  :character   Mode  :character    Mode  :character  
2025-07-28T13:39:13.333986981Z                                                                              
2025-07-28T13:39:13.333988418Z                                                                              
2025-07-28T13:39:13.333989848Z                                                                              
2025-07-28T13:39:13.333991317Z                                                                              
2025-07-28T13:39:13.333992806Z     N_events     person_time_total outcome_time_median
2025-07-28T13:39:13.333994275Z  Min.   : 0.00   Min.   :   434    Min.   :   2.0     
2025-07-28T13:39:13.333995728Z  1st Qu.: 1.75   1st Qu.:  3773    1st Qu.:  18.0     
2025-07-28T13:39:13.333997165Z  Median : 6.00   Median : 11907    Median :  97.5     
2025-07-28T13:39:13.333998597Z  Mean   :18.45   Mean   : 39612    Mean   : 328.2     
2025-07-28T13:39:13.334000054Z  3rd Qu.:40.75   3rd Qu.: 72864    3rd Qu.: 521.0     
2025-07-28T13:39:13.334001481Z  Max.   :55.00   Max.   :120707    Max.   :1285.0     
2025-07-28T13:39:13.334002894Z  NA's   :37      NA's   :37        NA's   :39         
2025-07-28T13:39:13.334004317Z [1] "Add dummy row for days_pre term"
2025-07-28T13:39:13.335582834Z      term                lnhr             se_lnhr            model          
2025-07-28T13:39:13.335610703Z  Length:61          Min.   :-2.00689   Min.   :0.002332   Length:61         
2025-07-28T13:39:13.335613094Z  Class :character   1st Qu.:-0.04366   1st Qu.:0.057456   Class :character  
2025-07-28T13:39:13.335614821Z  Mode  :character   Median : 0.00347   Median :0.085716   Mode  :character  
2025-07-28T13:39:13.335616365Z                     Mean   :-0.01829   Mean   :0.190188                     
2025-07-28T13:39:13.335617816Z                     3rd Qu.: 0.09538   3rd Qu.:0.155026                     
2025-07-28T13:39:13.335619486Z                     Max.   : 0.94248   Max.   :1.002307                     
2025-07-28T13:39:13.335620906Z                     NA's   :2          NA's   :2                            
2025-07-28T13:39:13.335622330Z  surv_formula       covariate_removed  covariate_collapsed obs_warning       
2025-07-28T13:39:13.335623836Z  Length:61          Length:61          Length:61           Length:61         
2025-07-28T13:39:13.335625293Z  Class :character   Class :character   Class :character    Class :character  
2025-07-28T13:39:13.335636627Z  Mode  :character   Mode  :character   Mode  :character    Mode  :character  
2025-07-28T13:39:13.335638665Z                                                                              
2025-07-28T13:39:13.335640176Z                                                                              
2025-07-28T13:39:13.335641732Z                                                                              
2025-07-28T13:39:13.335643191Z                                                                              
2025-07-28T13:39:13.335644662Z     N_events       person_time_total outcome_time_median
2025-07-28T13:39:13.335646196Z  Min.   :   0.00   Min.   :    434   Min.   :   2.00    
2025-07-28T13:39:13.335647606Z  1st Qu.:   3.25   1st Qu.:   5260   1st Qu.:  24.62    
2025-07-28T13:39:13.335649034Z  Median :   8.50   Median :  26179   Median : 120.00    
2025-07-28T13:39:13.335650462Z  Mean   : 164.08   Mean   : 387467   Mean   : 368.05    
2025-07-28T13:39:13.335651906Z  3rd Qu.:  44.25   3rd Qu.:  79076   3rd Qu.: 704.75    
2025-07-28T13:39:13.335653361Z  Max.   :1766.00   Max.   :4213874   Max.   :1285.00    
2025-07-28T13:39:13.335654812Z  NA's   :37        NA's   :37        NA's   :39         
2025-07-28T13:39:13.335656187Z [1] "Tidy variables for outputting"
2025-07-28T13:39:13.335716934Z Warning messages:
2025-07-28T13:39:13.335727603Z 1: In rms::datadist(df) : index_date is constant
2025-07-28T13:39:13.335729361Z 2: In rms::datadist(df) : fup_start is constant
2025-07-28T13:39:13.335730390Z 3: In rms::datadist(df) : cox_weight is constant
2025-07-28T13:39:13.335731375Z 4: In rms::datadist(df) : index_date is constant
2025-07-28T13:39:13.335732414Z 5: In rms::datadist(df) : fup_start is constant
2025-07-28T13:39:13.335733449Z 6: In rms::datadist(df) : cox_weight is constant
2025-07-28T13:39:13.335738095Z [1] "Save output"
2025-07-28T13:39:13.338076424Z     model             exposure           outcome              term          
2025-07-28T13:39:13.338107795Z  Length:61          Length:61          Length:61          Length:61         
2025-07-28T13:39:13.338109082Z  Class :character   Class :character   Class :character   Class :character  
2025-07-28T13:39:13.338110050Z  Mode  :character   Mode  :character   Mode  :character   Mode  :character  
2025-07-28T13:39:13.338110994Z                                                                             
2025-07-28T13:39:13.338111946Z                                                                             
2025-07-28T13:39:13.338112901Z                                                                             
2025-07-28T13:39:13.338113824Z                                                                             
2025-07-28T13:39:13.338114753Z       lnhr             se_lnhr               hr            conf_low     
2025-07-28T13:39:13.338115656Z  Min.   :-2.00689   Min.   :0.002332   Min.   :0.1344   Min.   :0.1136  
2025-07-28T13:39:13.338122244Z  1st Qu.:-0.04366   1st Qu.:0.057456   1st Qu.:0.9573   1st Qu.:0.7298  
2025-07-28T13:39:13.338123236Z  Median : 0.00347   Median :0.085716   Median :1.0035   Median :0.8503  
2025-07-28T13:39:13.338124135Z  Mean   :-0.01829   Mean   :0.190188   Mean   :1.0482   Mean   :0.7619  
2025-07-28T13:39:13.338125058Z  3rd Qu.: 0.09538   3rd Qu.:0.155026   3rd Qu.:1.1001   3rd Qu.:0.9125  
2025-07-28T13:39:13.338125959Z  Max.   : 0.94248   Max.   :1.002307   Max.   :2.5663   Max.   :1.1492  
2025-07-28T13:39:13.338126865Z  NA's   :2          NA's   :2          NA's   :2        NA's   :2       
2025-07-28T13:39:13.338127816Z    conf_high        N_total       N_exposed      N_events      
2025-07-28T13:39:13.338128715Z  Min.   :0.159   Min.   :4054   Min.   :434   Min.   :   0.00  
2025-07-28T13:39:13.338129635Z  1st Qu.:1.092   1st Qu.:4054   1st Qu.:434   1st Qu.:   3.25  
2025-07-28T13:39:13.338130541Z  Median :1.210   Median :4054   Median :434   Median :   8.50  
2025-07-28T13:39:13.338131441Z  Mean   :1.875   Mean   :4054   Mean   :434   Mean   : 164.08  
2025-07-28T13:39:13.338132332Z  3rd Qu.:1.476   3rd Qu.:4054   3rd Qu.:434   3rd Qu.:  44.25  
2025-07-28T13:39:13.338143107Z  Max.   :8.088   Max.   :4054   Max.   :434   Max.   :1766.00  
2025-07-28T13:39:13.338144183Z  NA's   :2                                    NA's   :37       
2025-07-28T13:39:13.338145123Z  person_time_total outcome_time_median covariate_collapsed strata_warning    
2025-07-28T13:39:13.338146635Z  Min.   :    434   Min.   :   2.00     Length:61           Length:61         
2025-07-28T13:39:13.338147658Z  1st Qu.:   5260   1st Qu.:  24.62     Class :character    Class :character  
2025-07-28T13:39:13.338148607Z  Median :  26179   Median : 120.00     Mode  :character    Mode  :character  
2025-07-28T13:39:13.338149956Z  Mean   : 387467   Mean   : 368.05                                           
2025-07-28T13:39:13.338150902Z  3rd Qu.:  79076   3rd Qu.: 704.75                                           
2025-07-28T13:39:13.338151802Z  Max.   :4213874   Max.   :1285.00                                           
2025-07-28T13:39:13.338152707Z  NA's   :37        NA's   :39                                                
2025-07-28T13:39:13.338153636Z  obs_warning        surv_formula          input             cox_ipw         
2025-07-28T13:39:13.338154534Z  Length:61          Length:61          Length:61          Length:61         
2025-07-28T13:39:13.338155521Z  Class :character   Class :character   Class :character   Class :character  
2025-07-28T13:39:13.338156423Z  Mode  :character   Mode  :character   Mode  :character   Mode  :character  
2025-07-28T13:39:13.338157345Z                                                                             
2025-07-28T13:39:13.338158268Z                                                                             
2025-07-28T13:39:13.338160680Z                                                                             
2025-07-28T13:39:13.338161621Z                                                                             


job_definition_id: p34jtvkegx5lmbgo
job_definition_request_id: 4204ecd689
commit: 80168305fee16e2edc662c398b58e7a4d61658cd
docker_image_id: sha256:13f6c027b613bda2d60fbc6dbcd8f7263e1224f1e45a4797375e438f28fd0e5d
exit_code: 0
created_at: 1753709846
completed_at: 1753709953
status_message: Completed successfully

outputs:
  output/model/model_output-cohort_prevax-main-stroke_sahhs.csv  - moderately_sensitive
